(this.webpackJsonpconsole2=this.webpackJsonpconsole2||[]).push([[2],{11:function(e,t,a){"use strict";var n=a(71),r=a(0),c=a(131),l=a.n(c);const s=e=>{let t=e.color,a=e.block,c=e.component,s=e.className,o=e.loading,i=e.children,m=e.size,u=e.icon,d=Object(n.a)(e,["color","block","component","className","loading","children","size","icon"]);const p=c;return r.createElement(p,Object.assign({disabled:o},d,{className:"\n        btn\n        ".concat(t?"btn-".concat(t):"","\n        ").concat(m?"btn-".concat(m):"","\n        ").concat(o?"btn-loading":"","\n        ").concat(a?"btn-block":"","\n        ").concat(s||"","\n        ").concat(u?"btn-icon":"","\n      ")}),r.createElement("span",{className:"btn-label"},i),r.createElement("img",{src:l.a,alt:"",className:"btn-spinner"}))};s.defaultProps={component:"button",block:!1,loading:!1,type:"button",icon:!1},t.a=s},1135:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"showModal",(function(){return Pa})),a.d(n,"hideModal",(function(){return Ta})),a.d(n,"hideModalDelay",(function(){return Da}));var r=a(0),c=a.n(r),l=a(147),s=a.n(l),o=a(51),i=a.n(o),m=a(15),u=a(1153),d=a(69),p=a(672),b=a(7),h=a(71),E={auth:{signIn:{exact:!0,path:"/accounts/login"},signUp:{exact:!0,path:"/accounts/register"},callback:{exact:!0,path:"/accounts/login/:strategyName/callback"},oauth:{callback:{exact:!0,path:"/auth/oauth/callback"}}},home:{exact:!0,path:"/"},db:{index:{exact:!0,path:"/db"},new:{exact:!0,path:"/db-new/:dbPath*"},edit:{exact:!0,path:"/db-edit/:dbPath*"},show:{exact:!0,path:"/db-show/:dbPath*"},byId:{exact:!1,path:"/db/:dbPath*"}},classes:{index:{exact:!0,path:"/collections/@db/:dbPath*"},new:{exact:!0,path:"/collections-new/@db/:dbPath*"},byId:{exact:!0,path:"/collections/:classId/@db/:dbPath*"},settings:{exact:!0,path:"/collections-edit/:classId/@db/:dbPath*"},byIdWithoutDb:{exact:!0,path:"/collections/:classId"}},instances:{new:{exact:!0,path:"/collections/documents-new/:classId/@db/:dbPath*"},edit:{exact:!0,path:"/collections/documents-edit/:classId/:referenceId/@db/:dbPath*"},show:{exact:!0,path:"/collections/documents/:classId/:referenceId/@db/:dbPath*"}},indexes:{indexWithoutDb:{exact:!0,path:"/indexes"},index:{exact:!0,path:"/indexes/@db/:dbPath*"},settings:{exact:!0,path:"/indexes-show/:indexId/@db/:dbPath*"},edit:{exact:!0,path:"/indexes-edit/:indexId/@db/:dbPath*"},byId:{exact:!0,path:"/indexes/:indexId/@db/:dbPath*"},byIdWithoutDb:{exact:!0,path:"/indexes/:indexId"},new:{exact:!0,path:"/indexes-new/@db/:dbPath*"}},functions:{index:{exact:!0,path:"/functions/@db/:dbPath*"},new:{exact:!0,path:"/functions-new/@db/:dbPath*"},byId:{exact:!0,path:"/functions/:functionId/@db/:dbPath*"}},keys:{index:{exact:!0,path:"/keys/@db/:dbPath*"},indexWithoutDbBasic:{exact:!0,path:"/keys",redirectUrl:"https://app.fauna.com/keys"},indexWithoutDb:{exact:!0,path:"/keys/@db"},new:{exact:!0,path:"/keys-new/@db/:dbPath*"},newWithoutDbBasic:{exact:!0,path:"/keys-new",redirectUrl:"https://app.fauna.com/keys"},newWithoutDb:{exact:!0,path:"/keys-new/@db"}},webshell:{index:{exact:!0,path:"/webshell/@db/:dbPath*"},legacy:{exact:!0,path:"/console/@db/:dbPath*"}},roles:{index:{exact:!0,path:"/roles/@db/:dbPath*"},new:{exact:!0,path:"/roles-new/@db/:dbPath*"},show:{exact:!0,path:"/roles-show/:roleId/@db/:dbPath*"},edit:{exact:!0,path:"/roles-edit/:roleId/@db/:dbPath*"}},graphql:{index:{exact:!0,path:"/graphql/@db/:dbPath*"}},downloads:{index:{exact:!0,path:"/downloads"}}},f=a(4);const g=e=>{let t=e.name,a=e.mode,n=e.className,l=e.wrapperClassName,s=Object(h.a)(e,["name","mode","className","wrapperClassName"]);const o=Object(r.useRef)(null),i="".concat(String(a)," fa-").concat(t," ").concat(String(n));return Object(r.useEffect)(()=>{if(o){const e=o.current.querySelector("svg");e&&e.setAttribute("class",i)}},[t,n,i]),c.a.createElement("span",Object.assign({ref:o,className:l},s),c.a.createElement("i",{className:i}))};g.defaultProps={mode:"fas"};var y=g,v=a(11),O=a(131),j=a.n(O);function _(e){let t=e.loading,a=e.icon,n=e.label,r=Object(h.a)(e,["loading","icon","label"]);return c.a.createElement(v.a,r,t?c.a.createElement("img",{src:j.a,alt:"Spinner"}):c.a.createElement(y,{name:a}),n||null)}_.defaultProps={color:"subtle-link",loading:!1};var w=a(2);function N({message:e,level:t,active:a,onClose:n,details:r}){return c.a.createElement("div",{className:"alert alert-".concat(t," ").concat(a?"active":"")},c.a.createElement("div",{className:"alert__header"},e,c.a.createElement("span",{className:"alert-close",onClick:n},c.a.createElement(y,{name:"times"})),e===Object(w.b)("status.errors.unavailable")&&c.a.createElement("div",{className:"alert-actions"},c.a.createElement("a",{href:"http://status.fauna.com",rel:"noopener noreferrer",target:"_blank"},c.a.createElement("span",{className:"btn"},c.a.createElement(y,{name:"external-link-alt"}),Object(w.b)("status.name"))),c.a.createElement(_,{icon:"redo",label:"Retry",onClick:function(){window.location.reload(!0)}}))),r&&c.a.createElement("pre",{className:"alert__details"},r))}N.defaultProps={level:"success",active:!1};var C=a(68),S=a.n(C),q=a(256);function x({isOpen:e,children:t,className:a,onClose:n}){const c=Object(q.b)(e,null,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0},config:{duration:150}}),l=Object(q.b)(e,null,{from:{opacity:0,transform:"translateY(-10px) scale(0.9)"},enter:{opacity:1,transform:"translateY(0) scale(1)"},leave:{opacity:0,transform:"translateY(-10px) scale(0.9)"}}),s=e=>{e.stopPropagation()};return c.map(({item:e,key:c,props:o})=>e&&r.createElement(q.a.div,{key:c,style:o,className:"modal-overlay ".concat(a||""),onClick:n},l.map(({item:e,key:a,props:n})=>e&&r.createElement(q.a.div,{key:a,style:n,className:"modal",onClick:s},t))))}var k=function({onClose:e,children:t}){return r.createElement("div",{className:"modal__header"},r.createElement("div",{className:"modal__title"},t),r.createElement("div",{className:"modal__close"},r.createElement(v.a,{type:"button",className:"btn-icon",color:"muted",onClick:e},r.createElement(y,{name:"times"}))))};function I({children:e}){return r.createElement("div",{className:"modal__body"},e)}const P={github:"GitHub",netlify:"Netlify"};var T=({isOpen:e,toggle:t,method:a})=>{const n=Object(r.useMemo)(()=>(e=>e in P?P[e]:e)(a),[a]);return c.a.createElement(x,{isOpen:e},c.a.createElement(k,{onClose:t},"Email address already registered"),c.a.createElement(I,null,c.a.createElement("p",{className:"margin-bottom-4 line-height-150"},"Our records show that someone with this email address has already signed up via"," ",n,". Please"," ",c.a.createElement("a",{href:E.auth.signIn.path,onClick:t},"return to sign in"),", and click the ",n," button to sign in."),c.a.createElement("button",{onClick:t,type:"button",className:"btn btn-success btn-block btn-large"},"Return to sign in"),c.a.createElement("a",{href:"http://www2.fauna.com/contact-us",className:"center padding-y-3 font-size-14"},"Contact support")))};var D=Object(d.k)(({location:e})=>{const t=Object(r.useState)(!1),a=Object(f.a)(t,2),n=a[0],l=a[1],s=Object(r.useMemo)(()=>S.a.parse(e.search),[e.search]),o=s.error_code,i=s.method;Object(r.useEffect)(()=>{l(!!o)},[o]);const m=Object(r.useCallback)(()=>{l(!n)},[n]);return"user_is_using_another_strategy_or_provider"===o?c.a.createElement(T,{toggle:m,isOpen:n,method:i}):c.a.createElement(c.a.Fragment,null)});function R({title:e,form:t,content:a,location:n}){const c=Object(r.useState)({active:!1,message:null,level:"error"}),l=Object(f.a)(c,2),s=l[0],o=l[1];function i(e,t="error"){o({active:!0,message:e,level:t})}return Object(r.useEffect)(()=>{const t=S.a.parse(n.search),a=t.error,r=t.success,c=t.error_code;a&&("expired_session"===a?i(Object(w.b)("auth.errors.expiredSession")):"user_is_using_another_strategy_or_provider"!==c&&i(a)),r&&i(r,"success"),document.title=e},[n.search,e]),r.createElement(r.Fragment,null,r.createElement(N,{message:s.message,active:s.active,level:s.level,onClose:function(){o(Object(b.a)({},s,{active:!s.active}))}}),r.createElement(D,null),r.createElement("div",{className:"auth-content"},r.createElement("a",{href:String("https://fauna.com"),className:"auth-logo-wrapper"},r.createElement("svg",{className:"auth-logo",width:"201",height:"58",viewBox:"0 0 201 58",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M4.71545 21.3352L0 0L29.0515 23.0636L33.9837 16.6901L40.271 15.4478L47.1003 14.0974L40.271 24.576V38.6734L5.31166 57.9561L14.9052 42.6704L23.9024 37.161L14.5257 39.3756L6.44987 25.7643L23.1978 30.3554",fill:"white"}),r.createElement("path",{d:"M85.6367 15.4478C85.4199 15.9339 84.8779 17.0141 84.2275 18.4185H70.5689V25.4402H80.867C80.4334 26.4124 79.9456 27.3306 79.512 28.3029H70.6231V38.8354H67.5879V15.4478H85.6367Z",fill:"white"}),r.createElement("path",{d:"M165.583 15.3398C165.583 15.7178 165.583 16.204 165.583 16.7981V32.0838L149.052 14.7456V38.7274H151.924V22.1994L168.456 39.3216V16.7981C168.456 16.204 168.456 15.7178 168.456 15.3398H165.583Z",fill:"white"}),r.createElement("path",{d:"M134.417 15.3936V28.6268C134.417 33.65 132.087 36.0266 127.642 36.0266C123.198 36.0266 120.867 33.65 120.867 28.6268V15.3936H117.995V28.7888C117.995 35.3784 121.355 38.7812 127.588 38.7812C133.821 38.7812 137.182 35.3244 137.182 28.7888V15.3936H134.417Z",fill:"white"}),r.createElement("path",{d:"M98.9703 15.1777C98.9703 15.1777 87.5882 38.7815 87.6966 38.7815H90.9486L98.9703 21.3892L106.992 38.7815H110.244C110.352 38.7815 98.9703 15.1777 98.9703 15.1777Z",fill:"white"}),r.createElement("path",{d:"M189.593 15.1777C189.593 15.1777 178.211 38.7815 178.32 38.7815H181.572L189.593 21.3892L197.615 38.7815H200.867C200.975 38.7815 189.593 15.1777 189.593 15.1777Z",fill:"white"}))),r.createElement("div",{className:"auth-content-wrapper"},a,r.createElement("div",{className:"auth-form"},t({showAlert:i}))),r.createElement("footer",{className:"auth-footer"},r.createElement("small",null,Object(w.b)("footer.copyright",[(new Date).getFullYear().toString()]),"\xa0",Object(w.b)("auth.terms.first")," ",r.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www2.fauna.com/terms"},Object(w.b)("footer.terms"))," ",Object(w.b)("auth.terms.second")," ",r.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www2.fauna.com/privacy"},Object(w.b)("footer.privacy")),"."))))}var L=a(10);var A=({children:e})=>c.a.createElement("div",{className:"divider"},e),F=a(331),U=a.n(F);let B;const M=(e,t)=>e(B).login(t).then(Q),V=()=>{G()},H=(e,t)=>(e=>i.a.post("".concat(B.url,"/register"),Object(b.a)({},e,{strategy:"email_and_password"}),{withCredentials:!0}).then(e=>e.data))(e).then(()=>M(t,e)),W=()=>U.a.getJSON("session"),G=()=>{U.a.remove("session",{domain:B.domain||""})},Q=e=>{const t=B,a=(t.url,Object(h.a)(t,["url"]));return U.a.set("session",e,a),Promise.resolve(e)},z=()=>void 0!==W(),Y=()=>{if(!z())throw new K};class K extends Error{}var J=e=>({login:t=>i.a.post("".concat(e.url,"/login"),t).then(({data:e})=>({data:e,strategy:"email_and_password"}))});const $=String("https://auth.console.fauna.com");function Z(){const e=Object(r.useCallback)(()=>{const e=window.location.origin,t="".concat($,"/oauth/start")+"?provider_name=github"+"&redirect_url=".concat(e).concat(E.auth.oauth.callback.path);window.location.href=t},[]);return c.a.createElement(v.a,{component:"a",id:"cloud-signup-cta-github",color:"github",onClick:e},c.a.createElement(y,{mode:"fab",name:"github"})," GitHub")}var X=a(650),ee=a.n(X);const te=String("https://auth.console.fauna.com");function ae(){const e=Object(r.useCallback)(()=>{const e=window.location.origin,t="".concat(te,"/oauth/start")+"?provider_name=netlify"+"&redirect_url=".concat(e).concat(E.auth.oauth.callback.path);window.location.href=t},[]);return c.a.createElement(v.a,{block:!0,type:"button",color:"netlify",id:"cloud-signup-cta-netlify",className:"margin-bottom-2",onClick:e},c.a.createElement("img",{src:ee.a,alt:"Netlify logo"}),"Netlify")}function ne(e){const t=Object(r.useState)(e),a=Object(f.a)(t,2),n=a[0],c=a[1],l=(e,t)=>{c(a=>Object(b.a)({},a,{[e]:t}))};return{formValues:n,setFormValues:c,setFormValue:l,handleChange:e=>{const t=e.currentTarget,a=t.name,n=t.value,r=t.type;["radio","checkbox"].includes(r)?l(a,e.currentTarget.checked):l(a,n)},renderArrayField:(e,t)=>t({name:e,addField:function(t=""){c(a=>Object(b.a)({},a,{[e]:a[e].concat(t)}))},removeField:function(t){c(a=>Object(b.a)({},a,{[e]:a[e].filter((e,a)=>a!==t)}))},values:n[e],getValueByIndex:function(t){return n[e][t]},onFieldChange:function(t,a){c(n=>Object(b.a)({},n,{[e]:n[e].map((e,n)=>n===t?a.currentTarget.value:e)}))}})}}function re(e,t){return e&&""!==e?t?t(e):e:null}function ce(e){return c.a.createElement(c.a.Fragment,null,e.checked?c.a.createElement(y,{name:"check-square"}):c.a.createElement(y,{mode:"far",name:"square"}),c.a.createElement("input",Object.assign({style:{display:"none"},type:"checkbox"},e)))}const le=r.useState,se={email:"",name:"",password:"",confirmPassword:"",slackInvitation:!0};function oe(e){const t=le(!1),a=Object(f.a)(t,2),n=a[0],c=a[1],l=ne(se),s=l.formValues,o=l.handleChange;return r.createElement(r.Fragment,null,r.createElement("div",{className:"form-checkbox form-group center"},r.createElement("label",{htmlFor:"slackInvitation"},r.createElement(ce,{id:"slackInvitation",name:"slackInvitation",onChange:o,checked:s.slackInvitation}),Object(w.b)("auth.messages.slackInvitation"))),r.createElement(Z,null),r.createElement(ae,null),r.createElement(A,null,"or"),r.createElement("form",{onSubmit:function(t){if(t.preventDefault(),s.password!==s.confirmPassword)return e.onError({form:Object(w.b)("auth.errors.invalidConfirm")});c(!0),H(Object(b.a)({},s,{slack_invitation:s.slackInvitation}),J).then(t=>{c(!1),e.onSuccess(t,s)}).catch(t=>{c(!1),e.onError(t)})}},r.createElement("div",{className:"form-group"},r.createElement("label",{className:"required",htmlFor:"email"},Object(w.b)("attributes.businessEmail")),r.createElement("input",{onChange:o,id:"email",name:"email",type:"email",required:!0})),r.createElement("div",{className:"form-group"},r.createElement("label",{className:"required",htmlFor:"password"},Object(w.b)("attributes.password")),r.createElement("input",{onChange:o,id:"password",name:"password",type:"password",required:!0})),r.createElement("div",{className:"form-group"},r.createElement("label",{className:"required",htmlFor:"password"},Object(w.b)("attributes.confirmPassword")),r.createElement("input",{onChange:o,id:"confirmPassword",name:"confirmPassword",type:"password",required:!0})),r.createElement("div",{className:"form-group"},r.createElement(v.a,{loading:n,id:"cloud-signup-cta-normal",type:"submit",color:"cta-test-color",block:!0},Object(w.b)("auth.actions.start")))),r.createElement("p",{className:"have-account"},Object(w.b)("auth.messages.alreadyHaveAccount"),"\xa0",r.createElement(L.a,{to:E.auth.signIn.path},Object(w.b)("auth.actions.logIn"),".")))}var ie=a(6),me=a(651),ue=a.n(me);function de(e){function t(t,a){ie.f({urlString:String("https://db.fauna.com:443"),secret:t.data.secret}),e.history.push("".concat(E.home.path,"?first_session=true"))}return r.createElement(R,{title:Object(w.b)("auth.messages.startNow"),content:r.createElement(pe,null),location:e.location,form:({showAlert:e})=>r.createElement(oe,{onSuccess:t,onError:t=>{console.error(t);let a="";a=t.response?function(e){switch(e){case 400:return Object(w.b)("auth.errors.emailRegistered");case 500:return Object(w.b)("status.errors.unavailable");default:return Object(w.b)("auth.errors.default")}}(t.response.status):t.form,e(a)}})})}function pe(){return r.createElement(r.Fragment,null,r.createElement("div",{className:"auth-info"},r.createElement("div",{className:"verbiage"},r.createElement("h1",null,"FaunaDB: Database built for Serverless.",r.createElement("a",{href:String("https://fauna.com")}," Read more.")),r.createElement("h3",null,r.createElement("span",null,"Signup without ",r.createElement("br",null),"credit card"),r.createElement("span",null,"\xa0Generous free ",r.createElement("br",null),"daily usage tier"),r.createElement("span",null,"Get started ",r.createElement("br",null),"instantly"))),r.createElement("img",{src:ue.a,alt:"screenshot of Fauna Console Dashboard"}),r.createElement("div",{className:"verbiage-extra"},r.createElement("ul",null,r.createElement("li",null,"Query via GraphQL, or native drivers in nine languages"),r.createElement("li",null,"Access from regions across the globe"),r.createElement("li",null,"Scales dynamically with your workload"),r.createElement("li",null,r.createElement("span",null,"*"),r.createElement("span",null,"100K reads, 50K writes, 50MB data transfer, 5GB Storage."," ",r.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://fauna.com/pricing"},Object(w.b)("auth.messages.pricingDetails"))))))))}const be="".concat(String("https://app.fauna.com"),"/forgot_password"),he={email:"",password:""};function Ee(e){const t=Object(r.useState)(!1),a=Object(f.a)(t,2),n=a[0],c=a[1],l=ne(he),s=l.formValues,o=l.handleChange;return r.createElement(r.Fragment,null,r.createElement("div",{className:"verbiage"},r.createElement("h1",null,Object(w.b)("auth.messages.signIn")),r.createElement("p",null,"Get started free. No credit card required.")),r.createElement(Z,null),r.createElement(ae,null),r.createElement(A,null,"or"),r.createElement("form",{onSubmit:function(t){t.preventDefault(),c(!0),M(J,s).then(t=>{c(!1),e.onSuccess(t)}).catch(t=>{c(!1),e.onError(t)})}},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"email"},Object(w.b)("attributes.email")),r.createElement("input",{onChange:o,id:"email",name:"email",type:"email",required:!0,autoFocus:!0})),r.createElement("div",{className:"form-group"},r.createElement("div",{className:"password-label"},r.createElement("label",{htmlFor:"password"},Object(w.b)("attributes.password")),r.createElement("a",{tabIndex:10,href:be,className:"forgot-password"},Object(w.b)("auth.actions.forgotPassword"))),r.createElement("input",{onChange:o,id:"password",name:"password",type:"password",required:!0})),r.createElement("div",{className:"form-group"},r.createElement(v.a,{loading:n,type:"submit",color:"cta-test-color",block:!0},Object(w.b)("auth.actions.enterNow")))),r.createElement("div",{className:"no-have-account"},Object(w.b)("auth.messages.noAccount"),r.createElement(L.a,{className:"margin-left-1",to:E.auth.signUp.path},Object(w.b)("auth.actions.signUp"),".")))}function fe(e){function t(t){ie.f({urlString:String("https://db.fauna.com:443"),secret:t.data.secret}),e.history.push(E.home.path)}return r.createElement(R,{title:Object(w.b)("auth.messages.signIn"),content:r.createElement(ge,null),location:e.location,form:({showAlert:e})=>r.createElement(Ee,{onSuccess:t,onError:t=>{console.error(t);const a=function(e){switch(e){case 401:return Object(w.b)("auth.errors.invalidUserOrPassword");case 500:return Object(w.b)("status.errors.unavailable");default:return Object(w.b)("auth.errors.default")}}(t.response&&t.response.status);e(a)}})})}function ge(){return r.createElement(r.Fragment,null)}var ye=a(410);const ve=(e,t)=>{const a=Oe(e);if(void 0===a)return t;if("true"===a)return!0;if("false"===a)return!1;throw new Error('"'.concat(String(a),'" is not a valid boolean string. It should be "false" or "true".'))},Oe=e=>Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_SHELL_URL:"http://localhost:8086",REACT_APP_AUTH_COOKIE_DOMAIN:".fauna.com",REACT_APP_WEBSITE_APP_URL:"https://app.fauna.com",REACT_APP_AUTH_URL:"https://auth.console.fauna.com",REACT_APP_WEBSITE_TERMS_OF_USE_URL:"https://www2.fauna.com/terms",REACT_APP_PARDOT_SIGN_UP_FORM_URL:"https://www2.fauna.com/l/517431/2018-05-25/6bfg3m",REACT_APP_DRIFT_ID:"y6s3em52hv9t",REACT_APP_SENTRY_DSN:"https://d47f8b7d77404cfe929d370b99979808@sentry.io/1391762",REACT_APP_AUTH_GITHUB_CLIENT_ID:"615935a34846151ad806",REACT_APP_GTM_ID:"GTM-TGTQJ7M",REACT_APP_DB_URL:"https://db.fauna.com:443",REACT_APP_ACCOUNT_URL:"https://auth.console.fauna.com",REACT_APP_WEBSITE_PRICING_URL:"https://fauna.com/pricing",REACT_APP_WEBSITE_PRIVACY_POLICY:"https://www2.fauna.com/privacy",REACT_APP_WEBSITE_URL:"https://fauna.com",REACT_APP_STATUS_URL:"http://status.fauna.com"})[e];var je=e=>({login({secret:e}){const t=Oe("REACT_APP_DB_URL");if(!t)throw new Error("REACT_APP_DB_URL is not defined.");return ie.f({urlString:t,secret:e}),ie.c().then(a=>({data:{secret:e,url:t,session_id:"local"},strategy:"local"}))}});function _e({onSuccess:e,onError:t}){const a=ne({secret:""}),n=a.formValues,c=a.handleChange;return r.createElement("form",{onSubmit:function(a){a.preventDefault(),M(je,n).then(e).catch(t)}},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"secret"},Object(w.b)("attributes.key")),r.createElement("input",{id:"secret",name:"secret",type:"password",required:!0,onChange:c})),r.createElement("div",{className:"form-group"},r.createElement(v.a,{type:"submit",color:"success",block:!0},Object(w.b)("auth.actions.enterWithSecret"))))}function we(e){const t=Object(r.useState)(!1),a=Object(f.a)(t,2),n=a[0],c=a[1],l=Object(r.useState)(""),s=Object(f.a)(l,2),o=s[0],i=s[1];return r.createElement(r.Fragment,null,r.createElement(ye.Helmet,null,r.createElement("title",null,Object(w.b)("auth.messages.signInEnterprise"))),r.createElement(N,{message:o,active:n,level:"error",onClose:()=>c(!1)}),r.createElement("div",{className:"auth-content auth-content--enterprise"},r.createElement("div",{className:"auth-logo-wrapper"},r.createElement("svg",{className:"auth-logo",width:"201",height:"58",viewBox:"0 0 201 58",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M4.71545 21.3352L0 0L29.0515 23.0636L33.9837 16.6901L40.271 15.4478L47.1003 14.0974L40.271 24.576V38.6734L5.31166 57.9561L14.9052 42.6704L23.9024 37.161L14.5257 39.3756L6.44987 25.7643L23.1978 30.3554",fill:"white"}),r.createElement("path",{d:"M85.6367 15.4478C85.4199 15.9339 84.8779 17.0141 84.2275 18.4185H70.5689V25.4402H80.867C80.4334 26.4124 79.9456 27.3306 79.512 28.3029H70.6231V38.8354H67.5879V15.4478H85.6367Z",fill:"white"}),r.createElement("path",{d:"M165.583 15.3398C165.583 15.7178 165.583 16.204 165.583 16.7981V32.0838L149.052 14.7456V38.7274H151.924V22.1994L168.456 39.3216V16.7981C168.456 16.204 168.456 15.7178 168.456 15.3398H165.583Z",fill:"white"}),r.createElement("path",{d:"M134.417 15.3936V28.6268C134.417 33.65 132.087 36.0266 127.642 36.0266C123.198 36.0266 120.867 33.65 120.867 28.6268V15.3936H117.995V28.7888C117.995 35.3784 121.355 38.7812 127.588 38.7812C133.821 38.7812 137.182 35.3244 137.182 28.7888V15.3936H134.417Z",fill:"white"}),r.createElement("path",{d:"M98.9703 15.1777C98.9703 15.1777 87.5882 38.7815 87.6966 38.7815H90.9486L98.9703 21.3892L106.992 38.7815H110.244C110.352 38.7815 98.9703 15.1777 98.9703 15.1777Z",fill:"white"}),r.createElement("path",{d:"M189.593 15.1777C189.593 15.1777 178.211 38.7815 178.32 38.7815H181.572L189.593 21.3892L197.615 38.7815H200.867C200.975 38.7815 189.593 15.1777 189.593 15.1777Z",fill:"white"}))),r.createElement("div",{className:"auth-content-wrapper"},r.createElement("div",{className:"auth-form"},r.createElement("div",{className:"verbiage"},r.createElement("h1",null,Object(w.b)("auth.messages.signIn")),r.createElement("p",null,"The world's best serverless database.")),r.createElement(_e,{onSuccess:function(){e.history.push(E.home.path)},onError:function(e){console.error(e);const t=e.requestResult?function(e){switch(e){case 401:return Object(w.b)("auth.errors.invalidSecret");default:return Object(w.b)("auth.errors.default")}}(e.requestResult.statusCode):Object(w.b)("auth.errors.noConnection");var a;a=t,c(!0),i(a)}}),r.createElement("p",{className:"need-help"},Object(w.b)("auth.messages.needHelp"),"\xa0",r.createElement(L.a,{to:"#"},Object(w.b)("auth.messages.contactUs"),".")))),r.createElement("footer",{className:"auth-footer"},r.createElement("svg",{viewBox:"0 0 19 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M1.90219 8.46692L0 0L11.7192 9.15284L13.7089 6.62349L16.2451 6.13048L19 5.59459L16.2451 9.75303V15.3476L2.14269 23L6.01266 16.9338L9.64212 14.7474L5.85961 15.6263L2.60184 10.2246L9.35788 12.0466",fill:"#ffffff"})),r.createElement("small",null,Object(w.b)("footer.copyright",[(new Date).getFullYear().toString()])))))}var Ne=a(315),Ce=a.n(Ne),Se={local:je,github:e=>({login:t=>i.a.post("".concat(e.url,"/login/github"),t).then(({data:e})=>({data:e,strategy:"github"}))}),emailAndPassword:J};function qe(e){const t=e.match.params.strategyName,a=Se[t||"emailAndPassword"],n=S.a.parse(e.location.search),l=Object(r.useState)({header:Object(w.b)("auth.messages.checking"),text:Object(w.b)("auth.messages.waitingRedirect"),command:null}),s=Object(f.a)(l,2),o=s[0],m=s[1];if(Object(r.useEffect)(()=>{const t=e=>{const t=n.state,a=e.data.secret;((e,t)=>i.a.get("".concat(String("http://localhost:8086"),"/github_login?state=").concat(e,"&secret=").concat(t)))(t,a).then(()=>{m({header:Object(w.b)("auth.messages.shellLoginComplete"),text:Object(w.b)("auth.messages.closeWindow")}),setTimeout(window.close,5e3)}).catch(()=>{const e='fauna add-endpoint https://db.fauna.com/ --alias=cloud --key="'.concat(a,'"');m({header:Object(w.b)("auth.messages.actionRequired"),text:Object(w.b)("auth.messages.addEndpointManually"),command:e})})};M(a,n).then(a=>{n.state&&n.state.match(/^fauna-shell:(.*)$/)?t(a):(ie.f({urlString:String("https://db.fauna.com:443"),secret:a.data.secret}),e.history.push(E.home.path))}).catch(()=>{e.history.push(E.auth.signIn.path)})},[e.history,n,a]),!t)throw new Error("You should provide a strategy name param");return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"auth-content auth-splash"},c.a.createElement("div",{className:"auth-loader text-center"},c.a.createElement(y,{mode:"fab",name:"github",className:"auth-icon"}),c.a.createElement("h1",{className:"bold"},o.header),c.a.createElement("p",null,o.text),o.command&&c.a.createElement("p",{style:{"background-color":"grey"}},"$ ",o.command)),c.a.createElement("footer",{className:"auth-footer"},c.a.createElement("img",{alt:"Fauna logo",src:Ce.a}),Object(w.b)("footer.copyright",[(new Date).getFullYear().toString()]))))}function xe({location:e,history:t}){const a=S.a.parse(e.search),n=a.credentials,c=a.provider_name,l=a.error_code,s=a.first_session;return Object(r.useEffect)(()=>{if(l)return void t.push("".concat(E.auth.signIn.path).concat(e.search));const a=JSON.parse(window.atob(n));Q({data:a,strategy:"oauth",provider:c}),ie.f({urlString:"https://db.fauna.com:443",secret:a.secret}),t.push("".concat(E.home.path).concat(s?"?first_session=true":""))},[n,l,s,t,e.search,c]),null}var ke=a(428),Ie=a.n(ke);let Pe={scale:[],mode:"lch",error:null,warning:null,default:null,gray:null};function Te(e){return Ie.a.scale(Pe.scale).mode(Pe.mode).colors(e)}function De(e){return Pe[e]}var Re=a(16),Le=a.n(Re),Ae=a(17);var Fe=Le.a.mark(Ve),Ue=Le.a.mark(He),Be=Le.a.mark(We);function Me({timeseries:e=!1,days:t,onComplete:a}){return{type:e?"USAGE_TIMESERIES_FETCH_REQUESTED":"USAGE_FETCH_REQUESTED",payload:{days:t,onComplete:a}}}function Ve(){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ae.takeEvery)("USAGE_FETCH_REQUESTED",He);case 2:return e.next=4,Object(Ae.takeEvery)("USAGE_TIMESERIES_FETCH_REQUESTED",We);case 4:case"end":return e.stop()}}),Fe)}function He({payload:e}){var t;return Le.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(Ae.call)(ie.Q,{days:e.days});case 3:if(t=a.sent,!e.onComplete){a.next=7;break}return a.next=7,Object(Ae.call)(e.onComplete);case 7:if(!t){a.next=10;break}return a.next=10,Object(Ae.put)({type:"USAGE_FETCH_SUCCEEDED",payload:{usageByDatabase:t,days:e.days}});case 10:a.next=16;break;case 12:return a.prev=12,a.t0=a.catch(0),a.next=16,Object(Ae.put)({type:"USAGE_FETCH_FAILED",payload:{message:a.t0.message}});case 16:case"end":return a.stop()}}),Ue,null,[[0,12]])}function We({payload:e}){var t;return Le.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(Ae.call)(ie.R,{days:e.days});case 3:if(t=a.sent,!e.onComplete){a.next=7;break}return a.next=7,Object(Ae.call)(e.onComplete);case 7:return a.next=9,Object(Ae.put)({type:"USAGE_TIMESERIES_FETCH_SUCCEEDED",payload:{usages:t,days:e.days}});case 9:a.next=15;break;case 11:return a.prev=11,a.t0=a.catch(0),a.next=15,Object(Ae.put)({type:"USAGE_TIMESERIES_FETCH_FAILED",payload:{message:a.t0.message}});case 15:case"end":return a.stop()}}),Be,null,[[0,11]])}const Ge={regular:{},timeseries:{}};function Qe(e){let t=Object(b.a)({},{read_ops:0,data_transferred:0,write_ops:0,versions:0,indexes:0},{},e);return e.aggregate&&(t=Object(b.a)({},t,{aggregate:Qe(e.aggregate)})),t}function ze(e){const t=Qe(e);return t.versions+t.indexes}var Ye=a(41),Ke=a.n(Ye),Je=a(246);const $e={decimalCases:2};function Ze(e,t=$e){return e?e.toLocaleString(void 0,{minimumFractionDigits:t.decimalCases,maximumFractionDigits:t.decimalCases}):"--"}const Xe=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];function et(e){if(!e||0===e)return"0 ".concat(Xe[0]);const t=Math.floor(Math.log(e)/Math.log(1024)),a=Xe[t],n=0===t?0:2,r=Ze(tt(e,a),{decimalCases:n});return"".concat(r," ").concat(a)}function tt(e,t){if(!Xe.includes(t))throw new Error('Invalid size "'.concat(t,'". Size should be [').concat(Xe.join(", "),"]."));const a=Xe.indexOf(t);return e/Math.pow(1024,a)}function at({colors:e,histogramType:t,usage:a,databases:n,range:r,label:l}){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"chart chart-pie"},c.a.createElement("div",{className:"chart-wrapper"},function(){const r=Object.keys(a||{}).length>0,s=function(e,t,a,n){return{read:()=>({chartData:e.map((e,t)=>({id:e.database,label:e.database,value:e.read_ops,color:a[t]})),total:Ke.a.sumBy(e,"read_ops").toLocaleString(),format:e=>Ze(e,{decimalCases:0})}),write:()=>({chartData:e.map((e,t)=>({id:e.database,label:e.database,value:e.write_ops,color:a[t]})),total:Ke.a.sumBy(e,"write_ops").toLocaleString(),format:e=>Ze(e,{decimalCases:0})}),transfer:()=>({chartData:e.map((e,t)=>({id:e.database,label:e.database,value:e.data_transferred,color:a[t]})),total:Ke.a.sumBy(e,"data_transferred"),format:et}),storage:()=>({chartData:e.map((e,t)=>({id:e.database,label:e.database,value:ze(e),color:a[t]})),total:Ke.a.sumBy(e,e=>ze(e)),format:et})}[n]()}(n.map(e=>Object(b.a)({},{read_ops:0,data_transferred:0,write_ops:0,versions:0,indexes:0},{database:e.id},a?a[e.id]:{})),0,e,t);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"chart-title"},c.a.createElement("div",null,c.a.createElement("b",null,l),c.a.createElement("br",null),c.a.createElement("small",null,s.format(s.total)," total"))),r||s.total>0?c.a.createElement(Je.ResponsivePie,{data:s.chartData,innerRadius:.8,padAngle:0,cornerRadius:0,colors:e,colorBy:"label",borderWidth:0,enableRadialLabels:!1,enableSlicesLabels:!1,animate:!0,motionStiffness:90,motionDamping:15,tooltipFormat:s.format}):c.a.createElement(Je.ResponsivePie,{data:[{id:"empty",value:100}],innerRadius:.8,padAngle:0,cornerRadius:0,colors:[De("gray")],colorBy:"label",borderWidth:0,enableRadialLabels:!1,enableSlicesLabels:!1,animate:!0,motionStiffness:90,motionDamping:15,tooltip:()=>"Total: 0"}))}())))}var nt=a(320);class rt extends c.a.Component{constructor(...e){super(...e),this.state={open:!1},this.handleClickOutside=()=>{this.setState({open:!1})},this.toggleDropdown=()=>{this.setState({open:!this.state.open})},this.handleItemClick=e=>{this.props.onChange(e),this.toggleDropdown()},this.currentValue=()=>{const e=this.props,t=e.items,a=e.value;let n=t.find(e=>e.value===a);return n||(n=t[0]),n}}render(){const e=this.props,t=e.items,a=e.value,n=e.position,r=e.size,l=e.button,s=this.currentValue(),o=t.filter(e=>e.value!==a);return c.a.createElement("div",{className:"\n          dropdown\n          dropdown-".concat(String(n),"\n          dropdown-").concat(String(r),"\n          ").concat(String(this.state.open&&"active"),"\n          ").concat(String(this.props.button&&"dropdown-button"),"\n        ")},l?c.a.createElement(v.a,{color:"primary",type:"button",onClick:this.toggleDropdown},this.renderDropdownLabel(s)):c.a.createElement("div",{className:"dropdown-value",onClick:this.toggleDropdown},this.renderDropdownLabel(s)),c.a.createElement("div",{className:"dropdown-items"},o.map(e=>c.a.createElement("div",{key:e.value,className:"dropdown-item",onClick:this.handleItemClick.bind(this,e.value)},e.label))))}renderDropdownLabel(e){return c.a.createElement(c.a.Fragment,null,e&&String(e.label),c.a.createElement(y,{wrapperClassName:"dropdown-chevron margin-left-1",name:"chevron-down"}))}}rt.defaultProps={position:"left",button:!1};var ct=Object(nt.a)(rt);function lt({value:e,onChange:t}){return c.a.createElement(ct,{size:"sm",position:"right",items:[{value:7,label:Object(w.b)("period.last7Days")},{value:30,label:Object(w.b)("period.last30Days")}],value:e,onChange:t})}var st=a(49);const ot={md:{width:32,height:32}};var it=({size:e="md"})=>c.a.createElement("svg",Object.assign({},ot[e],{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"}),c.a.createElement("circle",{cx:"50",cy:"50",fill:"none","ng-attr-stroke":"{{config.color}}","ng-attr-stroke-width":"{{config.width}}","ng-attr-r":"{{config.radius}}","ng-attr-stroke-dasharray":"{{config.dasharray}}",stroke:"#6474af",strokeWidth:"10",r:"35",strokeDasharray:"164.93361431346415 56.97787143782138"},c.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 50;360 50 50",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}))),mt=a(37),ut=a.n(mt);a(546);let dt={};const pt=e=>{let t=dt[e];return void 0===t&&(bt(e),t=!1),{isEnabled:()=>t}},bt=e=>{const t=Object.keys(dt);console.warn("".concat(e," is not a valid feature. ")+"The available features are ".concat(t.join(", "),"."))};var ht=a(45);const Et=r.useState;function ft({databasePath:e,usage:t,title:a,onChangeRange:n,range:c}){const l=Object(d.h)(),s=Object(ht.a)([e,"databases"],()=>(ie.I(e),ie.p())).data,o=Et("read"),i=Object(f.a)(o,2),m=i[0],u=i[1],p=s&&s.length>0,b=e||"",h=pt("usage").isEnabled();function g(t){return e?"".concat(e,"/").concat(t.id):t.id}function v(){return[{value:"read",label:Object(w.b)("usage.ops.read")},{value:"write",label:Object(w.b)("usage.ops.write")},{value:"transfer",label:Object(w.b)("usage.ops.transfer")},{value:"storage",label:Object(w.b)("usage.ops.storage")}]}function O(){const e=Te(s.length),a=v().find(e=>e.value===m);return r.createElement("div",{className:"grid card-body"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col width-small-30 width-medium-25"},h&&r.createElement(ct,{items:v(),value:m,onChange:u}),r.createElement("div",{className:"card-body"},r.createElement("div",{className:"width-100"},r.createElement(at,{histogramType:m,range:c,databases:s,colors:e,usage:t,label:a?a.label:""})))),r.createElement("div",{className:"scrollList col width-small-70 width-medium-75"},r.createElement("table",{className:"table-card table-fixed databasesTable"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{className:"dbNameColumn width-30"},Object(w.b)("attributes.name")),h&&r.createElement(r.Fragment,null,r.createElement("th",{className:_("read")},Object(w.b)("usage.ops.read"),r.createElement(ut.a,{arrowFill:"transparent",placement:"bottom"},r.createElement(y,{className:"secondary",name:"question-circle"}),r.createElement("div",{className:"popover-content"},r.createElement("p",null,"The console itself makes a small number of read operations (e.g., while an index is building)."," ",r.createElement("a",{href:"".concat(String("https://app.fauna.com"),"/billing/upgrade")},"Learn more about pricing."))))),r.createElement("th",{className:_("write")},Object(w.b)("usage.ops.write"),r.createElement(ut.a,{arrowFill:"transparent",placement:"bottom"},r.createElement(y,{className:"secondary",name:"question-circle"}),r.createElement("div",{className:"popover-content"},r.createElement("p",null,"The console itself makes a small number of read operations (e.g., when you create a database, class, or document)."," ",r.createElement("a",{href:"".concat(String("https://app.fauna.com"),"/billing/upgrade")},"Learn more about pricing."))))),r.createElement("th",{className:_("storage")},Object(w.b)("usage.ops.storage"),r.createElement(ut.a,{arrowFill:"transparent",placement:"bottom"},r.createElement(y,{className:"secondary",name:"question-circle"}),r.createElement("div",{className:"popover-content"},r.createElement("p",null,"Persistent space on disk consumed."," ",r.createElement("a",{href:"".concat(String("https://app.fauna.com"),"/billing/upgrade")},"Learn more about pricing."))))),r.createElement("th",{className:_("transfer")},Object(w.b)("usage.ops.transfer"),r.createElement(ut.a,{arrowFill:"transparent",placement:"bottom"},r.createElement(y,{className:"secondary",name:"question-circle"}),r.createElement("div",{className:"popover-content"},r.createElement("p",null,"Outbound transfer of data between Cloud providers. Inbound data transfer is free. Data transfer to same region is free. Distinct from Read and Write Operations.",r.createElement("a",{href:"".concat(String("https://app.fauna.com"),"/billing/upgrade")},"Learn more about pricing.")))))))),r.createElement("tbody",null,s.map((a,n)=>{const c=g(a),s=t&&t[c]?t[c]:{read_ops:0,data_transferred:0,write_ops:0,versions:0,indexes:0};return r.createElement("tr",{className:"tr-link",onClick:()=>function(e){l.push(function(e){return"/db/".concat(g(e))}(e))}(a),key:a.id},r.createElement("td",{className:"dbNameColumn",style:{borderLeftColor:e[n]},"data-hj-suppress":!0},r.createElement("span",{className:"mobile-only"},Object(w.b)("database.name")),r.createElement("span",{className:"text-ellipsis","data-hj-suppress":!0},a.id)),h&&r.createElement(r.Fragment,null,r.createElement("td",null,r.createElement("span",{className:"mobile-only"},Object(w.b)("usage.ops.read")),r.createElement("span",{className:_("read")},Ze(s.read_ops,{decimalCases:0}))),r.createElement("td",null,r.createElement("span",{className:"mobile-only"},Object(w.b)("usage.ops.write")),r.createElement("span",{className:_("write")},Ze(s.write_ops,{decimalCases:0}))),r.createElement("td",null,r.createElement("span",{className:"mobile-only"},Object(w.b)("usage.ops.storage")),r.createElement("span",{className:_("storage")},j(ze(s)))),r.createElement("td",null,r.createElement("span",{className:"mobile-only"},Object(w.b)("usage.ops.transfer")),r.createElement("span",{className:_("transfer")},j(s.data_transferred)))))}))))))}function j(e){if(!e)return Ze(e);const t=et(e).split(" "),a=Object(f.a)(t,2),n=a[0],c=a[1];return r.createElement(r.Fragment,null,n," ",r.createElement("small",{className:"muted"},c))}function _(e){return"\n      ".concat("dbUsageColumn text-right ","\n      ").concat(e===m?"selected":"","\n    ")}return r.createElement("section",{className:"card"},r.createElement("div",{className:"card-header"},r.createElement("h4",null,a),r.createElement(L.a,{to:E.db.new.path.replace(":dbPath*",b),className:"btn btn-subtle-link"},r.createElement("span",{className:"fas fa-database"}),Object(w.b)("database.actions.new")),h&&function(){if(p)return r.createElement(lt,{value:c,onChange:n})}()),s?p?O():function(){const t=["btn"];return t.push(e?"btn-primary":"btn-success"),e?r.createElement("div",{className:"well well--muted"},r.createElement("div",null,"Each database can have unlimited child databases to accommodate an unlimited number of tenants, each with their own security models. Learn more about multitenancy"," ",r.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.fauna.com/fauna/current/tutorials/multitenant"},"in our docs"),".")):r.createElement(st.b,{centered:!0,shadow:!0,title:Object(w.b)("database.empty.create"),icon:r.createElement(y,{name:"database"}),action:r.createElement(L.a,{to:E.db.new.path.replace(":dbPath*",b),className:t.join(" ")},r.createElement("span",{className:"fas fa-database"}),Object(w.b)("database.actions.new"))})}():r.createElement("div",{className:"card-body center"},r.createElement("div",{className:"scrollList center"},r.createElement(it,null))))}var gt=a(183),yt=a.n(gt);function vt({billing:e,onRangeChange:t,rangeValue:a}){const n=Te(4),r=e?Object.keys(e):[],l=function(){if(!e)return;return r.reduce((t,a)=>t+e[a].amount,0)}(),s=0===l,o=s?[{id:"noAmount",label:"Total",value:1,color:De("gray")}]:function(){if(!e)return;return r.map((t,a)=>({id:t,label:Object(w.b)("billing.".concat(t)),value:e[t].amount,color:n[a]}))}(),i=yt()(),m=[{value:7,label:Object(w.b)("period.last7Days")},{value:30,label:Object(w.b)("period.last30Days")},{value:i.format("YYYY-MM"),label:"This billing period"},{value:i.subtract(1,"months").format("YYYY-MM"),label:"Last billing period"}];function u(e){return e?"$".concat((e/100).toFixed(2)):"$0"}return c.a.createElement("div",{className:"card card-sm card-flex"},c.a.createElement("div",{className:"card-header"},c.a.createElement("b",null,"Usage Breakdown"),c.a.createElement("div",{className:"margin-left-auto display-none display-small-block"},c.a.createElement(ct,{size:"sm",position:"right",items:m,value:a,onChange:t}))),c.a.createElement("div",{className:"card-body"},e?c.a.createElement("div",{className:"grid"},c.a.createElement("div",{className:"row center"},c.a.createElement("div",{className:"col width-50"},c.a.createElement("div",{className:"chart chart-pie"},c.a.createElement("div",{className:"chart-wrapper"},c.a.createElement("div",{className:"chart-title chart-title-big"},u(l)),c.a.createElement(Je.ResponsivePie,{data:o,innerRadius:.8,padAngle:0,cornerRadius:0,colors:s?[De("gray")]:n,colorBy:"label",borderWidth:0,enableRadialLabels:!1,enableSlicesLabels:!1,animate:!0,motionStiffness:90,motionDamping:15,tooltipFormat:e=>u(e)})))),c.a.createElement("div",{className:"col width-50"},c.a.createElement("ul",{className:"list list-topics"},r.map((t,a)=>c.a.createElement("li",{key:t},c.a.createElement("span",{className:"badge",style:{backgroundColor:n[a]}}),Object(w.b)("billing.".concat(t))," (",u(e[t].amount),")")))))):c.a.createElement("div",{className:"min-height-100 center width-100"},c.a.createElement(it,null))))}var Ot=a(654);function jt({data:e,keys:t,colors:a,legends:n,format:r,legendAxisLeft:l}){return c.a.createElement("div",{className:"chart"},c.a.createElement("div",{className:"chart-wrapper ".concat(t.length>1?"chart-wrapper-compact":"")},c.a.createElement(Ot.a,{data:e,keys:t,indexBy:"date",margin:{top:4,right:0,bottom:50,left:80},padding:.3,colors:a,borderColor:"inherit:darker(1.6)",axisBottom:{tickSize:5,tickPadding:10,tickRotation:-45,tickValues:_t(e),legend:"",legendPosition:"middle",legendOffset:32},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:l,legendPosition:"middle",legendOffset:-40},enableLabel:!1,labelSkipWidth:12,labelSkipHeight:12,labelTextColor:"inherit:darker(1.6)",animate:!0,motionStiffness:90,motionDamping:15,legends:[],tooltipFormat:r})),t.length>1&&n&&c.a.createElement("div",{className:"chart-legends chart-legends-inline chart-legends-small"},t.map((e,t)=>c.a.createElement("div",{key:e,className:"chart-legend"},c.a.createElement("span",{className:"badge",style:{backgroundColor:a[t]}}),n[e]))))}function _t(e){return e.length>15?e.filter((e,t)=>t%2===1).map(e=>e.date):null}function wt({usage:e,range:t,onChangeRange:a,defaultHistogramType:n,loading:l}){const s=[{value:"readWrite",label:"".concat(Object(w.b)("usage.readWriteOperations"))},{value:"transfer",label:"".concat(Object(w.b)("usage.ops.transfer"))},{value:"storage",label:"".concat(Object(w.b)("usage.ops.storage"))}],o=Object(r.useState)(n),i=Object(f.a)(o,2),m=i[0],u=i[1];return c.a.createElement("div",{className:"card card-sm card-flex"},c.a.createElement("div",{className:"card-header"},c.a.createElement(ct,{items:s,value:m,onChange:u}),c.a.createElement("div",{className:"margin-left-auto display-none display-small-block"},c.a.createElement(lt,{value:t,onChange:a}))),c.a.createElement("div",{className:"card-body center"},function(){if(l||!e)return c.a.createElement(it,null);const t=function(e){return e.filter(e=>""===e.database)}(e);if(t&&0===t.length)return Object(w.b)("usage.empty");const a=function(e,t){return{readWrite:Nt,transfer:Ct,storage:St}[e](t)}(m,t);return c.a.createElement(jt,{colors:a.colors,data:a.data,keys:a.keys,legends:a.legends,format:a.format,legendAxisLeft:a.legendAxisLeft})}()))}function Nt(e){const t=Te(2),a=Ke.a.sumBy(e,e=>e.aggregate.write_ops),n=Ke.a.sumBy(e,e=>e.aggregate.read_ops);return{colors:t,keys:["write","read"],legends:{write:"".concat(Object(w.b)("usage.ops.write")," (").concat(a.toLocaleString(),")"),read:"".concat(Object(w.b)("usage.ops.read")," (").concat(n.toLocaleString(),")")},data:e.map((e,a)=>({date:qt(e.date),write:e.aggregate.write_ops,writeColor:t[0],read:e.aggregate.read_ops,readColor:t[1]})),format:e=>Ze(e,{decimalCases:0})}}function Ct(e){const t=Te(1),a=et(Math.max.apply(null,e.map(e=>Number(e.aggregate.data_transferred)))).split(" "),n=Object(f.a)(a,2)[1];return{colors:t,keys:["transfer"],legendAxisLeft:n,data:e.map((e,a)=>({date:qt(e.date),transfer:tt(e.aggregate.data_transferred,n),transferColor:t[0]})),format:e=>n===Xe[0]?Ze(e,{decimalCases:0}):Ze(e)}}function St(e){const t=Te(1),a=et(Math.max.apply(null,e.map(e=>Number(ze(e))))).split(" "),n=Object(f.a)(a,2)[1];return{colors:t,keys:["storage"],legendAxisLeft:n,data:e.map((e,a)=>({date:qt(e.date),storage:tt(ze(e.aggregate),n),storageColor:t[0]})),format:e=>n===Xe[0]?Ze(e,{decimalCases:0}):Ze(e)}}function qt(e){const t=yt()(e).format("L").split("/");return"".concat(t[0],"/").concat(t[1])}function xt(){return c.a.createElement("div",{className:"card card-sm"},c.a.createElement("div",{className:"card-header"},c.a.createElement("b",null,Object(w.b)("helpful.helpfulResources"))),c.a.createElement("div",{className:"card-body"},c.a.createElement("ul",{className:"list list-block"},c.a.createElement("li",null,c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"".concat(String("https://fauna.com"),"/blog/introducing-fauna-shell")},c.a.createElement("div",{className:"list-icon"},c.a.createElement(y,{name:"laptop-code"})),c.a.createElement("div",{className:"list-content"},c.a.createElement("div",{className:"list-title"},Object(w.b)("helpful.faunaShellQuickstart.title")),c.a.createElement("div",{className:"list-subtitle"},Object(w.b)("helpful.faunaShellQuickstart.subtitle"))))),c.a.createElement("li",null,c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.fauna.com/fauna/current/drivers/"},c.a.createElement("div",{className:"list-icon"},c.a.createElement(y,{name:"wrench"})),c.a.createElement("div",{className:"list-content"},c.a.createElement("div",{className:"list-title"},Object(w.b)("helpful.driversAndSdks.title")),c.a.createElement("div",{className:"list-subtitle"},Object(w.b)("helpful.driversAndSdks.subtitle"))))),c.a.createElement("li",null,c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.fauna.com/fauna/current/api/fql/functions/"},c.a.createElement("div",{className:"list-icon"},c.a.createElement(y,{name:"file-code"})),c.a.createElement("div",{className:"list-content"},c.a.createElement("div",{className:"list-title"},Object(w.b)("helpful.fqlApiReference.title")),c.a.createElement("div",{className:"list-subtitle"},Object(w.b)("helpful.fqlApiReference.subtitle"))))))))}function kt({children:e,tabs:t,divider:a,className:n,actions:c}){const l=a?"":"content-header--no-divider",s=n||"";return r.createElement("div",{className:"content-header ".concat(l," ").concat(s)},r.createElement("div",{className:"content-header__title"},e),r.createElement("div",{className:"content-header__actions"},c),r.createElement("div",{className:"content-header__tabs"},t))}wt.defaultProps={defaultHistogramType:"readWrite"},kt.defaultProps={divider:!0};var It=Object(m.b)(e=>({usage:e.usage}),{fetchUsage:Me})((function({match:e,fetchUsage:t,usage:a}){const n=e.params.dbPath,c=Object(r.useState)(!0),l=Object(f.a)(c,2),s=l[0],o=l[1],i=Object(r.useState)(7),m=Object(f.a)(i,2),u=m[0],d=m[1],p=Object(r.useState)(7),b=Object(f.a)(p,2),h=b[0],E=b[1],g=Object(r.useState)(7),y=Object(f.a)(g,2),v=y[0],O=y[1],j=Object(r.useState)(null),_=Object(f.a)(j,2),N=_[0],C=_[1];return Object(r.useEffect)(()=>{document.title=Object(w.b)("database.home")+" - Fauna"},[]),Object(r.useEffect)(()=>{t({days:h})},[t,h]),Object(r.useEffect)(()=>{t({days:u,timeseries:!0,onComplete:()=>o(!1)})},[t,u]),Object(r.useEffect)(()=>{let e;C(null),e="number"===typeof v?ie.b({mode:"preview",days:v}):ie.b({mode:"monthly",period:v}),e.then(e=>{e&&C(e.billing)})},[v]),r.createElement(r.Fragment,null,r.createElement(kt,{divider:!1,className:"margin-bottom-4 margin-bottom-small-none"},Object(w.b)("database.home")),r.createElement(ft,{title:Object(w.b)("database.plural"),databasePath:n,usage:a.regular[h],range:h,onChangeRange:E}),r.createElement("div",{className:"moduleRow"},r.createElement(vt,{rangeValue:v,onRangeChange:O,billing:N}),r.createElement(wt,{range:u,onChangeRange:d,usage:a.timeseries[u],loading:s}),r.createElement(xt,null)))})),Pt=a(42);const Tt={name:"database",plural:"databases",namespace:"databasePath"},Dt=Object(Pt.d)(Tt),Rt=Object(Pt.a)(Dt),Lt=Object(Pt.b)(Dt,Tt,{fetch:function(e,t){const a=t.payload[Tt.name];if(a){const n=e[t.payload[Tt.namespace]],r=a.ts,c=a.name,l=a.data;n.ts=r,n.name=c,n.data=l}else console.error("Unexpected missing db record",t,e)},fetchList:function(e,t){e[t.payload[Tt.namespace]]||(e[t.payload[Tt.namespace]]={});e[t.payload[Tt.namespace]].children=t.payload[Tt.plural]},create:function(e,t){const a=t.payload[Tt.namespace];e[a]||(e[a]={});e[a].children||(e[a].children=[]);e[a].children.unshift(t.payload[Tt.name])}}),At=Object(Pt.c)(Dt,Rt,{fetch:e=>ie.o(e),fetchList:e=>ie.p(),create:e=>ie.i(e),update:e=>ie.L(e),remove:e=>ie.B(e)},Tt);const Ft=(e,t)=>{if(e.databases[t]&&e.databases[t].ts){return e.databases[t]}},Ut=e=>{if(e){const t=e.split("/");return t[t.length-1].toString()}},Bt=e=>{if(e){const t=e.split("/");e=1===t.length?void 0:Ke.a.dropRight(t).join("/")}return e},Mt={name:"class",plural:"classes",namespace:"databasePath"},Vt=Object(Pt.d)(Mt),Ht=Object(Pt.a)(Vt),Wt=Object(Pt.b)(Vt,Mt),Gt=Object(Pt.c)(Vt,Ht,{fetchList:e=>ie.d(),create:e=>ie.h(e),update:e=>ie.K(e),remove:e=>ie.A(e)},Mt),Qt=(e,t)=>{const a=e.classes[t];return a?a.slice().sort((e,t)=>e.name.localeCompare(t.name)):a},zt=(e,t,a)=>{const n=Qt(e,t);return n?n.find(e=>e.name===a):n};var Yt=a(3);const Kt={name:"index",plural:"indexes",namespace:"databasePath"},Jt=Object(Pt.d)(Kt),$t=Object(Pt.a)(Jt),Zt=Object(Pt.b)(Jt,Kt),Xt=Object(Pt.c)(Jt,$t,{fetchList:e=>ie.y(),create:e=>ie.l(e),update:e=>ie.O(e.ref,e.data),remove:e=>ie.D(e.index.ref)},Kt);const ea=(e,t)=>{const a=e.indexes[t];return a?a.slice().sort((e,t)=>e.name.localeCompare(t.name)):a},ta=(e,t,a)=>{const n=ea(t,a);if(n)return n.find(t=>t.name===e)},aa=e=>{const t=!e.values||0===e.values.length,a=!e.terms||0===e.terms.length;return t&&a},na=e=>Array.isArray(e.source)?e.source.map(e=>e.id).join(", "):e.source instanceof Yt.values.Ref?e.source.id:e.source.collection.id,ra=e=>e.field?Array.isArray(e.field)?e.field.join("."):e.field:e.binding;function ca({classes:e,displayAction:t,muted:a,databasePath:n,description:c,classEmptyMessage:l}){return e&&0===e.length?r.createElement(st.b,{muted:a,shadow:!0,title:l||Object(w.b)("index.empty.class_"),icon:r.createElement(y,{name:"arrow-circle-left"}),description:c&&r.createElement("div",{className:"container container--small"},r.createElement("p",null,Object(w.b)("index.messages.classEmpty")))}):r.createElement(st.b,{shadow:!0,title:Object(w.b)("index.empty.title"),icon:r.createElement(y,{name:"list"}),action:r.createElement(L.a,{className:"btn btn-success",to:E.indexes.new.path.replace(":dbPath*",n)},Object(w.b)("index.actions.new")),description:c&&r.createElement("div",{className:"container container--small"},r.createElement("p",null,Object(w.b)("index.messages.empty")))})}function la({displayDescription:e,databasePath:t}){const a=E.classes.new.path.replace(":dbPath*",t);return r.createElement(st.b,{shadow:!0,title:Object(w.b)("class_.empty.title"),icon:r.createElement(y,{name:"table"}),description:e&&r.createElement("div",{className:"container container--small"},r.createElement("p",null,Object(w.b)("class_.messages.empty"))),action:r.createElement(L.a,{to:a,className:"btn btn-success"},Object(w.b)("class_.actions.new"))})}ca.defaultProps={description:!0},la.defaultProps={displayDescription:!0};const sa=r.useEffect;function oa({fetchListClasses:e,databasePath:t,classes:a,selectedClasses:n,shouldFetch:c,border:l}){function s(e){return E.classes.byId.path.replace(":classId",e.name).replace(":dbPath*",t)}function o(e){return n.includes(e.name)}return sa(()=>{c&&e({databasePath:t})},[t,e,c]),r.createElement(r.Fragment,null,!a&&r.createElement("div",{className:"card-body center"},Object(w.b)("loading.loading")),a&&0===a.length&&r.createElement(la,{databasePath:t}),a&&a.length>0&&r.createElement("div",{className:"scrollList"},r.createElement("table",{className:"table-card no-table-labels ".concat(l?"":"table--no-border")},r.createElement("tbody",null,a.map(e=>r.createElement("tr",{key:e.name,className:"".concat(o(e)?"selected":"")},r.createElement("td",null,r.createElement("div",null,r.createElement(L.a,{to:s(e),"data-hj-suppress":!0},e.name)))))))))}oa.defaultProps={selectedClasses:[],shouldFetch:!0,border:!0};const ia={fetchListClasses:Ht.fetchList};var ma=Object(m.b)((e,t)=>({classes:Qt(e,t.databasePath)}),ia)(oa);function ua({match:e,crumbs:t,history:a}){const n=e.params.dbPath;const r=(t=function(){const e={label:"Console Home",path:pt("enterprise").isEnabled()?"/db":"/"},a=function(){if(!n)return;const e=n.split("/");let t="/db";return e.map(e=>{const a="".concat(t,"/").concat(e);return t=a,{label:e,path:a}})}();return a?[e,...a,...t]:[e,...t]}())[t.length-2];return c.a.createElement("div",{id:"breadcrumbs"},r&&c.a.createElement(v.a,{onClick:()=>a.push(r.path)},c.a.createElement(y,{name:"arrow-left"})),c.a.createElement("ul",{className:"crumbs"},t.map(e=>c.a.createElement("li",{key:e.label},c.a.createElement(L.a,{to:e.path,"data-hj-suppress":!0},e.label)))))}ua.defaultProps={crumbs:[]};var da=Object(d.k)(ua),pa=a(100);var ba=e=>t=>function(a){const n=e&&e(a,E);return r.createElement("div",{className:"breadcrumb-wrapper"},r.createElement(pa.Plug,{outletId:"breadcrumb"},r.createElement(ha,{crumbs:n})),r.createElement(t,a))},ha=da;const Ea={fetchListClasses:Ht.fetchList,fetchListIndexes:$t.fetchList,fetchUsage:Me};var fa=Object(m.b)((e,t)=>{const a=t.match.params.dbPath;return{classes:Qt(e,a),indexes:ea(e,a),usage:e.usage}},Ea)(ba()((function({classes:e,indexes:t,fetchListClasses:a,fetchListIndexes:n,match:l,showModal:s,fetchUsage:o,usage:i}){const m=Object(r.useState)(7),u=Object(f.a)(m,2),d=u[0],p=u[1],b=l.params.dbPath,h=Ut(b),g=pt("usage").isEnabled();return Object(r.useEffect)(()=>{a({databasePath:b})},[b,a]),Object(r.useEffect)(()=>{n({databasePath:b})},[b,n]),Object(r.useEffect)(()=>{document.title=(h||Object(w.b)("database.home"))+" - Fauna"},[h]),Object(r.useEffect)(()=>{g&&o({days:d})},[d,o,g]),c.a.createElement(c.a.Fragment,null,c.a.createElement(kt,{className:"margin-bottom-4 margin-bottom-small-none",divider:!1},h||Object(w.b)("database.home"),h&&c.a.createElement("div",{className:"content-header__links"},c.a.createElement(L.a,{className:"btn btn-subtle-link",to:E.db.edit.path.replace(":dbPath*",b)},c.a.createElement(y,{name:"cog"}),"Settings"))),c.a.createElement("div",{className:"padding-top-sm-3"},!h&&!pt("enterprise").isEnabled()&&c.a.createElement("p",{className:"danger"},Object(w.b)("deprecations.root")),c.a.createElement("div",{className:"grid"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("section",{className:"card card-flex stretch"},c.a.createElement("div",{className:"card-header"},c.a.createElement("h4",null,Object(w.b)("class_.plural")),e&&e.length>0&&c.a.createElement(L.a,{to:E.classes.new.path.replace(":dbPath*",b),className:"btn btn-subtle-link"},c.a.createElement("span",{className:"fas fa-table"}),Object(w.b)("class_.actions.new"))),c.a.createElement(ma,{shouldFetch:!1,databasePath:b}))),c.a.createElement("div",{className:"col"},c.a.createElement("section",{className:"card card-flex stretch"},c.a.createElement("div",{className:"card-header"},c.a.createElement("h4",null,Object(w.b)("index.plural")),e&&e.length>0&&t&&t.length>0&&c.a.createElement(L.a,{className:"btn btn-subtle-link",to:E.indexes.new.path.replace(":dbPath*",b)},c.a.createElement("span",{className:"fas fa-list"}),Object(w.b)("index.actions.new"))),!t&&c.a.createElement("div",{className:"card-body center"},Object(w.b)("loading.loading")),t&&0===t.length&&c.a.createElement(ca,{muted:!0,classes:e,databasePath:b,classEmptyMessage:Object(w.b)("index.empty.secondaryClassTitle")}),t&&t.length>0&&function(e){return c.a.createElement("div",{className:"scrollList"},c.a.createElement("table",{className:"table-card no-table-labels"},c.a.createElement("tbody",null,e.map(e=>{return c.a.createElement("tr",{key:e.name},c.a.createElement("td",null,c.a.createElement("div",null,c.a.createElement(L.a,{to:(t=e.name,b?"/indexes/".concat(t,"/@db/").concat(l.params.dbPath):"/indexes/".concat(t)),"data-hj-suppress":!0},e.name))));var t}))))}(t))))),c.a.createElement("div",{className:"grid"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement(ft,{title:Object(w.b)("database.children.name"),databasePath:l.params.dbPath,usage:i.regular[d],range:d,onChangeRange:p}))))))})));const ga=r.createContext({activeTab:"",setActiveTab:()=>{}});function ya({children:e,activeTab:t,setActiveTab:a}){return r.createElement(ga.Provider,{value:{activeTab:t,setActiveTab:a}},e)}function va({position:e,children:t}){return r.createElement("ul",{className:"tabs tabs--".concat(String(e))},t)}function Oa({id:e,children:t}){return r.createElement(ga.Consumer,null,({activeTab:a,setActiveTab:n})=>{const c=["tabs__item"];return a===e&&c.push("tabs__item--active"),r.createElement("li",{className:c.join(" "),onClick:()=>n(e)},t)})}function ja({id:e,children:t}){return r.createElement(ga.Consumer,null,({activeTab:a,setActiveTab:n})=>{const c=a===e;return r.createElement("div",{className:c?"":"display-none"},t)})}const _a=c.a.lazy(()=>Promise.all([a.e(1),a.e(7)]).then(a.bind(null,1177)));function wa(e){return c.a.createElement(r.Suspense,{fallback:c.a.createElement(c.a.Fragment,null)},c.a.createElement(_a,e))}function Na({label:e,children:t}){const a=Object(r.useState)(!1),n=Object(f.a)(a,2),c=n[0],l=n[1],s=["toggle"];return c&&s.push("toggle--open"),r.createElement("div",{className:s.join(" ")},r.createElement("div",{className:"toggle__label",onClick:()=>l(!c)},r.createElement(y,{name:"angle-right"})," ",e),r.createElement("div",{className:"toggle__content"},t))}var Ca=a(1155);const Sa={START:"start",LIST:"list",WIZARD:"wizard",FINISH:"finish",RESUME:"resume"},qa=r.createContext({tutorials:[],position:{right:0,top:0},openTutorial:e=>{throw new Error("openTutorial() not implemented")},closeTutorial:()=>{throw new Error("closeTutorial() not implemented")},setPosition:e=>{throw new Error("setPosition() not implemented")},isTutorialOpen:!1}),xa=()=>r.useContext(qa);var ka=({tutorials:e,children:t})=>{const a=Object(r.useState)(),n=Object(f.a)(a,2),c=n[0],l=n[1],s=Object(r.useState)({right:0,top:0}),o=Object(f.a)(s,2),i=o[0],m=o[1],u=Object(Ca.a)({accept:"TUTORIAL",drop(e,t){const a=t.getDifferenceFromInitialOffset();m({right:Math.round(e.right-a.x),top:Math.round(e.top+a.y)})}}),d=Object(f.a)(u,2)[1],p=()=>l(void 0),b=e.find(e=>e.id===c),h=void 0!==c;return r.createElement(qa.Provider,{value:{openTutorial:e=>l(e),closeTutorial:p,tutorials:e,openedTutorialId:c,setPosition:m,position:i,isTutorialOpen:h}},r.createElement("div",{ref:d,className:"tutorial-provider"},b&&r.createElement(b.component,{title:b.title,id:c,onClose:p,position:i}),t))};function Ia({loading:e,onCancel:t,submitLabel:a,onSubmit:n,onFailure:l,initialValues:s,onDeleteClick:o,isEdit:i}){const m={demoDataIsEnabled:!1,name:s.name},u=(c.a.createRef(),ne(m)),d=u.formValues,p=u.handleChange,b=u.setFormValue,h=xa().isTutorialOpen;function E(){return{name:d.name}}return Object(r.useEffect)(()=>{h&&b("demoDataIsEnabled",!1)},[h]),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(E(),d.demoDataIsEnabled)}},c.a.createElement(ja,{id:"simple"},c.a.createElement("div",{className:"container container--xsmall"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"name",className:"required"},Object(w.b)("database.name")," ",Object(w.b)("attributes.name")," (cannot contain spaces)"),c.a.createElement("input",{onChange:p,value:d.name,id:"name",name:"name",type:"text",autoFocus:!0,required:!0})),!i&&c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"form-checkbox"},c.a.createElement("label",{htmlFor:"demoDataIsEnabled"},c.a.createElement("input",{disabled:Boolean(h),checked:d.demoDataIsEnabled,type:"checkbox",id:"demoDataIsEnabled",name:"demoDataIsEnabled",value:d.demoDataIsEnabled,onChange:p}),Object(w.b)("database.demo.label")),c.a.createElement(ut.a,{arrowFill:"transparent"},c.a.createElement(y,{className:"secondary",name:"question-circle"}),c.a.createElement("div",{className:"popover-content"},Object(w.b)("database.demo.info"))))))),c.a.createElement(ja,{id:"fql"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:""},Object(w.b)("attributes.faunaData")),c.a.createElement(wa,{code:E()}))),c.a.createElement("div",{className:"container container--xsmall"},c.a.createElement("div",{className:"form-actions"},c.a.createElement(v.a,{onClick:t,color:"secondary"},Object(w.b)("actions.cancel")),c.a.createElement(v.a,{type:"submit",color:"success",loading:e},Object(w.b)("actions.save"))),o&&c.a.createElement("div",{className:"container container--xsmall"},c.a.createElement("hr",{className:"margin-top-4 margin-bottom-3"}),c.a.createElement(_,{color:"muted",onClick:o,label:Object(w.b)("actions.remove"),icon:"trash"})),c.a.createElement("div",{className:"card card-flex card-feature margin-y-5"},c.a.createElement(Na,{label:"How to migrate schema from another database"},c.a.createElement("p",null,c.a.createElement(y,{name:"rocket"}),"\xa0\xa0",c.a.createElement("strong",null,"New experimental feature!")),c.a.createElement("p",null,"To quickly copy the definitions of your collections, indexes, and roles, try our new schema migration tool:"," ",c.a.createElement("a",{href:"https://github.com/fauna/faunadb-migrate"},"https://github.com/fauna/faunadb-migrate")),c.a.createElement("p",null,"Note: This tool only migrates your schema, not your data.")))))}Ia.defaultProps={loading:!1};function Pa(e){return{type:"SHOW_MODAL",payload:e}}function Ta(){return{type:"HIDE_MODAL"}}function Da(e=2500){return{type:"HIDE_MODAL_DELAY",payload:e}}var Ra=Object(m.b)((e,{match:t})=>({database:Ft(e,t.params.dbPath)}),Object(b.a)({updateDatabase:Rt.update,fetchDatabase:Rt.fetch,removeDatabase:Rt.remove},n))(ba(({location:e,match:t})=>[{label:Object(w.b)("actions.edit"),path:e.pathname}])((function({match:e,history:t,updateDatabase:a,fetchDatabase:n,database:l,removeDatabase:s,showModal:o,hideModal:i}){const m=e.params.dbPath,u=Bt(m),d=Object(r.useState)(!1),p=Object(f.a)(d,2),h=p[0],g=p[1],y=Object(r.useState)("simple"),v=Object(f.a)(y,2),O=v[0],j=v[1];return Object(r.useEffect)(()=>{n({databasePath:m})},[m,n]),c.a.createElement(ya,{activeTab:O,setActiveTab:j},c.a.createElement(kt,{tabs:c.a.createElement(va,{position:"right"},c.a.createElement(Oa,{id:"simple"},Object(w.b)("tabs.simple")),c.a.createElement(Oa,{id:"fql"},Object(w.b)("tabs.fql")))},Object(w.b)("database.name")," ",Object(w.b)("info.settings")),c.a.createElement("div",{className:"padding-y-3"},l?c.a.createElement(Ia,{loading:h,onCancel:t.goBack,onSubmit:function(e){l&&(g(!0),a({values:Object(b.a)({},e,{originalName:l.name}),parentPath:u,onComplete:()=>{t.push(E.db.byId.path.replace(":dbPath*",u?"".concat(u,"/").concat(e.name):e.name))}}))},onFailure:function(){j("simple")},initialValues:{name:l?l.name:""},onDeleteClick:function(){if(!l)return;o({content:Object(w.b)("database.messages.deleteConfirm",[l.name]),onOk:()=>{s({parentPath:u,name:l.name,onRemoveComplete:()=>{i();const e=u?E.db.byId.path.replace(":dbPath*",u):E.home.path;t.push(e)}})},onCancel:i,showOk:!0,showCancel:!0,okText:Object(w.b)("actions.remove"),cancelText:Object(w.b)("actions.cancel")})},isEdit:!0}):c.a.createElement(c.a.Fragment,null,Object(w.b)("loading.loading"))))})));const La={fetchDatabase:Rt.fetch};var Aa=Object(m.b)((e,{match:t})=>({database:Ft(e,t.params.dbPath)}),La)(ba(({location:e,match:t},a)=>[{label:"Settings",path:e.pathname}])((function({database:e,fetchDatabase:t,match:a}){const n=a.params.dbPath||"",l=Object(r.useState)("simple"),s=Object(f.a)(l,2),o=s[0],i=s[1];return Object(r.useEffect)(()=>{document.title="Database Settings - Fauna"},[]),Object(r.useEffect)(()=>{t({databasePath:n})},[n,t]),c.a.createElement(ya,{activeTab:o,setActiveTab:i},c.a.createElement(kt,{tabs:c.a.createElement(va,{position:"right"},c.a.createElement(Oa,{id:"simple"},Object(w.b)("tabs.simple")),c.a.createElement(Oa,{id:"fql"},Object(w.b)("tabs.fql")))},Object(w.b)("database.settings"),c.a.createElement(L.a,{className:"btn btn-subtle-link",to:E.db.edit.path.replace(":dbPath*",n)},c.a.createElement(y,{name:"cog"}),Object(w.b)("actions.edit"))),e&&c.a.createElement("div",{className:"padding-y-4"},c.a.createElement(ja,{id:"simple"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:""},Object(w.b)("database.name")," ",Object(w.b)("attributes.name")," (cannot contain spaces)"),c.a.createElement("p",{"data-hj-suppress":!0},e.name))),c.a.createElement(ja,{id:"fql"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:""},Object(w.b)("attributes.faunaData")),c.a.createElement(wa,{code:e})))))}))),Fa=a(47);function Ua(e,{secret:t,override:a}={}){let n="https://graphql.fauna.com/import";return a&&(n="".concat(n,"?mode=override")),i.a.post(n,e,{auth:{username:t,password:null},headers:{"content-type":"multipart/form-data"}})}Error;var Ba=a(660),Ma=a.n(Ba),Va=function(){var e=Object(Fa.a)(Le.a.mark((function e(t){var a;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ie.g(t),e.next=3,a.query(Yt.query.Do(Yt.query.CreateCollection({name:"storehouses"}),Yt.query.CreateCollection({name:"products"}),Yt.query.CreateCollection({name:"customers"}),Yt.query.CreateCollection({name:"orders"})));case 3:return e.next=5,a.query(Yt.query.CreateFunction({name:"submit_order",body:Yt.query.Query(Yt.query.Lambda(["customerId","products"],Yt.query.Let({customer:Yt.query.Get(Yt.query.Ref(Yt.query.Collection("customers"),Yt.query.Var("customerId"))),products:Yt.query.Map(Yt.query.Var("products"),Yt.query.Lambda("requestedProduct",Yt.query.Let({product:Yt.query.Get(Yt.query.Ref(Yt.query.Collection("products"),Yt.query.Select("productId",Yt.query.Var("requestedProduct"))))},{ref:Yt.query.Select("ref",Yt.query.Var("product")),price:Yt.query.Select(["data","price"],Yt.query.Var("product")),currentQuantity:Yt.query.Select(["data","quantity"],Yt.query.Var("product")),requestedQuantity:Yt.query.Select(["quantity"],Yt.query.Var("requestedProduct")),backorderLimit:Yt.query.Select(["data","backorderLimit"],Yt.query.Var("product"))})))},Yt.query.Do(Yt.query.Foreach(Yt.query.Var("products"),Yt.query.Lambda("product",Yt.query.If(Yt.query.LTE(Yt.query.Select("requestedQuantity",Yt.query.Var("product")),Yt.query.Select("currentQuantity",Yt.query.Var("product"))),Yt.query.Var("product"),Yt.query.Abort(Yt.query.Concat(["Stock quantity for Product [",Yt.query.Select(["ref","id"],Yt.query.Var("product")),"] not enough \u2013 requested at [",Yt.query.ToString(Yt.query.Time("now")),"]"]))))),Yt.query.Foreach(Yt.query.Var("products"),Yt.query.Lambda("product",Yt.query.Update(Yt.query.Select("ref",Yt.query.Var("product")),{data:{quantity:Yt.query.Subtract(Yt.query.Select("currentQuantity",Yt.query.Var("product")),Yt.query.Select("requestedQuantity",Yt.query.Var("product")))}}))),Yt.query.Foreach(Yt.query.Var("products"),Yt.query.Lambda("product",Yt.query.If(Yt.query.LTE(Yt.query.Subtract(Yt.query.Select("currentQuantity",Yt.query.Var("product")),Yt.query.Select("requestedQuantity",Yt.query.Var("product"))),Yt.query.Select("backorderLimit",Yt.query.Var("product"))),Yt.query.Update(Yt.query.Select("ref",Yt.query.Var("product")),{data:{backordered:!0}}),Yt.query.Var("product")))),Yt.query.Let({productsLine:Yt.query.Map(Yt.query.Var("products"),Yt.query.Lambda("product",{product:Yt.query.Select("ref",Yt.query.Var("product")),quantity:Yt.query.Select("requestedQuantity",Yt.query.Var("product")),price:Yt.query.Select("price",Yt.query.Var("product"))}))},Yt.query.Create(Yt.query.Collection("orders"),{data:{customer:Yt.query.Select("ref",Yt.query.Var("customer")),line:Yt.query.Var("productsLine"),status:"processing",creationDate:Yt.query.Time("now"),shipDate:null,shipAddress:Yt.query.Select(["data","address"],Yt.query.Var("customer")),creditCard:Yt.query.Select(["data","creditCard"],Yt.query.Var("customer"))}}))))))}));case 5:return e.next=7,a.query(Yt.query.Let({storehouse1:Yt.query.Create(Yt.query.Collection("storehouses"),{data:{name:"East",address:{street:"13 Pierstorff Drive",city:"Washington",state:"DC",zipCode:"20220"}}}),storehouse2:Yt.query.Create(Yt.query.Collection("storehouses"),{data:{name:"Central",address:{street:"7529 Melrose Circle",city:"Dallas",zipCode:"75205",state:"TX"}}}),storehouse3:Yt.query.Create(Yt.query.Collection("storehouses"),{data:{name:"Central",address:{street:"4 Elka Drive",city:"Tacoma",zipCode:"98424",state:"WA"}}})},Yt.query.Let({product1:Yt.query.Create(Yt.query.Collection("products"),{data:{name:"Cup",description:"Translucent 9 Oz",price:6.9,quantity:100,storehouse:Yt.query.Select("ref",Yt.query.Var("storehouse2")),backorderLimit:5,backordered:!1}}),product2:Yt.query.Create(Yt.query.Collection("products"),{data:{name:"Beef Cheek",description:"Fresh",price:5.28,quantity:100,storehouse:Yt.query.Select("ref",Yt.query.Var("storehouse3")),backorderLimit:10,backordered:!1}}),product3:Yt.query.Create(Yt.query.Collection("products"),{data:{name:"Pizza",description:"Frozen Cheese",price:4.07,quantity:100,storehouse:Yt.query.Select("ref",Yt.query.Var("storehouse1")),backorderLimit:15,backordered:!1}})},Yt.query.Let({customer1:Yt.query.Create(Yt.query.Collection("customers"),{data:{firstName:"Auria",lastName:"Osgardby",address:{street:"87856 Mendota Court",city:"Idaho Falls",state:"ID",zipCode:"83405"},telephone:"208-346-0715",creditCard:{network:"Visa",number:"4556781272473393"}}}),customer2:Yt.query.Create(Yt.query.Collection("customers"),{data:{firstName:"Skipper",lastName:"Scanes",address:{street:"72 Waxwing Terrace",city:"Colorado Springs",state:"CO",zipCode:"80925"},telephone:"719-872-8799",creditCard:{network:"Visa",number:"4916112310613672"}}}),customer3:Yt.query.Create(Yt.query.Collection("customers"),{data:{firstName:"Ardith",lastName:"Probert",address:{street:"5 Troy Trail",city:"Fairbanks",state:"AK",zipCode:"99790"},telephone:"907-949-4470",creditCard:{network:"Visa",number:"4532636730015542"}}})},Yt.query.Do(Yt.query.Create(Yt.query.Collection("orders"),{data:{customer:Yt.query.Select("ref",Yt.query.Var("customer1")),line:[{product:Yt.query.Select("ref",Yt.query.Var("product1")),quantity:10,price:Yt.query.Select(["data","price"],Yt.query.Var("product1"))},{product:Yt.query.Select("ref",Yt.query.Var("product2")),quantity:5,price:Yt.query.Select(["data","price"],Yt.query.Var("product2"))},{product:Yt.query.Select("ref",Yt.query.Var("product3")),quantity:20,price:Yt.query.Select(["data","price"],Yt.query.Var("product3"))}],status:"processing",creationDate:Yt.query.Time("now"),shipAddress:Yt.query.Select(["data","address"],Yt.query.Var("customer1")),creditCard:Yt.query.Select(["data","creditCard"],Yt.query.Var("customer1"))}}),Yt.query.Create(Yt.query.Collection("orders"),{data:{customer:Yt.query.Select("ref",Yt.query.Var("customer3")),line:[{product:Yt.query.Select("ref",Yt.query.Var("product1")),quantity:25,price:Yt.query.Select(["data","price"],Yt.query.Var("product1"))},{product:Yt.query.Select("ref",Yt.query.Var("product3")),quantity:10,price:Yt.query.Select(["data","price"],Yt.query.Var("product3"))}],status:"processing",creationDate:Yt.query.Time("now"),shipAddress:Yt.query.Select(["data","address"],Yt.query.Var("customer3")),creditCard:Yt.query.Select(["data","creditCard"],Yt.query.Var("customer3"))}}),Yt.query.Create(Yt.query.Collection("orders"),{data:{customer:Yt.query.Select("ref",Yt.query.Var("customer2")),line:[{product:Yt.query.Select("ref",Yt.query.Var("product3")),quantity:15,price:Yt.query.Select(["data","price"],Yt.query.Var("product3"))},{product:Yt.query.Select("ref",Yt.query.Var("product2")),quantity:45,price:Yt.query.Select(["data","price"],Yt.query.Var("product2"))}],status:"processing",creationDate:Yt.query.Time("now"),shipAddress:Yt.query.Select(["data","address"],Yt.query.Var("customer2")),creditCard:Yt.query.Select(["data","creditCard"],Yt.query.Var("customer2"))}}))))));case 7:if(!pt("graphql").isEnabled()){e.next=10;break}return e.next=10,fetch(Ma.a).then(e=>e.blob()).then(e=>Ua(e,{secret:a._secret}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();const Ha={name:"",demoDataIsEnabled:!1};var Wa=Object(m.b)(null,{createDatabase:Rt.create})(ba(({location:e})=>[{label:Object(w.b)("database.actions.new"),path:e.pathname}])((function({match:e,history:t,createDatabase:a}){const n=e.params.dbPath||"",l=Object(r.useState)("simple"),s=Object(f.a)(l,2),o=s[0],i=s[1],m=Object(r.useState)(!1),u=Object(f.a)(m,2),d=u[0],p=u[1];return Object(r.useEffect)(()=>{document.title="New Database - Fauna"},[]),c.a.createElement(ya,{activeTab:o,setActiveTab:i},c.a.createElement(kt,{tabs:c.a.createElement(va,{position:"right"},c.a.createElement(Oa,{id:"simple"},Object(w.b)("tabs.simple")),c.a.createElement(Oa,{id:"fql"},Object(w.b)("tabs.fql")))},Object(w.b)("database.actions.new")),c.a.createElement("div",{className:"padding-y-3"},c.a.createElement(Ia,{initialValues:Ha,onCancel:t.goBack,onSubmit:function(e,r){p(!0),a({values:e,hideAlert:!0,databasePath:n,parentPath:n,onComplete:function(){var a=Object(Fa.a)(Le.a.mark((function a(c,l){var s;return Le.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!l){a.next=3;break}return p(!1),a.abrupt("return");case 3:if(s=""===n?e.name:"".concat(n,"/").concat(e.name),!r){a.next=7;break}return a.next=7,Va(s);case 7:t.push(E.db.byId.path.replace(":dbPath*",s));case 8:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()})},loading:d})))}))),Ga=[{title:"Pull Latest Docker Image",description:c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"To get a docker image of FaunaDB, simply run:"),c.a.createElement(wa,{code:"$ docker pull fauna/faunadb:latest"}))},{title:"Usage",description:c.a.createElement(c.a.Fragment,null,c.a.createElement(wa,{code:"$ docker run fauna/faunadb --help\n    FaunaDB Enterprise Docker Image\n\n    Options:\n    --help               Print this message and exit.\n    --init               Initialize the node (default action).\n    --no-init            Doesn't initialize the node.\n    --join host[:port]   Join a cluster through an active node specified in host and port.\n    --config path        Specify a custom config file. Should be accessible inside the docker image."}),c.a.createElement("p",null,"If you are a developer and want a FaunaDB instance up and running, the simplest way to do it is by running:"),c.a.createElement(wa,{code:"$ docker run --rm --name faunadb -p 8443:8443 fauna/faunadb"}))},{title:"Persisted data",description:c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"The above command will start a FaunaDB instance and initialize the cluster. However, when you kill the docker container, all your data will be lost. In order to prevent this, you can map a volume to the folder ",c.a.createElement("code",null,"/var/lib/faunadb")," and all data stored in FaunaDB will be persisted between executions."),c.a.createElement(wa,{code:"$ docker run --rm --name faunadb -p 8443:8443\n    -v <host-directory or named-volume>:/var/lib/faunadb\n    fauna/faunadb"}))},{title:"FaunaDB logs",description:c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"To access the FaunaDB logs, you can also map a volume to the folder"," ",c.a.createElement("code",null,"/var/log/faunadb"),":"),c.a.createElement(wa,{code:"$ docker run --rm --name faunadb -p 8443:8443\n    -v <host-directory or named-volume>:/var/lib/faunadb\n    -v <host-directory>:/var/log/faunadb\n    fauna/faunadb"}))},{title:"FaunaDB config",description:c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"The previous command will start a FaunaDB instance using the default configurations. If you want to specify your own parameters, you can map a config file and pass it to the command line:"),c.a.createElement(wa,{code:"$ docker run --rm --name faunadb -p 8443:8443\n    -v <host-directory or named-volume>:/var/lib/faunadb\n    -v <host-directory>:/var/log/faunadb\n    -v <path-to-config-file>:/etc/faunadb.yml\n    fauna/faunadb --config /etc/faunadb.yml"}),c.a.createElement("p",null,"This is an example config file:"),c.a.createElement(wa,{code:"auth_root_key: secret\nnetwork_datacenter_name: NoDc\nstorage_data_path: /storage/data\nlog_path: /storage/log\nnetwork_datacenter_name: NoDc\nshutdown_grace_period_seconds: 0\nnetwork_listen_address: 172.17.0.2\nnetwork_broadcast_address: 172.17.0.2\nnetwork_admin_http_address: 172.17.0.2\nnetwork_coordinator_http_address: 172.17.0.2"}),c.a.createElement("p",null,"For more information about the above configurations and others, visit"," ",c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://app.fauna.com/documentation/reference/enterpriseconfigref"}," ","How to Operate FaunaDB"," ")))}];const Qa=({title:e,description:t,index:a})=>c.a.createElement("div",{className:"card margin-top-4"},c.a.createElement(st.b,{title:e,icon:c.a.createElement(st.a,null,a+1),description:t,growDescription:!0}));var za=ba((e,t)=>[{label:"Downloads",path:t.downloads.index},{label:"FaunaDB Dev",path:t.downloads.index}])(()=>c.a.createElement("section",null,c.a.createElement(kt,{className:"margin-bottom-4 margin-bottom-small-none",divider:!1},"Download Fauna DB dev"),c.a.createElement("div",{className:"card-list"},Ga.map((e,t)=>c.a.createElement(Qa,Object.assign({key:t},e,{index:t})))))),Ya=a(322),Ka=a.n(Ya),Ja=a(323);const $a={name:"document",plural:"documents",namespace:"indexName",label:"document"},Za=Object(Pt.d)($a),Xa=Object(Pt.a)(Za);Xa.fetchDocumentsByTerms=(e={})=>({type:Za.collection.fetchDocumentsByTerms.request,payload:e}),Xa.fetchDocumentsByTermsSuccess=(e={})=>({type:Za.collection.fetchDocumentsByTerms.success,payload:e}),Xa.fetchDocumentsByTermsError=(e={})=>({type:Za.collection.fetchDocumentsByTerms.error,payload:e}),Xa.fetchDocumentByRef=(e={})=>({type:Za.collection.fetchDocumentByRef.request,payload:e}),Xa.fetchDocumentByRefSuccess=(e={})=>({type:Za.collection.fetchDocumentByRef.success,payload:e}),Xa.fetchDocumentByRefError=(e={})=>({type:Za.collection.fetchDocumentByRef.error,payload:e});const en=Object(Pt.b)(Za,$a),tn=Object(Pt.c)(Za,Xa,{fetchList:e=>ie.a(e.indexName),fetchDocumentsByTerms:e=>ie.u(e.indexName,e.terms),fetchDocumentByRef:e=>ie.s(e.classId,e.referenceId),create:e=>ie.j(e.classId,e.data),remove:e=>ie.C(e.classId,e.referenceId),update:e=>ie.M(e.classId,e.referenceId,e.data)},$a),an=(e,t)=>e.documents[t];var nn=a(26);const rn=c.a.lazy(()=>Promise.all([a.e(0),a.e(1),a.e(5)]).then(a.bind(null,1178))),cn=({height:e})=>c.a.createElement("div",{className:"code-editor code-editor--placeholder",style:{height:e}},c.a.createElement("div",{className:"placeholder placeholder--block placeholder-dark placeholder--text placeholder--w-lg"}),c.a.createElement("div",{className:"placeholder placeholder--block placeholder-dark placeholder--text placeholder--w-sm"}),c.a.createElement("div",{className:"placeholder placeholder--block placeholder-dark placeholder--text placeholder--w-md"}));function ln(e){return c.a.createElement(r.Suspense,{fallback:c.a.createElement(cn,e)},c.a.createElement(rn,e))}var sn=a(53),on=a(63);var mn=Object(m.b)((e,t)=>{const a=!t.referenceId,n=an(e,t.referenceId);return{create:a,document_:n&&n.documents&&1===n.documents.length?n.documents[0]:null}},Object(b.a)({createDocument:Xa.create,removeDocument:Xa.remove,updateDocument:Xa.update,fetchDocument:Xa.fetchDocumentByRef,fetchListDocuments:Xa.fetchList},nn))(Object(d.k)((function({document_:e,browseIndex:t,create:a,classId:n,referenceId:l,fetchListDocuments:s,fetchDocument:o,createDocument:i,removeDocument:m,updateDocument:u,showAlert:d,hideAlertDelay:p,databasePath:b,history:h}){const g=e?Object(sn.a)(e.data):"{}",O=Object(r.useState)(!1),j=Object(f.a)(O,2),_=j[0],N=j[1],C=Object(r.useState)(!1),S=Object(f.a)(C,2),q=S[0],x=S[1],k=Object(r.useState)(g),I=Object(f.a)(k,2),P=I[0],T=I[1];function D(){x(!q)}return Object(r.useEffect)(()=>{a||(o({databasePath:b,classId:n,referenceId:l}),t&&s({databasePath:b,indexName:t.name}))},[t,n,a,b,o,s,l]),Object(r.useEffect)(()=>{a?x(!0):e&&T(Object(sn.a)(e.data))},[a,e]),c.a.createElement("div",{className:"card"},a&&c.a.createElement("div",{className:"card-body"},c.a.createElement("b",null,"Javascript"),c.a.createElement("sup",null,c.a.createElement(ut.a,{action:"hover",arrowFill:"transparent"},c.a.createElement(y,{className:"secondary",name:"info-circle"}),c.a.createElement("div",{className:"popover-content"},c.a.createElement("div",{className:"margin-bottom-2"},"You can use Javascript syntax. For example:"),c.a.createElement("div",{className:"code-snippet"},c.a.createElement("div",null,"{"),c.a.createElement("div",null,'\xa0\xa0itemName: "apple",'),c.a.createElement("div",null,"\xa0\xa0price: 0.42 + 1.50,"),c.a.createElement("div",null,"\xa0\xa0perishable: true"),c.a.createElement("div",null,"}"," ")))))),!a&&e&&c.a.createElement("div",{className:"card-body clickable",onClick:D},c.a.createElement("span",{className:"documentEditToggle"},c.a.createElement(y,{name:"".concat(q?"chevron-down":"chevron-right")})),c.a.createElement("div",{className:"card-col documentPreview"},c.a.createElement("small",{"data-hj-suppress":!0},Object(sn.a)(e.data))),c.a.createElement(Ka.a,{onClick:function(e){e.stopPropagation(),d("Copied to Clipboard"),p()},"data-clipboard-text":e.ref.value.id,className:"documentRef"},c.a.createElement("div",{"data-tip":"Copy Ref to clipboard",className:"card-col documentRef"},c.a.createElement("span",null,e.ref.value.id," "),c.a.createElement("span",{title:"Copy to clipboard",className:"clipboard display-small-inline-block"},c.a.createElement(y,{name:"copy"})))),c.a.createElement(Ja.a,null)),c.a.createElement("div",{className:"card-collapse ".concat(q?"open":"")},c.a.createElement("div",{className:"card-collapse-container","data-hj-suppress":!0},c.a.createElement(ln,{value:P,onChange:T}),a&&c.a.createElement("div",{className:"card-footer text-right"},c.a.createElement("div",{className:"button-group"},c.a.createElement("button",{onClick:function(e){e.preventDefault(),h.push(E.classes.byId.path.replace(":classId",n).replace(":dbPath*",b))},className:"btn btn-tertiary"},Object(w.b)("actions.cancel")),c.a.createElement(v.a,{loading:_,onClick:function(e){e.preventDefault();const a=t?t.name:null;i({databasePath:b,indexName:a,values:{classId:n,data:Object(on.a)(P)},onComplete:(e,t)=>{if(!t){const t=E.classes.byId.path.replace(":classId",n).replace(":dbPath*",b)+"?action=byReference&referenceId=".concat(e._resourceName);h.push(t)}}})},color:"primary"},Object(w.b)("actions.create")))),!a&&c.a.createElement("div",{className:"card-footer text-right"},c.a.createElement("div",{className:"button-group"},c.a.createElement("button",{title:Object(w.b)("document_.actions.delete"),onClick:()=>function(e){window.confirm(Object(w.b)("document_.actions.confirmDelete"))&&m({parentPath:b,document:e})}(e),className:"button-group-left"},c.a.createElement(y,{name:"trash-alt"})),c.a.createElement("button",{onClick:D,className:"btn btn-tertiary"},Object(w.b)("actions.cancel")),c.a.createElement(v.a,{loading:_,onClick:function(){N(!0),u({parentPath:b,values:{data:Object(on.a)(P),ref:e.ref},onComplete:(e,t)=>{N(!1),t||o({databasePath:b,classId:n,referenceId:l})}})},color:"primary"},Object(w.b)("actions.save")))))))})));const un=c.a.lazy(()=>Promise.all([a.e(0),a.e(6)]).then(a.bind(null,1179)));function dn(e){return c.a.createElement(r.Suspense,{fallback:c.a.createElement(c.a.Fragment,null)},c.a.createElement(un,e))}function pn({document_:e,browseIndex:t,classId:a,removeDocument:n,updateDocument:l,showAlert:s,hideAlertDelay:o,databasePath:i,edit:m,remove:u,onRemoveSuccess:d}){const p=Object(sn.a)(e),b=Object(r.useState)(!1),h=Object(f.a)(b,2),g=h[0],v=h[1],O=Object(r.useState)(p),j=Object(f.a)(O,1)[0],N=E.instances.edit.path.replace(":classId",a).replace(":referenceId",e.ref.value.id).replace(":dbPath*",i);return c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-body clickable",onClick:function(){v(!g)}},c.a.createElement("div",{className:"data-row"},c.a.createElement("span",{className:"documentEditToggle"},c.a.createElement(y,{name:"".concat(g?"chevron-down":"chevron-right")})),c.a.createElement("div",{className:"card-col documentPreview"},c.a.createElement("small",{"data-hj-suppress":!0},Object(sn.a)(e.data)))),c.a.createElement("div",{className:"action-row"},c.a.createElement(L.a,{className:"card-document-ref","data-tip":"Go to document",to:N},c.a.createElement("small",null,e.ref.value.id)),c.a.createElement(Ka.a,{onClick:function(e){e.stopPropagation(),s("Copied to Clipboard"),o()},"data-clipboard-text":e.ref.value.id,className:"documentRef"},c.a.createElement("div",{"data-tip":"Copy Ref to clipboard",className:"card-col"},c.a.createElement("span",{title:"Copy to clipboard",className:"clipboard display-small-inline-block"},c.a.createElement(y,{name:"copy"})))),c.a.createElement(Ja.a,null),m&&c.a.createElement(L.a,{className:"btn btn-subtle-link",to:E.instances.edit.path.replace(":dbPath*",i).replace(":referenceId",e.ref.value.id).replace(":classId",e.ref.value.collection.value.id)},c.a.createElement(y,{name:"pen"})),u&&c.a.createElement(_,{icon:"trash",onClick:function(){const t=(e,t)=>{t?console.error("delete error",t):d()};window.confirm(Object(w.b)("document_.actions.confirmDelete"))&&n({parentPath:i,classId:a,referenceId:e.ref.id,onRemoveComplete:t})}}))),c.a.createElement("div",{className:"card-collapse ".concat(g?"open":"")},c.a.createElement("div",{className:"card-collapse-container","data-hj-suppress":!0},g&&c.a.createElement(dn,{value:j}))))}pn.defaultProps={edit:!0};var bn=Object(m.b)(null,Object(b.a)({removeDocument:Xa.remove,updateDocument:Xa.update},nn))(pn);var hn=function({document_:e}){const t=Object(sn.a)(e),a=Object(r.useState)(!1),n=Object(f.a)(a,2),l=n[0],s=n[1];return c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-body clickable",onClick:function(){s(!l)}},c.a.createElement("button",{className:"documentEditToggle"},c.a.createElement(y,{name:"".concat(l?"chevron-down":"chevron-right")})),c.a.createElement("div",{className:"card-col documentPreview"},c.a.createElement("small",{"data-hj-suppress":!0},Object(sn.a)(e)))),c.a.createElement("div",{className:"card-collapse ".concat(l?"open":"")},c.a.createElement("div",{className:"card-collapse-container","data-hj-suppress":!0},c.a.createElement(ln,{value:t}))))};const En="collection",fn="indexes";function gn({documents:e,browseIndex:t,databasePath:a,classId:n,edit:l,remove:s,refetch:o}){const i=Object(d.i)(),m=Object(r.useState)(null),u=Object(f.a)(m,2),p=u[0],b=u[1];return Object(r.useEffect)(()=>{const e=Object(d.g)(i.pathname,{path:["".concat(E.indexes.index.path),"".concat(E.indexes.byId.path)]});e&&e.isExact&&b(fn);const t=Object(d.g)(i.pathname,{path:["".concat(E.classes.index.path),"".concat(E.classes.byId.path)]});t&&t.isExact&&b(En)},[i,b]),c.a.createElement(c.a.Fragment,null,void 0===e&&c.a.createElement("div",null,Object(w.b)("loading.loading")),e&&0===e.length&&c.a.createElement("div",{className:"tip margin-bottom-4"},c.a.createElement("div",{className:"tip__label"},Object(w.b)("document_.messages.noDocumentsYet")),c.a.createElement("p",{className:"tip__text"},function(){switch(p){case En:return Object(w.b)("document_.messages.noDocuments");case fn:return Object(w.b)("index.messages.noDocuments")}}()),n&&c.a.createElement(L.a,{className:"btn btn-success btn-inline",to:E.instances.new.path.replace(":dbPath*",a).replace(":classId",n)},Object(w.b)("document_.actions.new"))),e&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"card-list"},c.a.createElement("div",{className:"card-list-body"},e.map((e,r)=>e.ref?c.a.createElement(bn,{databasePath:a,key:e.ref.value.id,document_:e,browseIndex:t,classId:n,edit:l,remove:s,onRemoveSuccess:o}):c.a.createElement(hn,{document_:e,key:r})))),e&&100===e.length&&c.a.createElement("p",null,Object(w.b)("document_.messages.capped"))))}gn.defaultProps={edit:!0,remove:!0};var yn=Object(m.b)((e,t)=>{const a=t.match.params.dbPath;return{indexes:ea(e,a)}},{createIndex:$t.create,fetchIndexes:$t.fetchList})(ba(({location:e,match:t},a)=>[{label:t.params.classId,path:e.pathname}])((function({classes:e,indexes:t,fetchIndexes:a,createIndex:n,match:l,history:s,location:o}){const i=String(l.params.dbPath),m=String(l.params.classId),u=S.a.parse(o.search).action,d=E.classes.new.path.replace(":dbPath*",i),p=void 0===t,b=Object(r.useState)(""),h=Object(f.a)(b,2),g=h[0],O=h[1];Object(r.useEffect)(()=>{document.title="".concat(String(m)," - Fauna")},[m]),Object(r.useEffect)(()=>{a({databasePath:i})},[i,a]);const j=Object(ht.a)([i,m,"documents"],()=>(ie.I(i),ie.t(m))).data;Object(r.useEffect)(()=>{O("")},[m]);const _=Object(r.useCallback)(()=>(ie.I(i),ie.t(m)),[m,i]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(pa.Plug,{outletId:"leftPanel"},c.a.createElement("div",{className:"panel"},c.a.createElement("div",{className:"panel__header"},c.a.createElement("h4",null,Object(w.b)("class_.plural")),c.a.createElement("div",{className:"panel__header-actions"},c.a.createElement(L.a,{to:d,className:"btn"},Object(w.b)("class_.actions.new")))),c.a.createElement("div",{className:"panel__content"},c.a.createElement(ma,{border:!1,selectedClasses:[m],databasePath:i})))),c.a.createElement(kt,null,m,c.a.createElement("div",{className:"content-header__links"},c.a.createElement(L.a,{className:"btn btn-subtle-link",to:E.classes.settings.path.replace(":dbPath*",i).replace(":classId",m)},c.a.createElement(y,{name:"cog"}),Object(w.b)("actions.settings")),c.a.createElement(L.a,{to:E.indexes.new.path.replace(":dbPath*",i)+"?classId=".concat(m),className:"btn btn-subtle-link"},c.a.createElement(y,{name:"plus-circle"}),Object(w.b)("index.actions.new")))),c.a.createElement("div",{className:"page-action-bar margin-bottom-2"},c.a.createElement("h4",null,Object(w.b)("document_.plural")),c.a.createElement(L.a,{className:"btn btn-subtle-link",to:E.instances.new.path.replace(":dbPath*",i).replace(":classId",m)},c.a.createElement(y,{name:"plus-circle"}),Object(w.b)("document_.actions.new")),c.a.createElement("form",{className:"form--inline form--search margin-small-left-auto",onSubmit:function(e){e.preventDefault();const t=E.instances.edit.path.replace(":classId",m).replace(":referenceId",g).replace(":dbPath*",i);s.push(t)}},c.a.createElement("div",{className:"input-group"},c.a.createElement("input",{type:"text",className:"input--search",onChange:function(e){O(e.currentTarget.value)},value:g,placeholder:"Ref ID (e.g. 76635552112221)","data-testid":"filter",required:!0}),c.a.createElement(v.a,{type:"submit",color:"primary",icon:!0},c.a.createElement("span",{className:"fas fa-search"}))))),c.a.createElement("div",{className:"padding-bottom-4"},!p&&"newInstance"===u&&c.a.createElement(mn,{classId:m,databasePath:i}),!p&&c.a.createElement(gn,{databasePath:i,documents:j,classId:m,refetch:_})))}))),vn=a(25);function On({loading:e,onCancel:t,submitLabel:a,onSubmit:n,onFailure:c,initialValues:l,isEdit:s,onDeleteClick:o}){const i=r.createRef(),m=Object(r.useState)(l),u=Object(f.a)(m,2),d=u[0],p=u[1];function b(e,t){i.current&&!i.current.checkValidity()?c&&c():n(e,t)}return Object(r.useEffect)(()=>{const e=e=>{p({json:e})};return vn.a.on("DOCUMENT_FORM_SET_DATA",e),()=>vn.a.off("DOCUMENT_FORM_SET_DATA",e)},[]),r.createElement("form",{onSubmit:function(e){e.preventDefault(),b(d,!1)},ref:i},r.createElement("div",{className:"form-group"},r.createElement("div",{className:"form-label--tooltip"},r.createElement("label",{className:"required",htmlFor:"code-editor"},Object(w.b)("javascript.name")),r.createElement(ut.a,{position:"left",arrowFill:"transparent"},r.createElement(y,{className:"secondary",name:"question-circle"}),r.createElement("div",{className:"popover-content"},r.createElement("div",{className:"margin-bottom-2"},"You can use Javascript syntax. For example:"),r.createElement("div",{className:"code-snippet"},r.createElement("div",null,"{"),r.createElement("div",null,'\xa0\xa0itemName: "apple",'),r.createElement("div",null,"\xa0\xa0price: 0.42 + 1.50,"),r.createElement("div",null,"\xa0\xa0perishable: true"),r.createElement("div",null,"}"," "))))),r.createElement("div",{"data-hj-suppress":!0},r.createElement(ln,{moveCursorTo:"{}"===d.json?[0,1]:null,value:d.json,onChange:function(e){p({json:e})}}))),r.createElement("div",{className:"form-actions form-actions--document-form container container--xsmall"},r.createElement(v.a,{onClick:t,color:"secondary"},Object(w.b)("actions.cancel")),r.createElement(v.a,{type:"submit",color:"success",loading:e},a||Object(w.b)("actions.save")),r.createElement(v.a,{onClick:function(e){e.preventDefault(),b(d,!0)},color:"subtle-link"},Object(w.b)("document_.messages.saveReturnToCollections"))),o&&r.createElement(r.Fragment,null,r.createElement("hr",{className:"margin-top-4 margin-bottom-3"}),r.createElement(_,{color:"muted",onClick:o,label:Object(w.b)("actions.remove"),icon:"trash"})))}On.defaultProps={loading:!1,initialValues:{json:""},isEdit:!1};var jn=Object(m.b)((e,t)=>{const a=((e,t)=>e.documents[t])(e,t.match.params.referenceId);return{doc:a&&a.documents&&a.documents.length&&a.documents[0].data?a.documents[0]:void 0,documents:a&&a.documents}},{fetchDocumentByRef:Xa.fetchDocumentByRef,createDocument:Xa.create,updateDocument:Xa.update,removeDocument:Xa.remove,showAlert:nn.showAlert,hideAlert:nn.hideAlert})(ba(({location:e,match:t},a)=>{const n=t.params,r=n.referenceId,c=n.dbPath,l=n.classId;let s="";switch(t.path){case a.instances.new.path:s="New";break;case a.instances.edit.path:s="Edit";break;default:s="Show"}const o="".concat(s," Document");let i=[{label:l,path:a.classes.byId.path.replace(":classId",l).replace(":dbPath*",c)}];return"Edit"===s?i=i.concat([{label:r,path:a.instances.show.path.replace(":dbPath*",c).replace(":classId",l).replace(":referenceId",r)},{label:o,path:e.pathname}]):"show"===s?i=i.concat([{label:r,path:e.pathname}]):i.push({label:o,path:e.pathname}),i})((function({doc:e,fetchDocumentByRef:t,createDocument:a,updateDocument:n,removeDocument:l,match:s,history:o,location:i,showAlert:m,hideAlert:u,documents:d}){const p=String(s.params.dbPath),b=String(s.params.classId),h=String(s.params.referenceId),f=Object(r.useMemo)(()=>{switch(s.path){case E.instances.new.path:return"new";case E.instances.edit.path:return"edit";case E.instances.show.path:return"show";default:return null}},[s.path]);function g(e,t){u();const r=(e,a)=>{if(a)return;vn.a.emit("DOCUMENT_CREATED");const n=e.values&&e.values.referenceId||e.result.ref.value.id,r=t?E.classes.byId.path.replace(":classId",b).replace(":dbPath*",p):E.instances.show.path.replace(":classId",b).replace(":referenceId",n).replace(":dbPath*",p);o.push(r)};try{"new"===f?a({parentPath:p,values:{data:Object(on.a)(e.json),classId:b},onComplete:r}):n({parentPath:p,values:{data:Object(on.a)(e.json),classId:b,referenceId:h},onComplete:r})}catch(c){m(c.message,"error")}}function v(){o.goBack()}return Object(r.useEffect)(()=>{const e=s.params.referenceId;document.title=e?"".concat(Object(w.b)("document_.name")," ").concat(String(e)," - Fauna"):"".concat(Object(w.b)("document_.actions.new")," - Fauna")},[s.params]),Object(r.useEffect)(()=>{f&&"new"!==f&&h&&t({databasePath:p,classId:b,referenceId:h})},[p,b,h,f,t]),f?c.a.createElement(c.a.Fragment,null,c.a.createElement(kt,null,"edit"===f&&c.a.createElement(c.a.Fragment,null,"Edit ",h),"new"===f&&c.a.createElement(c.a.Fragment,null,Object(w.b)("document_.actions.new")),"show"===f&&c.a.createElement(c.a.Fragment,null,Object(w.b)("document_.name")," ",h,e&&c.a.createElement(L.a,{className:"btn btn-subtle-link",to:E.instances.edit.path.replace(":dbPath*",p).replace(":referenceId",h).replace(":classId",b)},c.a.createElement(y,{name:"pen"}),"Edit"))),c.a.createElement("div",{className:"padding-y-4"},"show"===f&&e&&c.a.createElement("div",{className:"json-display-container","data-hj-suppress":!0},c.a.createElement(dn,{value:Object(sn.a)(e.data)})),"show"===f&&!e&&d&&c.a.createElement("div",{className:"tip"},c.a.createElement("div",{className:"tip__label"},"Document not found"),c.a.createElement("p",{className:"tip__text"},"The instance ",c.a.createElement("b",null,h)," was not found. Please check the ID and try again.")),"edit"===f&&e&&c.a.createElement(On,{initialValues:{json:Object(sn.a)(e.data)},isEdit:!0,onCancel:v,onSubmit:g,onDeleteClick:function(){const e=(e,t)=>{if(t)return void console.error("delete error",t);const a=E.classes.byId.path.replace(":classId",b).replace(":dbPath*",p);o.push(a)};window.confirm(Object(w.b)("document_.actions.confirmDelete"))&&l({parentPath:p,classId:b,referenceId:h,onRemoveComplete:e})}}),"new"===f&&c.a.createElement(On,{initialValues:{json:"{}"},isEdit:!1,onCancel:v,onSubmit:g}))):c.a.createElement(c.a.Fragment,null)})));function _n(e){return e.slice().sort((e,t)=>e.name.localeCompare(t.name))}var wn=Object(m.b)((e,{match:t})=>({classes:Qt(e,t.params.dbPath)}),{fetchClasses:Ht.fetchList})(ba(({location:e,classes:t})=>t&&t.length>0?[]:[{label:Object(w.b)("class_.plural"),path:e.pathname}])((function({classes:e,fetchClasses:t,match:a,history:n,location:l}){const s=a.params.dbPath,o=Object(r.useState)(null),i=Object(f.a)(o,2),m=i[0],u=i[1],d=Object(r.useState)(!1),p=Object(f.a)(d,2),h=p[0],E=p[1];if(Object(r.useEffect)(()=>{t({databasePath:s,onComplete:e=>{e.length>0?u(_n(e)[0]):E(!0)}})},[s]),h)return c.a.createElement("div",{className:"card margin-top-4"},c.a.createElement(la,{databasePath:s||"root",displayDescription:!0}));if(m){const e={history:n,location:l,match:Object(b.a)({},a,{params:Object(b.a)({},a.params,{classId:m.name})})};return c.a.createElement(yn,e)}return c.a.createElement(c.a.Fragment,null)})));const Nn="simple",Cn="fql",Sn={name:"",history_days:30,ttl_days:""};function qn({loading:e,onCancel:t,submitLabel:a,onSubmit:n,onFailure:c,initialValues:l,isEdit:s,onDeleteClick:o}){const i=r.createRef(),m=ne(l),u=m.formValues,d=m.handleChange;function p(){return{name:u.name,history_days:re(u.history_days,Number),ttl_days:re(u.ttl_days,Number)}}return r.createElement("form",{onSubmit:function(e){e.preventDefault(),n(p())},ref:i},r.createElement(ja,{id:Nn},r.createElement("div",{className:"container container--xsmall"},r.createElement("div",{className:"form-group"},r.createElement("div",{className:"form-label--tooltip"},r.createElement("label",{className:"required",htmlFor:"name"},Object(w.b)("class_.name")," ",Object(w.b)("attributes.name")),r.createElement(ut.a,{position:"left",arrowFill:"transparent"},r.createElement(y,{className:"secondary",name:"question-circle"}),r.createElement("div",{className:"popover-content"},Object(w.b)("tooltips.className")))),r.createElement("div",{className:"formField--tooltip"},r.createElement("input",{onChange:d,value:u.name,id:"name",name:"name",type:"text",required:!0,autoFocus:!0}))),r.createElement("div",{className:"form-group"},r.createElement("div",{className:"grid"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col"},r.createElement("div",{className:"form-label--tooltip"},r.createElement("label",{className:"optional",htmlFor:"history_days"},Object(w.b)("attributes.historyDays")),r.createElement(ut.a,{position:"left",arrowFill:"transparent"},r.createElement(y,{className:"secondary",name:"question-circle"}),r.createElement("div",{className:"popover-content"},Object(w.b)("tooltips.trackDays")))),r.createElement("div",{className:"formField--tooltip"},r.createElement("input",{id:"history_days",name:"history_days",type:"number",min:"0",onChange:d,value:u.history_days}))),r.createElement("div",{className:"col"},r.createElement("div",{className:"form-label--tooltip"},r.createElement("label",{className:"optional",htmlFor:"ttl_days"},Object(w.b)("attributes.ttl")),r.createElement(ut.a,{position:"left",arrowFill:"transparent"},r.createElement(y,{className:"secondary",name:"question-circle"}),r.createElement("div",{className:"popover-content"},Object(w.b)("tooltips.ttl")))),r.createElement("div",{className:"formField--tooltip"},r.createElement("input",{id:"ttl_days",name:"ttl_days",type:"number",min:"1",onChange:d,value:u.ttl_days})))))))),r.createElement(ja,{id:Cn},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:""},Object(w.b)("attributes.faunaData")),r.createElement(wa,{code:p()}))),r.createElement("div",{className:"form-actions container container--xsmall"},r.createElement(v.a,{onClick:t,color:"secondary"},Object(w.b)("actions.cancel")),r.createElement(v.a,{type:"submit",color:"success",loading:e,onClick:function(){i.current&&!i.current.checkValidity()&&c&&c()}},a||Object(w.b)("actions.save"))),o&&r.createElement("div",{className:"container container--xsmall"},r.createElement("hr",{className:"margin-top-4 margin-bottom-3"}),r.createElement(_,{color:"muted",onClick:o,label:Object(w.b)("actions.remove"),icon:"trash"})))}qn.defaultProps={loading:!1,initialValues:Sn,isEdit:!1};var xn=Object(m.b)(null,{createClass:Ht.create,createIndex:$t.create})(ba(({location:e,match:t})=>[{label:Object(w.b)("class_.plural"),path:E.classes.index.path.replace(":dbPath*",t.params.dbPath)},{label:Object(w.b)("class_.actions.new"),path:e.pathname}])((function({match:e,history:t,createClass:a,createIndex:n}){const l=e.params.dbPath,s=Object(r.useState)(!1),o=Object(f.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)(Nn),d=Object(f.a)(u,2),p=d[0],b=d[1];return c.a.createElement(ya,{activeTab:p,setActiveTab:b},c.a.createElement(kt,{tabs:c.a.createElement(va,{position:"right"},c.a.createElement(Oa,{id:Nn},Object(w.b)("tabs.simple")),c.a.createElement(Oa,{id:Cn},Object(w.b)("tabs.fql")))},Object(w.b)("class_.actions.new")),c.a.createElement("div",{className:"padding-y-3"},c.a.createElement(qn,{loading:i,databasePath:l,onCancel:function(){t.goBack()},onSubmit:function(e){m(!0),a({values:e,databasePath:l,onComplete:(a,n)=>{var r;n?m(!1):(r=e.name,t.push(E.classes.byId.path.replace(":dbPath*",l).replace(":classId",r)))}})},onFailure:function(){b(Nn)}})))})));var kn=Object(m.b)((e,{match:t})=>({class_:zt(e,t.params.dbPath,t.params.classId)}),Object(b.a)({updateClass:Ht.update,fetchClasses:Ht.fetchList,removeClass:Ht.remove},n))(ba(({location:e,match:t})=>{const a=t.params,n=a.classId,r=a.dbPath;return[{label:n,path:E.classes.byId.path.replace(":dbPath*",r).replace(":classId",n)},{label:Object(w.b)("info.settings"),path:e.pathname}]})((function({match:e,history:t,updateClass:a,fetchClasses:n,class_:l,removeClass:s,showModal:o,hideModal:i}){const m=e.params.dbPath,u=Object(r.useState)(!1),d=Object(f.a)(u,2),p=d[0],h=d[1],g=Object(r.useState)(Nn),y=Object(f.a)(g,2),v=y[0],O=y[1];return Object(r.useEffect)(()=>{n({databasePath:m})},[m,n]),c.a.createElement(ya,{activeTab:v,setActiveTab:O},c.a.createElement(kt,{tabs:c.a.createElement(va,{position:"right"},c.a.createElement(Oa,{id:Nn},Object(w.b)("tabs.simple")),c.a.createElement(Oa,{id:Cn},Object(w.b)("tabs.fql")))},Object(w.b)("class_.name")," ",Object(w.b)("info.settings")),c.a.createElement("div",{className:"padding-y-3"},l?c.a.createElement(qn,{loading:p,databasePath:m,onCancel:function(){t.goBack()},onSubmit:function(e){if(!l)return;const n=e.name!==l.name;h(!0),a({values:Object(b.a)({},e,{originalName:l.name}),databasePath:m,parentPath:m,onComplete:()=>{!function(e,a=!1){let n=E.classes.byId.path.replace(":dbPath*",m).replace(":classId",e);a&&(n+="?nameChanged=true");t.push(n)}(e.name,n)}})},onFailure:function(){O(Nn)},initialValues:l?{name:l.name,ttl_days:l.ttl_days,history_days:l.history_days}:Sn,onDeleteClick:function(){if(!l)return;o({content:Object(w.b)("class_.messages.deleteConfirm",[l.name]),onOk:()=>{s({databasePath:m,parentPath:m,name:l.name,onRemoveComplete:()=>{i(),t.push(E.classes.index.path.replace(":dbPath*",m))}})},onCancel:i,showOk:!0,showCancel:!0,okText:Object(w.b)("actions.remove"),cancelText:Object(w.b)("actions.cancel")})},isEdit:!0}):c.a.createElement(c.a.Fragment,null,Object(w.b)("loading.loading"))))})));function In({databasePath:e}){return c.a.createElement("div",null,c.a.createElement(st.b,{shadow:!0,title:Object(w.b)("index.empty.title"),icon:c.a.createElement(y,{name:"table"}),action:c.a.createElement(L.a,{to:E.indexes.new.path.replace(":dbPath*",e),className:"btn btn-success"},"new index")}))}const Pn=r.useEffect;function Tn({fetchListIndexes:e,databasePath:t,indexes:a,selectedIndexes:n,border:c}){function l(e){return t?"/indexes/".concat(e.name,"/@db/").concat(String(t)):"/indexes/".concat(e.name)}function s(e){return n.includes(e.name)}return Pn(()=>{e({databasePath:t})},[t,e]),r.createElement(r.Fragment,null,!a&&r.createElement("div",null,Object(w.b)("loading.loading")),a&&0===a.length&&r.createElement(In,{databasePath:t}),a&&a.length>0&&r.createElement("div",{className:"scrollList"},r.createElement("table",{className:"table-card no-table-labels ".concat(c?"":"table--no-border")},r.createElement("tbody",null,a.map(e=>r.createElement("tr",{key:e.name,className:"".concat(s(e)?"selected":"")},r.createElement("td",null,r.createElement("div",null,r.createElement(L.a,{to:l(e),"data-hj-suppress":!0},e.name)))))))))}Tn.defaultProps={selectedIndexes:[],border:!0};const Dn={fetchListIndexes:$t.fetchList};var Rn=Object(m.b)((e,t)=>({indexes:ea(e,t.databasePath)}),Dn)(Tn);var Ln=Object(m.b)((e,{index:t})=>({results:an(e,t.name)}))((function({results:e,index:t,databasePath:a}){return e?0===e.length?c.a.createElement("div",{className:"tip"},c.a.createElement("div",{className:"tip__label"},"No results found"),c.a.createElement("p",{className:"tip__text"},'No results found for the index "',t.name,'"')):c.a.createElement("div",{className:"card-list"},c.a.createElement("div",{className:"card-list-body"},e.map((e,t)=>e.ref?c.a.createElement(bn,{databasePath:a,key:e.ref.id,document_:e,classId:e.ref.collection.id}):c.a.createElement(hn,{document_:e,key:t}))),e&&100===e.length&&c.a.createElement("div",{style:{padding:"10px"}},Object(w.b)("document_.messages.capped"))):null})),An=a(76);const Fn="text",Un="number",Bn="code",Mn=[{value:Fn,label:"String"},{value:Un,label:"Number"},{value:Bn,label:"FQL"}];var Vn=Object(m.b)(null,{fetchDocumentsByTerms:Xa.fetchDocumentsByTerms,showAlert:nn.showAlert})((function({index:e,databasePath:t,fetchDocumentsByTerms:a,showAlert:n}){const l=Object(r.useState)(!1),s=Object(f.a)(l,2),o=s[0],i=s[1],m=Object(r.useState)(null),u=Object(f.a)(m,2),d=u[0],p=u[1];function h(e){p(Object(b.a)({},d,{[e.target.name]:Object(b.a)({},d[e.target.name],{value:e.target.value})}))}function E(e){const t=e.name,a=e.type;return c.a.createElement("div",{className:"input-group input-group--vertical"},c.a.createElement("select",{value:a,onChange:e=>function(e,t){p(Object(b.a)({},d,{[e]:Object(b.a)({},d[e],{type:t})}))}(t,e.currentTarget.value)},Mn.map(e=>c.a.createElement("option",{key:e.value,value:e.value},e.label))),function(e){const t=e.name,a=e.value,n=e.type;if(n!==Bn)return c.a.createElement("input",{type:n,onChange:h,name:t,value:a,id:t,required:!0});return c.a.createElement("div",{className:"input--code","data-hj-suppress":!0},c.a.createElement(ln,{showGutter:!1,value:a,onChange:e=>h({target:{name:t,value:e}}),height:"14px",maxLines:1}))}(e))}return Object(r.useEffect)(()=>{function t(e){const t=Fn,a=function(e){return ra(e)}(e);return{[a]:{name:a,value:"",type:t}}}e.terms&&p(function(){const a=e.terms;return Array.isArray(a)?a.reduce((e,a)=>Object(b.a)({},e,{},t(a)),{}):t(a)}())},[e]),c.a.createElement("form",{onSubmit:function(r){r.preventDefault(),i(!0),a({terms:Ke.a.map(d,e=>function(e,t){switch(e){case Fn:return String(t);case Un:return Number(t);case Bn:try{return Object(on.a)(t)}catch(a){return void n(a.message,An.a)}default:return t}}(e.type,e.value)),indexName:e.name,databasePath:t,onComplete:()=>i(!1)})},className:"form--inline form--filter margin-bottom-3"},Ke.a.map(d,e=>{const t=e.name;return c.a.createElement("div",{className:"form-group",key:t},c.a.createElement("label",{htmlFor:t},t),E(e))}),c.a.createElement("div",{className:"form-group"},c.a.createElement(v.a,{block:!0,loading:o,type:"submit",color:"primary"},c.a.createElement(y,{name:"search"}))))}));const Hn={fetchListIndexes:$t.fetchList,fetchDocuments:Xa.fetchList,fetchDocumentsByTerms:Xa.fetchDocumentsByTerms};var Wn=Object(m.b)((e,t)=>{const a=t.match.params,n=a.dbPath,r=a.indexId,c=ea(e,n),l=c&&ta(r,e,n);return{indexes:c,browseIndex:l,isCoveringIndex:l&&aa(l),documents:l&&an(e,l.name)}},Hn)(ba(({location:e,match:t},a)=>[{label:t.params.indexId,path:e.pathname}])((function({indexes:e,documents:t,browseIndex:a,isCoveringIndex:n,fetchListIndexes:l,createIndex:s,match:o,location:i,fetchDocuments:m,fetchDocumentsByTerms:u}){const d=(p=a)&&p.terms&&p.terms.length>0;var p;const b=String(o.params.dbPath),h=String(o.params.indexId),f=a&&a.active;return Object(r.useEffect)(()=>{document.title="".concat(h," - Fauna")},[h]),Object(r.useEffect)(()=>{l({databasePath:b})},[h,b,l]),Object(r.useEffect)(()=>{f&&(n?m({databasePath:b,indexName:a.name}):d||u({databasePath:b,indexName:a.name,terms:[]}))},[a,f,b,m,u,d,n]),Object(r.useEffect)(()=>(function e(){!1===f&&(window.timeoutId=setTimeout(()=>{!1===a.active&&(l({databasePath:b}),e())},function(e){const t=e=>60*e*1e3,a=e=>1e3*e,n=(new Date).getTime()-Math.round(e/1e3);if(n<=t(1))return a(10);if(n<=t(10))return a(30);return t(10)}(a.ts)))}(),()=>{window.timeoutId&&(clearTimeout(window.timeoutId),delete window.timeoutId)}),[a,f,b,l,i.pathname]),c.a.createElement(c.a.Fragment,null,c.a.createElement(pa.Plug,{outletId:"leftPanel"},c.a.createElement("div",{className:"panel"},c.a.createElement("div",{className:"panel__header"},c.a.createElement("h4",null,Object(w.b)("index.plural")),c.a.createElement("div",{className:"panel__header__actions"},c.a.createElement(L.a,{to:E.indexes.new.path.replace(":dbPath*",b),className:"btn btn-subtle-link"},Object(w.b)("index.actions.new")))),c.a.createElement("div",{className:"panel__content"},c.a.createElement(Rn,{selectedIndexes:[h],databasePath:b,border:!1})))),c.a.createElement(kt,null,h,c.a.createElement("div",{className:"content-header__links"},c.a.createElement(L.a,{className:"btn btn-subtle-link",to:E.indexes.edit.path.replace(":dbPath*",b).replace(":indexId",h)},c.a.createElement(y,{name:"cog"}),"Settings"))),!d&&c.a.createElement("div",{className:"page-action-bar margin-bottom-2"},c.a.createElement("h4",null,Object(w.b)("document_.plural"))),a&&!a.active&&c.a.createElement("div",{className:"tip"},c.a.createElement("div",{className:"tip__label"},c.a.createElement("img",{src:j.a,alt:"",className:"spinner"}),"Index building..."),c.a.createElement("p",{className:"tip__text"},"The index \u201c",h,"\u201d is still building. Depending on the size of your dataset, this may take upwards of 10 minutes.")),a&&a.active&&c.a.createElement(c.a.Fragment,null,void 0===e&&c.a.createElement("div",{className:"section"},Object(w.b)("loading.loading")),!n&&d&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"page-action-bar"},c.a.createElement("h4",null,"Search ",Object(w.b)("document_.plural"))),c.a.createElement("p",{className:"width-small-60 margin-bottom-4"},"Note: select the data type from the dropdown before entering the term to search. For booleans and anything that is not a string or number, use the FQL option."),c.a.createElement(Vn,{index:a,databasePath:b}),c.a.createElement(Ln,{index:a,databasePath:b})),(n||!d)&&c.a.createElement("div",{className:"padding-bottom-4"},c.a.createElement(gn,{browseIndex:a,databasePath:b,documents:t,classId:na(a),edit:!1,remove:!1}))))})));const Gn={fetchIndexes:$t.fetchList};var Qn=Object(m.b)((e,t)=>{const a=t.match.params,n=a.dbPath,r=a.indexId;return{browseIndex:ea(e,n)&&ta(r,e,n)}},Gn)(ba(({location:e,match:t},a)=>[{label:t.params.indexId,path:a.indexes.byId.path.replace(":dbPath*",t.params.dbPath).replace(":indexId",t.params.indexId)},{label:"Settings",path:e.pathname}])((function({indexes:e,browseIndex:t,fetchIndexes:a,match:n}){const l=String(n.params.dbPath),s=String(n.params.indexId),o=Object(r.useState)("simple"),i=Object(f.a)(o,2),m=i[0],u=i[1];return Object(r.useEffect)(()=>{document.title="".concat(s," Settings - Fauna")},[s]),Object(r.useEffect)(()=>{a({databasePath:l})},[s,l,a]),Object(r.useEffect)(()=>{let e;return t&&!t.active&&(e=setInterval(()=>{a({databasePath:l})},5e3)),()=>clearInterval(e)},[t,l,a]),c.a.createElement("div",{className:"panel"},c.a.createElement("div",{className:"panel-left"},c.a.createElement("div",{className:"panel-left-header"},c.a.createElement("h4",null,Object(w.b)("index.plural")),c.a.createElement("div",{className:"panel-left-header-actions"},c.a.createElement(L.a,{to:E.indexes.new.path.replace(":dbPath*",l),className:"btn btn-subtle-link"},Object(w.b)("index.actions.new")))),c.a.createElement("div",{className:"panel-left-content"},c.a.createElement(Rn,{selectedIndexes:[s],databasePath:l,border:!1}))),c.a.createElement("div",{className:"panel-content"},c.a.createElement(ya,{activeTab:m,setActiveTab:u},c.a.createElement(kt,{tabs:c.a.createElement(va,{position:"right"},c.a.createElement(Oa,{id:"simple"},Object(w.b)("tabs.simple")),c.a.createElement(Oa,{id:"fql"},Object(w.b)("tabs.fql")))},"Index Settings",c.a.createElement(L.a,{className:"btn btn-subtle-link",to:E.indexes.edit.path.replace(":dbPath*",l).replace(":indexId",s)},c.a.createElement(y,{name:"cog"}),"Edit")),t&&c.a.createElement("div",{className:"padding-y-4"},c.a.createElement(ja,{id:"simple"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:""},"Source Class"),c.a.createElement("p",{"data-hj-suppress":!0},na(t))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:""},"Index Name"),c.a.createElement("p",{"data-hj-suppress":!0},t.name)),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:""},"Terms"),t.terms&&t.terms.length>0?c.a.createElement("ul",null,t.terms.map((e,t)=>c.a.createElement("li",{key:t},ra(e)))):c.a.createElement("p",null,"Not set")),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:""},"Values"),t.values&&t.values.length>0?c.a.createElement("ul",null,t.values.map((e,t)=>c.a.createElement("li",{key:t},ra(e)))):c.a.createElement("p",null,"Not set (using ",c.a.createElement("code",null,"ref")," by default)")),c.a.createElement("div",{className:"form-group"},c.a.createElement("p",null,t.unique?c.a.createElement(y,{name:"check-square"}):c.a.createElement(y,{mode:"far",name:"square"})," ",Object(w.b)("attributes.unique"))),c.a.createElement("div",{className:"form-group"},c.a.createElement("p",null,t.unique||t.serialized?c.a.createElement(y,{name:"check-square"}):c.a.createElement(y,{mode:"far",name:"square"})," ",Object(w.b)("attributes.serialized")))),c.a.createElement(ja,{id:"fql"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:""},Object(w.b)("attributes.faunaData")),c.a.createElement(wa,{code:t})))))))})));var zn=Object(m.b)((e,{indexName:t,databasePath:a})=>({index:ta(t,e,a)}),Object(b.a)({removeIndex:$t.remove},n))((function({index:e,removeIndex:t,showModal:a,hideModal:n,databasePath:r,onRemove:l}){return c.a.createElement(_,{color:"muted",onClick:function(){a({content:Object(w.b)("index.actions.confirmDelete",[e.name]),onOk:()=>{t({parentPath:r,databasePath:r,index:e}),l&&l(e),n()},onCancel:()=>{n()},showOk:!0,showCancel:!0,okText:Object(w.b)("actions.remove"),cancelText:Object(w.b)("actions.cancel")})},label:Object(w.b)("actions.remove"),icon:"trash"})}));const Yn=[13];function Kn({name:e,addField:t,values:a,removeField:n,getValueByIndex:l,onFieldChange:s}){const o=Object(r.useState)(""),i=Object(f.a)(o,2),m=i[0],u=i[1];function d(e){t(e||m),u("")}function p(e){const t=e.target.value.trim();if(t.length){d(function(e){const t=e.split("."),a=Object(f.a)(t,1)[0];return["ts","ref","data"].includes(a)?e:"data.".concat(e)}(t))}}return c.a.createElement(c.a.Fragment,null,a&&a.map((e,t)=>c.a.createElement("div",{className:"row form-field__line",key:t},c.a.createElement("div",{className:"col"},c.a.createElement("input",{type:"text",value:l(t),onChange:e=>s(t,e)})),c.a.createElement("div",{className:"col col--auto"},c.a.createElement(v.a,{icon:!0,className:"form-field__button form-field__button--remove",onClick:()=>{n(t)}},c.a.createElement(y,{name:"times"}))))),c.a.createElement("div",{className:"row form-field__line"},c.a.createElement("div",{className:"col"},c.a.createElement("input",{type:"text",value:m,onChange:e=>u(e.currentTarget.value),onKeyDown:function(e){Yn.includes(e.keyCode)&&(e.preventDefault(),p(e))},"data-testid":"".concat(e,"-field"),onBlur:p})),c.a.createElement("div",{className:"col col--auto"},c.a.createElement(v.a,{icon:!0,className:"form-field__button",onClick:function(){d()}},c.a.createElement(y,{name:"plus-circle"})))))}function Jn({onSubmit:e,initialValues:t,databasePath:a,classes:n,loading:c,isEdit:l,onRemove:s,onCancel:o}){const i=ne(t),m=i.formValues,u=i.handleChange,d=i.renderArrayField;return r.createElement(r.Fragment,null,r.createElement("form",{onSubmit:function(t){t.preventDefault(),e(m)}},r.createElement(ja,{id:"simple"},r.createElement("div",{className:"container container--xsmall"},r.createElement("div",{className:"form-group"},r.createElement("div",{className:"form-label--tooltip"},r.createElement("label",{className:"required",htmlFor:"source"},Object(w.b)("index.messages.source")," ",Object(w.b)("class_.name")),r.createElement(ut.a,{position:"left",arrowFill:"transparent"},r.createElement(y,{className:"secondary",name:"question-circle"}),r.createElement("div",{className:"popover-content"},Object(w.b)("tooltips.indexSourceClasses")))),l?r.createElement("p",null,t.source):r.createElement("select",{"data-hj-suppress":!0,onChange:u,required:!0,id:"source",name:"source",value:m.source},n?r.createElement(r.Fragment,null,r.createElement("option",{value:""},Object(w.b)("class_.actions.select")),n?n.map(e=>r.createElement("option",{key:e.name,value:e.id},e.name)):r.createElement(r.Fragment,null)):r.createElement("option",{value:""},Object(w.b)("loading.loading")))),r.createElement("div",{className:"form-group"},r.createElement("div",{className:"form-label--tooltip"},r.createElement("label",{className:"required",htmlFor:"name"},Object(w.b)("index.name")," ",Object(w.b)("attributes.name")),r.createElement(ut.a,{position:"left",arrowFill:"transparent"},r.createElement(y,{className:"secondary",name:"question-circle"}),r.createElement("div",{className:"popover-content"},Object(w.b)("tooltips.indexName")))),r.createElement("div",{className:"formField--tooltip"},r.createElement("input",{id:"name",name:"name",type:"text",onChange:u,value:m.name,required:!0,autoFocus:!0}))),r.createElement("div",{className:"form-group"},r.createElement("div",{className:"form-label--tooltip"},r.createElement("label",{className:"optional"},Object(w.b)("attributes.terms")),r.createElement(ut.a,{position:"left",arrowFill:"transparent"},r.createElement(y,{className:"secondary",name:"question-circle"}),r.createElement("div",{className:"popover-content"},Object(w.b)("tooltips.indexTerms")))),l?r.createElement(r.Fragment,null,t.terms&&t.terms.length>0?r.createElement("ul",null,t.terms.map((e,t)=>r.createElement("li",{key:t},ra(e)))):r.createElement("p",null,"Not set")):r.createElement("div",{className:"formField--tooltip"},r.createElement("div",{className:"grid width-100"},d("terms",Kn)))),r.createElement("div",{className:"form-group"},r.createElement("div",{className:"form-label--tooltip"},r.createElement("label",{className:"optional",htmlFor:"values"},Object(w.b)("attributes.values")),r.createElement(ut.a,{position:"left",arrowFill:"transparent"},r.createElement(y,{className:"secondary",name:"question-circle"}),r.createElement("div",{className:"popover-content"},Object(w.b)("tooltips.indexValues")))),l?r.createElement(r.Fragment,null,t.values&&t.values.length>0?r.createElement("ul",null,t.values.map((e,t)=>r.createElement("li",{key:t},ra(e)))):r.createElement("p",null,"Not set (using ",r.createElement("code",null,"ref")," by default)")):r.createElement("div",{className:"formField--tooltip"},r.createElement("div",{className:"grid width-100"},d("values",Kn)))),r.createElement("div",{className:"form-group"},r.createElement("div",{className:"formField--tooltip"},r.createElement("div",{className:"form-checkbox"},r.createElement("label",{className:"optional",htmlFor:"unique"},r.createElement("input",{name:"unique",type:"checkbox",id:"unique",checked:m.unique,onChange:u}),Object(w.b)("attributes.unique")),r.createElement(ut.a,{arrowFill:"transparent"},r.createElement(y,{className:"secondary",name:"question-circle"}),r.createElement("div",{className:"popover-content"},Object(w.b)("tooltips.indexUnique")))))),r.createElement("div",{className:"form-group"},r.createElement("div",{className:"formField--tooltip"},r.createElement("div",{className:"form-checkbox"},r.createElement("label",{className:"optional",htmlFor:"serialized"},r.createElement("input",{type:"checkbox",id:"serialized",name:"serialized",checked:m.unique||m.serialized,onChange:u}),Object(w.b)("attributes.serialized")),r.createElement(ut.a,{arrowFill:"transparent"},r.createElement(y,{className:"secondary",name:"question-circle"}),r.createElement("div",{className:"popover-content"},Object(w.b)("tooltips.indexSerialized")))))))),r.createElement(ja,{id:"fql"},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:""},Object(w.b)("attributes.faunaData")),r.createElement(wa,{code:l?m:Object(b.a)({},m,{source:re(m.source),serialized:m.unique||m.serialized,terms:m.terms.map(e=>({field:e.split(".")})),values:m.values.map(e=>({field:e.split(".")}))})}))),r.createElement("div",{className:"form-actions container container--xsmall"},r.createElement(v.a,{onClick:o,color:"secondary"},Object(w.b)("actions.cancel")),r.createElement(v.a,{type:"submit",color:"success",loading:c},Object(w.b)("actions.save"))),l&&r.createElement("div",{className:"container container--xsmall"},r.createElement("hr",{className:"margin-top-4 margin-bottom-3"}),r.createElement(zn,{indexName:t.name,databasePath:a,onRemove:s}))))}Jn.defaultProps={initialValues:{},isEdit:!1};var $n=Object(m.b)((e,{match:t})=>{const a=t.params,n=a.dbPath,r=a.indexId;return{browseIndex:ea(e,n)&&ta(r,e,n)}},{fetchIndexes:$t.fetchList,updateIndex:$t.update})(ba(({location:e,match:t},a)=>[{label:t.params.indexId,path:a.indexes.byId.path.replace(":dbPath*",t.params.dbPath).replace(":indexId",t.params.indexId)},{label:"Edit",path:e.pathname}])((function({history:e,match:t,updateIndex:a,fetchIndexes:n,browseIndex:l}){const s=t.params.dbPath,o=String(t.params.indexId),i=Object(r.useState)(!1),m=Object(f.a)(i,2),u=m[0],d=m[1],p=Object(r.useState)("simple"),b=Object(f.a)(p,2),h=b[0],g=b[1];return Object(r.useEffect)(()=>{document.title="".concat(Object(w.b)("index.actions.edit")," - Fauna")},[]),Object(r.useEffect)(()=>{n({databasePath:s})},[o,s,n]),l?c.a.createElement(ya,{activeTab:h,setActiveTab:g},c.a.createElement(kt,{tabs:c.a.createElement(va,{position:"right"},c.a.createElement(Oa,{id:"simple"},Object(w.b)("tabs.simple")),c.a.createElement(Oa,{id:"fql"},Object(w.b)("tabs.fql")))},Object(w.b)("index.actions.edit")),c.a.createElement("div",{className:"padding-y-3"},c.a.createElement(Jn,{isEdit:!0,initialValues:{name:l.name,unique:l.unique,serialized:l.serialized,source:na(l),terms:l.terms,values:l.values},databasePath:s,onSubmit:function(t){d(!0),a({values:{ref:l.ref,data:t},parentPath:s,databasePath:s,onComplete:(a,n)=>{n?d(!1):e.push(E.indexes.byId.path.replace(":indexId",t.name).replace(":dbPath*",s))}})},onCancel:function(){e.goBack()},onRemove:function(){e.push(E.indexes.index.path.replace(":dbPath*",s))},loading:u}))):c.a.createElement("div",{className:"section"},Object(w.b)("loading.loading"))})));const Zn={fetchIndexes:$t.fetchList,fetchClasses:Ht.fetchList};var Xn=Object(m.b)((e,{match:t})=>({indexes:ea(e,t.params.dbPath),classes:Qt(e,t.params.dbPath)}),Zn)(ba(({location:e,indexes:t})=>t&&t.length>0?[]:[{label:Object(w.b)("index.plural"),path:e.pathname}])((function({indexes:e,classes:t,fetchIndexes:a,fetchClasses:n,match:l,history:s,location:o}){const i=l.params.dbPath,m=e&&e.length>0,u=Object(r.useState)(!0),d=Object(f.a)(u,2),p=d[0],h=d[1],E=Object(r.useState)(!1),g=Object(f.a)(E,2),y=g[0],v=g[1],O=Object(r.useState)(null),j=Object(f.a)(O,2),_=j[0],N=j[1];if(Object(r.useEffect)(()=>{h(!0),a({databasePath:i,onComplete:()=>h(!1)})},[i,a]),Object(r.useEffect)(()=>{m?N(_n(e)[0]):t||(v(!0),n({databasePath:i,onComplete:()=>v(!1)}))},[i,n,m,e,t]),!p&&!m&&!y)return c.a.createElement("div",{className:"card margin-top-4"},c.a.createElement(ca,{displayAction:!0,classes:t,databasePath:i||"root"}));if(_){const e={history:s,location:o,match:Object(b.a)({},l,{params:Object(b.a)({},l.params,{indexId:_.name})})};return c.a.createElement(Wn,e)}return c.a.createElement("div",{className:"section center"},Object(w.b)("loading.loading"))})));var er=Object(m.b)((e,{match:t})=>({classes:Qt(e,t.params.dbPath)}),{fetchClasses:Ht.fetchList,createIndex:$t.create})(ba(({location:e,match:t})=>[{label:Object(w.b)("index.plural"),path:E.indexes.index.path.replace(":dbPath*",t.params.dbPath)},{label:Object(w.b)("index.actions.new"),path:e.pathname}])((function({history:e,match:t,fetchClasses:a,classes:n,createIndex:l,location:s}){const o=t.params.dbPath,i=Object(r.useState)(!1),m=Object(f.a)(i,2),u=m[0],d=m[1],p=Object(r.useState)("simple"),b=Object(f.a)(p,2),h=b[0],g=b[1],y={name:"",unique:!1,serialized:!0,source:S.a.parse(s.search).classId||"",terms:[],values:[]};return Object(r.useEffect)(()=>{document.title="".concat(Object(w.b)("index.actions.new")," - Fauna")},[]),Object(r.useEffect)(()=>{a({databasePath:o})},[o,a]),c.a.createElement(ya,{activeTab:h,setActiveTab:g},c.a.createElement(kt,{tabs:c.a.createElement(va,{position:"right"},c.a.createElement(Oa,{id:"simple"},Object(w.b)("tabs.simple")),c.a.createElement(Oa,{id:"fql"},Object(w.b)("tabs.fql")))},Object(w.b)("index.actions.new")),c.a.createElement("div",{className:"padding-y-3"},c.a.createElement(Jn,{initialValues:y,databasePath:o,onSubmit:function(t){d(!0),l({values:t,databasePath:o,onComplete:(a,n)=>{n?d(!1):e.push(E.indexes.byId.path.replace(":indexId",t.name).replace(":dbPath*",o))}})},onCancel:function(){e.goBack()},loading:u,classes:n})))})));function tr({databasePath:e}){return c.a.createElement(st.b,{shadow:!0,title:"Create your first key",icon:c.a.createElement(y,{name:"key"}),action:c.a.createElement(L.a,{className:"btn btn-success",to:E.keys.new.path.replace(":dbPath*",e||"")},Object(w.b)("keys.actions.new")),description:c.a.createElement("div",{className:"container container--small"},c.a.createElement("p",null,"Access to the FaunaDB API uses secrets that correspond to access keys, which authenticate connections as having particular permissions."))})}var ar=a(120);var nr=ba(({location:e})=>[{label:"Security",path:e.pathname},{label:Object(w.b)("keys.plural"),path:e.pathname}])((function({location:e,match:t}){const a=Object(d.h)(),n=t.params.dbPath||"";ie.I(n);const l=Object(m.d)(),s=Object(ht.a)([n,"keys"],()=>ie.z()).data;return Object(r.useEffect)(()=>{document.title="Keys - Fauna"},[]),s?c.a.createElement(c.a.Fragment,null,c.a.createElement(kt,{className:"margin-bottom-4"},Object(w.b)("keys.plural"),c.a.createElement("div",{className:"content-header__links"},c.a.createElement(L.a,{to:E.keys.new.path.replace(":dbPath*",n),className:"btn btn-subtle-link"},c.a.createElement("span",{className:"fas fa-plus-circle"}),Object(w.b)("keys.actions.new")),c.a.createElement(L.a,{to:E.roles.index.path.replace(":dbPath*",n),className:"btn btn-subtle-link"},c.a.createElement("span",{className:"fas fa-users"}),"Manage roles"))),e.state&&e.state.newKey&&c.a.createElement("div",{className:"tip tip--warning margin-bottom-3"},c.a.createElement("div",{className:"tip__label"},c.a.createElement(y,{name:"exclamation-triangle",className:"margin-right-2"}),Object(w.b)("keys.messages.new.first")),c.a.createElement("div",{className:"tip__title","data-hj-suppress":!0},e.state.newKey.secret),c.a.createElement("p",{className:"tip__text margin-bottom-4"},Object(w.b)("keys.messages.new.second"))),0===s.length?c.a.createElement("div",{className:"card"},c.a.createElement(tr,{databasePath:n})):c.a.createElement("div",{className:"card-list"},c.a.createElement("div",{className:"card-list-header grid"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"label col width-small-30"},"Key Name/ID"),c.a.createElement("div",{className:"label col width-30 display-none display-small-block"},"Role"),c.a.createElement("div",{className:"label col width-20 display-none display-small-block"},Object(w.b)("database.child.name")),c.a.createElement("div",{className:"label col width-20 display-none display-small-block"}))),c.a.createElement("div",{className:"card-list-body"},s.map(e=>c.a.createElement("div",{key:e.ref.value.id,className:"card grid"},c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"text-ellipsis col width-small-30"},Object(ar.a)(e)),c.a.createElement("div",{className:"col width-small-30 display-none display-small-flex"},"string"===typeof e.role?e.role:e.role.value.id,"client"===e.role||"server-readonly"===e.role&&c.a.createElement(ut.a,{arrowFill:"transparent"},c.a.createElement(y,{className:"secondary",name:"exclamation-triangle"}),c.a.createElement("div",{className:"popover-content"},c.a.createElement("div",null,"The \u2018client\u2018 and \u2018server read-only\u2018 roles are targeted for deprecation. These roles can be replaced with user-defined roles. If you have any concerns about this, please"," ",c.a.createElement("a",{href:"mailto:product@fauna.com"},"contact us"),".")))),c.a.createElement("div",{className:"col width-small-20 text-ellipsis display-none display-small-flex"},e.database?e.database.value.id:"--"),c.a.createElement("div",{className:"col width-small-20"},c.a.createElement(v.a,{onClick:()=>{return t=e.ref,void l(Pa({content:Object(w.b)("keys.actions.confirmRevoke"),onOk:()=>{ie.E(t).then(()=>{l(Object(nn.showAlert)("Key revoked with success.")),Object(ht.b)([n,"keys"]);const e={pathname:E.keys.index.path.replace(":dbPath*",n||""),state:{}};a.replace(e)}).finally(()=>{l({type:"HIDE_MODAL"})})},onCancel:()=>l({type:"HIDE_MODAL"}),showOk:!0,showCancel:!0,okText:Object(w.b)("actions.revoke"),cancelText:Object(w.b)("actions.cancel")}));var t},size:"small",className:"btn-subtle-link margin-left-auto"},"Revoke Key"))))))))):c.a.createElement("div",{className:"loader"},c.a.createElement(it,null))}));Yt.values.Ref;const rr=[{id:"admin",name:"Admin"},{id:"server",name:"Server"}],cr=e=>e&&""!==e?(e=>rr.some(t=>t.id===e))(e)?e:new Yt.values.Ref(e,Yt.values.Native.ROLES):null,lr=e=>t=>{const a=t.resource;return a.collection===e||(a.index===e||a.function===e)};function sr(e){let t=e.value,a=e.onChange,n=e.dbPath,c=e.children,l=Object(h.a)(e,["value","onChange","dbPath","children"]);const s=Object(ht.a)([n,"roles"],()=>(ie.I(n),ie.G())).data;return r.createElement("select",Object.assign({value:t,onChange:function(e){a(e.currentTarget.value)},id:"roleId",name:"roleId"},l),s?r.createElement(r.Fragment,null,c,rr.map(e=>r.createElement("option",{key:e.name,value:e.id},e.name)),s.map(e=>r.createElement("option",{key:e.id,value:e.id},e.id))):r.createElement("option",{value:""},"Loading roles..."))}const or={name:"",database:"",roleId:"admin"};function ir({databasePath:e,onSubmit:t,onCancel:a,loading:n}){const r=Ut(e),l=Object(ht.a)([e,"databases"],()=>(ie.I(e),ie.p())).data,s=ne(or),o=s.formValues,i=s.handleChange,m=s.setFormValue,u=function(){const e=o.roleId;return{name:o.name,database:d(),role:cr(e)}}();function d(){if(!l)return null;return l.find(e=>e.id===o.database)||null}return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(u)}},c.a.createElement(ja,{id:"simple"},c.a.createElement("div",{className:"container container--xsmall"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"database",className:"required"},Object(w.b)("database.name")),c.a.createElement("select",{"data-hj-suppress":!0,value:o.database,onChange:i,id:"database",name:"database"},c.a.createElement("option",{value:""},r," (Current database)"),(l?l.map(e=>({id:e.id,name:e.id})):[{id:null,name:"Loading..."}]).map(e=>c.a.createElement("option",{key:e.id,value:e.id},e.id)))),c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"form-label--tooltip"},c.a.createElement("label",{htmlFor:"roleId",className:"required"},Object(w.b)("attributes.role")),c.a.createElement(ut.a,{position:"left",arrowFill:"transparent"},c.a.createElement(y,{className:"secondary",name:"question-circle"}),c.a.createElement("div",{className:"popover-content"},c.a.createElement("div",null,c.a.createElement("b",null,"Admin:")," ",Object(w.b)("tooltips.keyTypes.admin")),c.a.createElement("div",null,c.a.createElement("b",null,"Server:")," ",Object(w.b)("tooltips.keyTypes.server"))))),c.a.createElement(sr,{required:!0,dbPath:e,onChange:e=>m("roleId",e),value:o.roleId})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"name",className:"optional"},Object(w.b)("keys.name")," ",Object(w.b)("attributes.name")),c.a.createElement("input",{onChange:i,value:o.name,id:"name",name:"name",type:"text",autoFocus:!0})))),c.a.createElement(ja,{id:"fql"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:""},Object(w.b)("attributes.faunaData")),c.a.createElement(wa,{code:u}))),c.a.createElement("div",{className:"container container--xsmall"},c.a.createElement("div",{className:"form-actions"},c.a.createElement(v.a,{onClick:a,color:"secondary"},Object(w.b)("actions.cancel")),c.a.createElement(v.a,{type:"submit",color:"success",loading:n},Object(w.b)("actions.save")))))}ir.defaultProps={loading:!1};var mr=Object(d.k)(ir);const ur=e=>e.ref.value.id,dr=e=>e.reduce((e,t)=>Object(b.a)({},e,{[ur(t)]:t}),{}),pr=e=>{if(e)return e.items},br=e=>{const t=Object(m.d)();return{cacheData:Object(m.e)((e=>t=>{if(!e)return;if(e.single&&!e.id)throw new Error("To use cacheOptions.single you should provide cacheOptions.id both.");const a=e.namespace;return t.cache[a]?e.single&&e.id?t.cache[a].items[e.id]:Object.values(t.cache[a].items):void 0})(e),m.c),setCache:a=>{if(!e)return;const n=e.create,r=e.update,c=e.remove,l=e.single;return t(n||r||l?hr([a],e):c?Er(a,e):hr(a,e))}}},hr=(e,t)=>({type:"SET_CACHE_ITEMS",payload:{options:t,data:e}}),Er=(e,t)=>({type:"REMOVE_CACHE_ITEM",payload:{options:t,data:e}});function fr(e,t,a){const n=br(a),c=n.cacheData,l=n.setCache,s=Object(r.useState)(!1),o=Object(f.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)(c),d=Object(f.a)(u,2),p=d[0],b=d[1],h=Object(r.useState)(),E=Object(f.a)(h,2),g=E[0],y=E[1];return Object(r.useEffect)(()=>{m(!0),(t?e(...t):e()).then(e=>{a&&l(e),b(e)}).catch(y).finally(()=>m(!1))},[JSON.stringify(a)]),{loading:i,data:a?c:p,error:g}}function gr(e,t){const a=br(t).setCache,n=Object(r.useState)(!1),c=Object(f.a)(n,2),l=c[0],s=c[1];return{loading:l,runFetch:function(...n){return s(!0),e(...n).then(e=>(t&&a(e),e)).finally(()=>s(!1))}}}function yr(e,t){return t.flash[e]}Object(m.b)((e,{id:t})=>({message:yr(t,e)}),{removeFlash:function(e){return{type:"REMOVE_FLASH_MESSAGE",payload:{id:e}}}})((function({id:e,children:t,message:a,removeFlash:n}){return Object(r.useEffect)(()=>()=>n(e),[e,n]),t(a)}));var vr=ba(({location:e,match:t})=>{const a=t.params.dbPath||"";return[{label:Object(w.b)("security.title"),path:E.keys.index.path.replace(":dbPath*",t.params.dbPath)},{label:Object(w.b)("keys.plural"),path:E.keys.index.path.replace(":dbPath*",a)},{label:Object(w.b)("keys.actions.new"),path:e.pathname}]})((function({match:e,history:t}){const a=e.params.dbPath||"";ie.I(a);const n=Object(r.useState)("simple"),l=Object(f.a)(n,2),s=l[0],o=l[1],i=Object(m.d)(),u=gr(ie.m,{namespace:"".concat(a,"_keys"),create:!0}),d=u.runFetch,p=u.loading;return c.a.createElement(ya,{activeTab:s,setActiveTab:o},c.a.createElement(kt,{tabs:c.a.createElement(va,{position:"right"},c.a.createElement(Oa,{id:"simple"},Object(w.b)("tabs.simple")),c.a.createElement(Oa,{id:"fql"},Object(w.b)("tabs.fql"))),divider:!1},Object(w.b)("keys.actions.new")),c.a.createElement("div",{className:"padding-y-3"},c.a.createElement(mr,{onSubmit:function(e){d(e).then(e=>{i({type:"CREATE_FLASH_MESSAGE",payload:{id:"newKey",value:e}});const n={pathname:E.keys.index.path.replace(":dbPath*",a||""),state:{newKey:e}};t.push(n)}).catch(e=>{i(Object(nn.showAlert)(e.requestResult.responseContent,"error"))})},onCancel:t.goBack,databasePath:a,loading:p})))})),Or=a(134),jr=a.n(Or);function _r({databaseSecret:e,onImport:t,isLoading:a}){return c.a.createElement("div",{className:"card"},c.a.createElement(st.b,{shadow:!0,title:Object(w.b)("graphql.importTitle"),icon:c.a.createElement("span",null,c.a.createElement("img",{src:jr.a,alt:"GraphQL Icon"})),action:c.a.createElement(v.a,{onClick:t,loading:a,color:"success"},Object(w.b)("graphql.importSchema")),description:c.a.createElement("div",{className:"container container--small"},c.a.createElement("p",{className:"text-center"},Object(w.b)("graphql.importDescription")))}))}const wr=c.a.lazy(()=>Promise.resolve().then(a.bind(null,442)));function Nr(e){return c.a.createElement(r.Suspense,{fallback:c.a.createElement(c.a.Fragment,null,"Loading...")},c.a.createElement(wr,e))}function Cr({modal:e}){const t=e.show?"modal-show":"modal-hide";return r.createElement("div",{className:"modalOverlay ".concat(t)},r.createElement("div",{className:"modal"},r.createElement("section",{className:"modalMain"},r.createElement("span",{"data-hj-suppress":!0},e.content),r.createElement("div",{className:"modalActions"},r.createElement("button",{className:"btn",onClick:e.onCancel},e.cancelText),r.createElement("button",{className:"btn",onClick:e.onOk},e.okText)))))}var Sr=Object(m.b)((e,t)=>({modal:e.modal}))(Cr);function qr({accept:e}={}){const t=Object(r.useRef)(null);Object(r.useEffect)(()=>{t&&(t.current=document.createElement("input"),t.current.type="file",t.current.accept=e)},[e]);return{getFile:()=>new Promise((e,a)=>{const n=t.current;n&&(n.click(),n.onchange=()=>{const t=n.files[0];t&&(n.value="",e(t))})})}}const xr=e=>e.returnValue=!0;var kr=ba(({location:e})=>[{label:Object(w.b)("graphql.crumb"),path:e.pathname}])((function({match:e}){const t=e.params.dbPath||"",a=function(e=""){const t=W().data.secret;return"".concat(t,":").concat(e,":").concat("server")}(t),n=Object(r.useState)(),l=Object(f.a)(n,2),s=l[0],o=l[1],i=Object(r.useState)(!1),m=Object(f.a)(i,2),u=m[0],p=m[1],h=Object(r.useState)(!1),E=Object(f.a)(h,2),g=E[0],y=E[1],v=Object(r.useState)(!1),O=Object(f.a)(v,2),j=O[0],C=O[1],S=Object(r.useState)(!1),q=Object(f.a)(S,2),x=q[0],k=q[1],I=Object(r.useState)({active:!1}),P=Object(f.a)(I,2),T=P[0],D=P[1],R=qr({accept:".gql, .graphql"}).getFile,L=s&&s.data&&s.data.gql,A=u||j||g;function F(e,t,a={}){D({active:!0,message:e,level:t,details:a.details})}function U(){R().then(e=>{p(!0),Ua(e,{secret:a}).then(()=>{p(!1),vn.a.emit("GRAPHQL_SCHEMA_IMPORT_SUCCESS"),L||o(Object(b.a)({},s,{data:{gql:{}}}))}).catch(e=>{p(!1),F(Object(w.b)("graphql.importError"),"error",{details:e.response.data})})})}function B(){R().then(e=>{y(!0),Ua(e,{secret:a}).then(()=>{y(!1),V(),F(Object(w.b)("graphql.updateSuccess"),"success")}).catch(e=>{y(!1),F(Object(w.b)("graphql.updateError"),"error",{details:e.response.data})})})}function M(){k(!0)}function V(){const e=document.querySelector('.graphql-playground *[title="Reload Schema"]');e&&e.click()}return Object(r.useEffect)(()=>{const e=Bt(t),a=Ut(t)||"";ie.I(e),ie.o(a).then(o)},[t]),Object(r.useEffect)(()=>{document.title="".concat(Object(w.b)("graphql.pageTitle")," - Fauna")},[]),Object(r.useEffect)(()=>(A?window.addEventListener("beforeunload",xr):window.removeEventListener("beforeunload",xr,!1),()=>{window.removeEventListener("beforeunload",xr,!1)}),[A]),c.a.createElement(c.a.Fragment,null,c.a.createElement(kt,{actions:L?c.a.createElement(c.a.Fragment,null,c.a.createElement(_,{onClick:B,loading:g,label:Object(w.b)("graphql.updateSchema"),icon:"arrow-up"}),c.a.createElement(_,{onClick:M,loading:j,label:Object(w.b)("graphql.overrideSchema"),icon:"exchange-alt"})):null,divider:!1,className:"margin-bottom-4"},Object(w.b)("graphql.pageTitle")),s?L?c.a.createElement(Nr,{isLoading:A,databaseSecret:a}):c.a.createElement(_r,{onImport:U,databaseSecret:a,isLoading:u}):Object(w.b)("loading.simple"),c.a.createElement(Cr,{modal:{show:x,content:c.a.createElement("div",{className:"text-center"},c.a.createElement("b",{className:"danger"},Object(w.b)("graphql.overrideWarning")),c.a.createElement("br",null),Object(w.b)("graphql.overrideDurationWarning")),okText:Object(w.b)("graphql.override"),cancelText:Object(w.b)("actions.cancel"),onOk:function(){R().then(e=>{C(!0),k(!1),Ua(e,{secret:a,override:!0}).then(()=>{C(!1),V(),F(Object(w.b)("graphql.overrideSuccess"),"success")}).catch(e=>{C(!1),F(Object(w.b)("graphql.overrideError"),"error",{details:e.response.data})})})},onCancel:function(){k(!1)}}}),c.a.createElement(N,Object.assign({},T,{onClose:function(){D(Object(b.a)({},T,{active:!1}))}})),c.a.createElement(d.a,{when:A,message:Object(w.b)("graphql.overrideLeaveWarning")}))})),Ir=a(324),Pr=a.n(Ir);a(899);const Tr=e=>{const t=new Image,a=document.querySelector(e);if(a){const e=a.dataset.bgImage;t.onload=()=>{a.style.backgroundImage="url(".concat(t.src,")"),a.classList.add("loaded")},t.src=e,t.complete&&a.classList.add("cached")}return{cleanup(){t.onload=null}}},Dr=r.useEffect;function Rr(e){return Dr(()=>Tr(".bg-placeholder-sf").cleanUp),r.createElement("div",{className:"auth bg-placeholder-sf","data-bg-image":Pr.a},e.children)}const Lr=r.useEffect;function Ar(e){return Lr(()=>Tr(".bg-placeholder-sf").cleanUp),r.createElement("div",{className:"auth bg-placeholder-sf","data-bg-image":Pr.a},r.createElement("div",{className:"center fillScreen"},r.createElement("div",{className:"panel--redirect"},r.createElement("div",null,"Redirecting..."))),e.children)}var Fr=Object(m.b)(e=>({alert:e.alert}),Object(b.a)({},nn))((function({alert:e,hideAlert:t}){return c.a.createElement(N,Object.assign({},e,{onClose:t}))}));class Ur extends r.Component{constructor(...e){super(...e),this.state={open:!1},this.handleClickOutside=()=>{this.setState({open:!1})},this.toggleDropdown=()=>{this.setState({open:!this.state.open})}}render(){const e=this.props,t=e.children,a=e.position,n=e.size,c=e.renderItems;return r.createElement("div",{onClick:this.toggleDropdown,className:"\n        dropdown\n        dropdown-".concat(String(a),"\n        dropdown-").concat(String(n),"\n        ").concat(String(this.state.open&&"active"))},r.createElement("div",{className:"dropdown-value"},t),r.createElement("div",{className:"dropdown-items"},c()))}}Ur.defaultProps={position:"left"};const Br=e=>r.createElement("div",Object.assign({},e,{className:"dropdown-item"}));var Mr=Object(nt.a)(Ur);function Vr(){const e=Object(r.useState)(null),t=Object(f.a)(e,2),a=t[0],n=t[1];return Object(r.useEffect)(()=>{ie.J().then(()=>{n("success")}).catch(()=>{n("warning")})},[]),a?c.a.createElement("div",{className:"center",title:"success"===a?Object(w.b)("status.active"):Object(w.b)("status.unstable")},c.a.createElement("span",{className:"badge ".concat(a)}),c.a.createElement("span",{className:"link-text"},Object(w.b)("status.name"))):c.a.createElement(c.a.Fragment,null)}var Hr=a(1156);const Wr=({steps:e,startOn:t,onCompleteStep:a})=>{const n=Object(r.useState)({currentStepIndex:t||0,completedStepIndexes:[],status:"idle"}),c=Object(f.a)(n,2),l=c[0],s=l.currentStepIndex,o=l.completedStepIndexes,i=l.status,m=c[1];Object(r.useEffect)(()=>{a&&a({currentStepIndex:s,completedStepIndexes:o,status:i})},[o]);const u=t=>{const a=t===e-1,n=!h(t);m(e=>{const r=e.completedStepIndexes;return n?{currentStepIndex:a?t:t+1,completedStepIndexes:r.concat(t),status:a?"finished":"started"}:e})},d=t=>t+1<e&&h(t),p=e=>e>0,h=e=>o.includes(e);return{isStepActive:e=>s===e,isStepCompleted:h,completeStep:u,canPreviousStep:p,previousStep:()=>{m(e=>{const t=e.currentStepIndex;return p(t)?Object(b.a)({},e,{currentStepIndex:t-1}):e})},canNextStep:d,nextStep:()=>{m(e=>{const t=e.currentStepIndex;return d(t)?Object(b.a)({},e,{currentStepIndex:t+1}):e})},goToStep:e=>{m(t=>Object(b.a)({},t,{currentStepIndex:e}))},currentStepIndex:s,completeStepIf:(e,t)=>{t&&u(e)},completedStepIndexes:o,status:i,setWizardState:m,isFinished:"finished"===i}};const Gr={[Sa.START]:({setView:e,onClose:t,drag:a,title:n})=>c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"tutorial__header",ref:a},c.a.createElement("div",{className:"tutorial__title"},n),c.a.createElement("div",{className:"tutorial__actions"},c.a.createElement("button",{className:"tutorial__action-button",title:"Close tutorial",onClick:t},c.a.createElement("i",{className:"fas fa-times"})))),c.a.createElement("div",{className:"tutorial__content"},c.a.createElement("p",null,"If you exit this tutorial before finishing, you must restart it from the beginning. That said, it should only take a few minutes to complete."),c.a.createElement(v.a,{color:"success",block:!0,onClick:()=>{e(Sa.LIST)}},"Ok, Let\u2018s start"))),[Sa.LIST]:({isStepActive:e,isStepCompleted:t,steps:a,setView:n,onClose:r,drag:l,title:s,goToStep:o})=>c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"tutorial__header",ref:l},c.a.createElement("div",{className:"tutorial__title"},s),c.a.createElement("div",{className:"tutorial__actions"},c.a.createElement("button",{className:"tutorial__action-button",title:"Close tutorial",onClick:r},c.a.createElement("i",{className:"fas fa-times"})))),c.a.createElement("ul",{className:"tutorial__list"},a.map((a,r)=>{const l=e(r)?"active":"";return c.a.createElement("li",{key:r},c.a.createElement("button",{title:"Read more about ".concat(a.title),disabled:!t(r)&&!e(r),className:"tutorial__list__item ".concat(l),onClick:()=>{o(r),n(Sa.WIZARD)}},c.a.createElement("div",{className:"step__title"},c.a.createElement("div",{className:"step__number"},r+1),a.title),c.a.createElement("i",{className:"fas fa-arrow-right"})))}))),[Sa.WIZARD]:e=>{let t=e.steps,a=e.setView,n=e.onClose,l=e.drag,s=Object(h.a)(e,["steps","setView","onClose","drag"]);const o=s.canPreviousStep,i=s.previousStep,m=s.canNextStep,u=s.nextStep,d=s.currentStepIndex,p=s.title,b=t[d],E=b.component,g=((e=!1)=>{const t=Object(r.useState)(e),a=Object(f.a)(t,2),n=a[0],c=a[1];return[n,Object(r.useCallback)(()=>c(e=>!e),[])]})(!0),y=Object(f.a)(g,2),v=y[0],O=y[1],j=Object(r.useMemo)(()=>{return e=d+1,a=t.length,100*e/a;var e,a},[d,t.length]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"tutorial__header",ref:l},c.a.createElement("div",{className:"step__title"},c.a.createElement("button",{title:"Back to the list",className:"step__number",onClick:()=>a(Sa.LIST)},d+1),b.title),c.a.createElement("div",{className:"tutorial__actions"},v&&c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{title:"Close tutorial",className:"tutorial__action-button",onClick:O},c.a.createElement("i",{className:"fas fa-angle-double-right"})),c.a.createElement("button",{className:"tutorial__action-button",title:"Close tutorial",onClick:n},c.a.createElement("i",{className:"fas fa-times"}))),!v&&c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{title:"Open tutorial",className:"tutorial__action-button",onClick:O},c.a.createElement("i",{className:"fas fa-angle-double-left"})),c.a.createElement("button",{className:"tutorial__action-button",title:"Close tutorial",onClick:n},c.a.createElement("i",{className:"fas fa-times"}))))),v&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"tutorial__content"},c.a.createElement(E,s)),c.a.createElement("div",{className:"progress-bar progress-bar--xs"},c.a.createElement("div",{style:{width:"".concat(j,"%")},className:"progress-bar-fill"})),c.a.createElement("div",{className:"tutorial__controls"},c.a.createElement("button",{title:"Previous",disabled:!o(d),className:"tutorial__previous",onClick:i},c.a.createElement("i",{className:"fas fa-arrow-left"})),c.a.createElement("div",{className:"tutorial__state-info"},p," ",c.a.createElement("span",{className:"tutorial__divider"},"|")," Step ",d+1," of"," ",t.length),c.a.createElement("button",{title:"Next",disabled:!m(d),className:"tutorial__next",onClick:u},c.a.createElement("i",{className:"fas fa-arrow-right"})))))},[Sa.FINISH]:({steps:e,onClose:t,drag:a,title:n,congratulations:c,goToStep:l,setView:s})=>r.createElement(r.Fragment,null,r.createElement("div",{className:"tutorial__header",ref:a},r.createElement("div",{className:"tutorial__title"},n),r.createElement("div",{className:"tutorial__actions"},r.createElement("button",{className:"tutorial__action-button",title:"Close tutorial",onClick:t},r.createElement("i",{className:"fas fa-times"})))),r.createElement("div",{className:"tutorial__content"},r.createElement("ul",{className:"tutorial__list tutorial__list--completed"},e.map((e,t)=>r.createElement("li",{key:t},r.createElement("button",{onClick:()=>{l(t),s(Sa.WIZARD)},className:"tutorial__list__item"},r.createElement("div",{className:"step__title"},r.createElement("div",{className:"step__number"},r.createElement(y,{name:"check"})),e.title))))),r.createElement("p",null,"Congratulations! You\u2019ve completed the ",n," tutorial.")),r.createElement("div",{className:"tutorial__footer"},r.createElement("div",{className:"tutorial__footer__container"},c))),[Sa.LOADING]:({isStepActive:e,isStepCompleted:t,steps:a,setView:n,onClose:r,drag:l})=>c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"tutorial__header",ref:l},c.a.createElement("div",{className:"tutorial__title"},"Basic CRUD"),c.a.createElement("div",{className:"tutorial__actions"},c.a.createElement("button",{className:"tutorial__action-button",title:"Close tutorial",onClick:r},c.a.createElement("i",{className:"fas fa-times"})))),c.a.createElement("div",{className:"tutorial__loading"},c.a.createElement("img",{src:j.a,alt:"Loading spinner"}))),[Sa.RESUME]:({setView:e,onClose:t,drag:a,title:n,setWizardState:r,loadedState:l})=>c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"tutorial__header",ref:a},c.a.createElement("div",{className:"tutorial__title"},n),c.a.createElement("div",{className:"tutorial__actions"},c.a.createElement("button",{className:"tutorial__action-button",title:"Close tutorial",onClick:t},c.a.createElement("i",{className:"fas fa-times"})))),c.a.createElement("div",{className:"tutorial__content"},c.a.createElement("p",null,"It looks like you\u2018ve started this tutorial before. Would you like to start over or just navigate between the steps?"),c.a.createElement("div",{className:"button-group"},c.a.createElement(v.a,{color:"secondary",block:!0,onClick:()=>{r(()=>({status:l.status,currentStepIndex:l.current_step_index,completedStepIndexes:l.completed_step_indexes})),e(Sa.LIST)}},"Navigate"),c.a.createElement(v.a,{color:"primary",block:!0,onClick:()=>{r(e=>Object(b.a)({},e,{currentStepIndex:0,completedStepIndexes:[]})),e(Sa.LIST)}},"Start over"))))};var Qr=Object(d.k)(({id:e,steps:t,startOn:a,onClose:n,position:c,title:l,congratulations:s,location:o})=>{const i=Object(r.useState)(Sa.LOADING),m=Object(f.a)(i,2),u=m[0],d=m[1],p=Object(r.useState)(null),h=Object(f.a)(p,2),E=h[0],g=h[1],y=Gr[u],v=Wr({startOn:a,onCompleteStep:t=>((e,t)=>{ie.H({completed_step_indexes:e.completedStepIndexes,current_step_index:e.currentStepIndex,status:e.status},t)})(t,e),steps:t.length}),O=Object(Hr.a)({item:Object(b.a)({type:"TUTORIAL"},c),collect:e=>({isDragging:e.isDragging()})}),j=Object(f.a)(O,3),_=j[0].isDragging,w=j[1],N=j[2];return Object(r.useEffect)(()=>{ie.x(e).then(({data:e})=>{if("idle"===e.status)throw new Error("Tutorial not started.");g(e);const t=S.a.parse(o.search).skipResumeView;d(t?Sa.START:Sa.RESUME)}).catch(()=>{d(Sa.START)})},[e]),Object(r.useEffect)(()=>{v.isFinished&&d(Sa.FINISH)},[v.isFinished]),_?r.createElement("div",{ref:w}):r.createElement("div",{className:"tutorial tutorial--".concat(u),ref:N,style:c},r.createElement(y,Object.assign({loadedState:E,title:l,drag:w,steps:t,setView:d,onClose:n,congratulations:s},v)))});var zr=({isOpen:e,onClose:t})=>{const a=xa(),n=a.tutorials,r=a.openTutorial;return c.a.createElement(x,{isOpen:e},c.a.createElement(k,{onClose:t},"Console Tutorials"),c.a.createElement(I,null,c.a.createElement("p",null,"Welcome to FaunaDB. You can access these tutorials again at any time via the help menu in the upper right."),c.a.createElement("ul",{className:"list list--stack"},n.map((e,a)=>c.a.createElement("li",{key:e.id},c.a.createElement("button",{className:"list__item list__item--link",onClick:()=>{r(e.id),t()}},a+1,". ",e.title))))))};var Yr=({onStart:e})=>{const t=function(e,t){const a=Object(r.useState)(()=>{try{const a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(a){return console.error(a),t}}),n=Object(f.a)(a,2),c=n[0],l=n[1];return[c,t=>{try{const a=t instanceof Function?t(c):t;l(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(a){console.error(a)}}]}("isNewUser",!0),a=Object(f.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(!1),o=Object(f.a)(s,2),i=o[0],m=o[1];Object(r.useEffect)(()=>{n&&(m(!0),l(!1))},[n,l]);const u=()=>m(e=>!e);return c.a.createElement(x,{isOpen:i,onClose:u,className:"tutorials-dialog"},c.a.createElement("h2",{className:"tutorials-dialog__title"},"New to FaunaDB Cloud?"),c.a.createElement(_,{onClick:()=>{e(),u()},className:"tutorials-dialog__action",icon:"arrow-right",label:"Start tutorial",color:"success",title:"Start tutorial"}),c.a.createElement("button",{onClick:u,className:"tutorials-dialog__skip",title:"Skip tutorial"},"Skip tutorial"))};const Kr=()=>{const e=pt("enterprise").isEnabled();function t(){V(),window.location.replace(E.auth.signIn.path)}return r.createElement("div",{className:"info"},r.createElement(Mr,{position:"right",renderItems:()=>r.createElement(r.Fragment,null,!e&&r.createElement(r.Fragment,null,r.createElement("a",{className:"dropdown-item",href:"".concat(String("https://app.fauna.com"),"/settings")},r.createElement("span",null,"Account Settings")),r.createElement("a",{className:"dropdown-item",href:"".concat(String("https://app.fauna.com"),"/billing")},r.createElement("span",null,"Billing")),r.createElement("a",{className:"dropdown-item",href:"".concat(String("https://app.fauna.com"),"/billing/upgrade")},r.createElement("span",null,"Upgrade"))),r.createElement(Br,{onClick:t},Object(w.b)("auth.actions.logout")))},r.createElement(y,{name:"user-circle"}),r.createElement("span",{className:"fas fa-chevron-down"})))};var Jr=Object(d.k)(()=>{const e=Object(r.useState)(!1),t=Object(f.a)(e,2),a=t[0],n=t[1],c=pt("enterprise").isEnabled();return r.createElement(r.Fragment,null,r.createElement("div",{id:"header"},r.createElement("div",{id:"wrapper"},r.createElement("div",{id:"grid-logo"},r.createElement(L.a,{to:"/",className:"home-link"},r.createElement("span",{className:"logo-wrap"},r.createElement("img",{alt:"Fauna logo",src:Ce.a,className:"fauna-logo-desktop"})),r.createElement("span",{className:"crumbs"},"FaunaDB Console"))),r.createElement("div",{id:"grid-info",className:"margin-left-auto"},r.createElement("div",{className:"info status-link"},c?r.createElement(Vr,null):r.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://status.fauna.com"},r.createElement(Vr,null))),r.createElement("div",{className:"info resources-link"},r.createElement(Mr,{position:"right",renderItems:()=>r.createElement(r.Fragment,null,r.createElement("button",{className:"dropdown-item",onClick:()=>n(!0)},"Console tutorials"),r.createElement("a",{className:"dropdown-item",target:"_blank",rel:"noopener noreferrer",href:"https://community-invite.fauna.com/"},Object(w.b)("info.community")),r.createElement("a",{className:"dropdown-item",target:"_blank",rel:"noopener noreferrer",href:"https://docs.fauna.com/fauna/current/"},Object(w.b)("info.doc")),r.createElement("a",{className:"dropdown-item",target:"_blank",rel:"noopener noreferrer",href:"https://docs.fauna.com/fauna/current/drivers/"},"Drivers"),r.createElement("a",{className:"dropdown-item",target:"_blank",rel:"noopener noreferrer",href:"".concat(String("https://fauna.com"),"/blog/introducing-fauna-shell")},"Fauna Shell"),r.createElement(L.a,{to:"/downloads",className:"dropdown-item"},"Downloads"))},r.createElement("span",{className:"fas fa-question-circle"}),r.createElement("span",{className:"fas fa-chevron-down"}))),r.createElement(Kr,null)))),r.createElement(Fr,null),r.createElement(Yr,{onStart:()=>{n(!0)}}),r.createElement(zr,{isOpen:a,onClose:()=>n(!1)}),r.createElement(Sr,null))});var $r=Object(d.k)((function(){const e=Object(d.j)().dbPath,t=void 0===e?"":e;return c.a.createElement("nav",{className:"sidebar"},c.a.createElement(L.b,{exact:!0,to:E.db.byId.path.replace(":dbPath*",t)},c.a.createElement(y,{name:"database"}),c.a.createElement("span",{className:"display-none display-xsmall-block"},Object(w.b)("database.overview"))),c.a.createElement(L.b,{to:E.classes.index.path.replace(":dbPath*",t),isActive:(e,t)=>!!Object(d.g)(t.pathname,E.classes.byId)||!!Object(d.g)(t.pathname,E.classes.index)},c.a.createElement(y,{name:"table"}),c.a.createElement("span",{className:"display-none display-xsmall-block"},Object(w.b)("class_.plural"))),c.a.createElement(L.b,{to:E.indexes.index.path.replace(":dbPath*",t),isActive:(e,t)=>!!Object(d.g)(t.pathname,E.indexes.byId)||!!Object(d.g)(t.pathname,E.indexes.index)},c.a.createElement(y,{name:"list"}),c.a.createElement("span",{className:"display-none display-xsmall-block"},Object(w.b)("index.plural"))),c.a.createElement(L.b,{to:E.functions.index.path.replace(":dbPath*",t),isActive:(e,t)=>!!Object(d.g)(t.pathname,E.functions.byId)||!!Object(d.g)(t.pathname,E.functions.index)},c.a.createElement(y,{name:"code"}),c.a.createElement("span",{className:"display-none display-xsmall-block"},"Functions")),c.a.createElement(L.b,{exact:!0,to:E.webshell.index.path.replace(":dbPath*",t)},c.a.createElement(y,{name:"terminal"}),c.a.createElement("span",{className:"display-none display-xsmall-block"},Object(w.b)("query.plural"))),pt("graphql").isEnabled()&&c.a.createElement(L.b,{exact:!0,to:E.graphql.index.path.replace(":dbPath*",t)},c.a.createElement("i",null,c.a.createElement("img",{src:jr.a,alt:"GraphQL Icon"})),c.a.createElement("span",{className:"display-none display-xsmall-block"},"GraphQL")),c.a.createElement(L.b,{exact:!0,to:E.keys.index.path.replace(":dbPath*",t)},c.a.createElement(y,{name:"user-lock"}),c.a.createElement("span",{className:"display-none display-xsmall-block"},Object(w.b)("security.title"))))}));function Zr(){return c.a.createElement("div",{className:"footer"},c.a.createElement("ul",{className:"links"},c.a.createElement("li",null,Object(w.b)("footer.copyright",[(new Date).getFullYear().toString()])),c.a.createElement("li",null,c.a.createElement("a",{href:"".concat(String("https://www2.fauna.com/terms"))},Object(w.b)("footer.terms"))),c.a.createElement("li",null,c.a.createElement("a",{href:"".concat(String("https://www2.fauna.com/privacy"))},Object(w.b)("footer.privacy")))))}var Xr=a(80);var ec=Object(d.k)((function({children:e,history:t,location:a}){const n=Object(r.useState)(!1),c=Object(f.a)(n,2),l=c[0],s=c[1],o=window.sessionStorage.getItem("blocked_path"),i=l&&!o;return Object(r.useEffect)(()=>{(function(){var e=Object(Fa.a)(Le.a.mark((function e(){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Y(),e.next=4,ie.c().catch(e=>{if(!Object(Xr.b)(e))throw new Error(e)});case 4:s(!0),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),n=a.pathname,r=a.search,c=a.hash,window.sessionStorage.setItem("blocked_path",n+r+c),t.push(E.auth.signIn.path);case 11:case"end":return e.stop()}var n,r,c}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()},[t,a.hash,a.pathname,a.search]),Object(r.useEffect)(()=>{l&&o&&(window.sessionStorage.removeItem("blocked_path"),t.push(o+(a.search||"")))},[o,l,t,a.search]),i?e:null}));const tc={isLoading:!1,data:void 0},ac={databaseName:""};var nc=Object(d.k)(({location:e,history:t})=>{const a=Object(r.useState)(!1),n=Object(f.a)(a,2),l=n[0],s=n[1],o=Object(r.useState)(tc),m=Object(f.a)(o,2),u=m[0],d=m[1],p=Object(r.useState)(!1),b=Object(f.a)(p,2),h=b[0],g=b[1],y=Object(r.useState)(),O=Object(f.a)(y,2),j=O[0],_=O[1],N=ne(ac),C=N.formValues,q=N.handleChange,P=N.setFormValue;Object(r.useEffect)(()=>{const t=S.a.parse(e.hash).auth;t&&(s(!0),d({isLoading:!0}),(e=>{const t=W();return i.a.get("".concat("https://auth.console.fauna.com","/addons/netlify"),{params:{token:e},headers:{secret:t.data.secret}})})(t).then(e=>{P("databaseName",e.data.site_id),d({isLoading:!1,data:e.data})}).catch(e=>{e.request&&404===e.request.status?_(Object(w.b)("addons.netlify.notFoundError")):_(Object(w.b)("addons.netlify.genericError")),d({isLoading:!1})}))},[]);const T=Object(r.useCallback)(()=>{s(!l)},[l]),D=Object(r.useCallback)(a=>{a.preventDefault();const n=S.a.parse(e.hash).auth;g(!0),((e,t)=>{const a=W();return i.a.post("".concat("https://auth.console.fauna.com","/addons/netlify"),{token:t,name:e},{headers:{secret:a.data.secret}})})(C.databaseName,n).then(()=>{g(!1),t.push(E.home.path,{hash:void 0}),window.location.reload()}).catch(()=>g(!1))},[C.databaseName,t,e.hash]),R=Object(r.useCallback)(()=>j?c.a.createElement("p",null,j):u.isLoading||!u.data?c.a.createElement("p",null,Object(w.b)("loading.simple")):c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,Object(w.b)("addons.netlify.importDatabaseMessage1")+" ",c.a.createElement("b",null,c.a.createElement("a",{target:"blank",href:u.data.site_url},u.data.site_url))," "+Object(w.b)("addons.netlify.importDatabaseMessage2")),c.a.createElement("form",{className:"form",onSubmit:D},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"databaseName"},Object(w.b)("database.fields.name")),c.a.createElement("input",{value:C.databaseName,onChange:q,type:"text",name:"databaseName",id:"databaseName",required:!0})),c.a.createElement("div",{className:"form-group"},c.a.createElement(v.a,{loading:h,block:!0,color:"success",size:"large",type:"submit"},h?Object(w.b)("addons.netlify.importingDatabase"):Object(w.b)("addons.netlify.importDatabase"))))),[j,C.databaseName,q,D,h,u.data,u.isLoading]);return c.a.createElement(x,{isOpen:l},c.a.createElement(k,{onClose:T},Object(w.b)("addons.netlify.importNetlifyDatabase")),c.a.createElement(I,null,R()))});a(900);function rc({children:e,sidebar:t=$r}){const a=t;return r.createElement(ec,null,r.createElement(nc,null),r.createElement("div",{className:"dashboard"},r.createElement(Jr,null),r.createElement(pa.Outlet,{outletId:"breadcrumb"}),r.createElement("div",{className:"content"},t&&r.createElement(a,null),r.createElement("div",{className:"content__main"},r.createElement("div",{className:"content__left-panel"},r.createElement(pa.Outlet,{outletId:"leftPanel"})),r.createElement("div",{className:"content__main-panel"},e,r.createElement(Zr,null))))))}var cc=Object(m.b)(e=>({alert:e.alert}))(ba(({location:e})=>[{label:Object(w.b)("query.plural"),path:e.pathname}])((function({match:e,alert:t}){const a=function(){try{return JSON.parse(window.localStorage.getItem(e.params.dbPath))}catch(t){return null}}(),n=a&&a.codeValue||"Paginate(Indexes())",l=Object(r.useState)(n),s=Object(f.a)(l,2),o=s[0],i=s[1],m=Object(r.useState)(a&&a.queryResult),u=Object(f.a)(m,2),d=u[0],p=u[1],b=Object(r.useState)(a&&a.inlineMessage),h=Object(f.a)(b,2),E=h[0],g=h[1];function y({data:e}){e?Array.isArray(e)?p({data:e}):p({data:[e]}):g({message:Object(w.b)("query.messages.success"),error:!1})}function O(e){p({data:null}),g({message:Object(Xr.a)(e),error:!0})}return Object(r.useEffect)(()=>{!function(){const t={codeValue:o,queryResult:d,inlineMessage:E};window.localStorage.setItem(e.params.dbPath,JSON.stringify(t))}()},[d,E,o,e.params.dbPath]),c.a.createElement("div",{style:{paddingTop:25}},c.a.createElement("div",{"data-hj-suppress":!0,style:{height:"300px"}},c.a.createElement(ln,{height:"100%",value:o,onChange:e=>i(e)})),c.a.createElement("div",{style:{padding:15,backgroundColor:"#282a36",display:"flex",justifyContent:"end"}},c.a.createElement(v.a,{onClick:function(){ie.I(e.params.dbPath),g(null),Object(on.b)(o).then(y).catch(O)},color:"primary"},Object(w.b)("query.actions.run"))),!E&&d&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"section no-padding-bottom"},c.a.createElement("div",{className:"section-topbar no-margin"},c.a.createElement("h4",null,Object(w.b)("query.labels.results")),c.a.createElement("span",{className:"on-right"},d.data&&d.data.length))),c.a.createElement(gn,{documents:d.data})),E&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"section no-padding-bottom"},c.a.createElement("div",{className:"section-topbar no-margin"},c.a.createElement("h4",null,Object(w.b)("query.labels.results")))),c.a.createElement("div",{className:"section"},c.a.createElement("div",null,E.message))))})));function lc({databasePath:e}){return c.a.createElement("div",{className:"card"},c.a.createElement(st.b,{shadow:!0,title:Object(w.b)("role.firstRole"),icon:c.a.createElement(y,{name:"user-lock"}),action:c.a.createElement(L.a,{className:"btn btn-success",to:E.roles.new.path.replace(":dbPath*",e||"")},Object(w.b)("role.newCustomRole"))}))}var sc=ba(({location:e,match:t})=>[{label:Object(w.b)("security.title"),path:E.keys.index.path.replace(":dbPath*",t.params.dbPath)},{label:Object(w.b)("role.title"),path:e.pathname}])((function({match:e}){const t=e.params.dbPath,a=Object(ht.a)([t,"roles"],()=>(ie.I(t),ie.G())).data;return c.a.createElement(c.a.Fragment,null,c.a.createElement(kt,{className:"margin-bottom-4"},Object(w.b)("role.title"),c.a.createElement(L.a,{to:E.roles.new.path.replace(":dbPath*",t),className:"btn btn-subtle-link"},c.a.createElement("span",{className:"fas fa-plus-circle"}),Object(w.b)("role.newRole"))),c.a.createElement("section",{className:"margin-bottom-3"},c.a.createElement("div",{className:"card-list"},c.a.createElement("div",{className:"card-list-header"},c.a.createElement("div",{className:"label"},Object(w.b)("role.customRoleTitle"))),c.a.createElement("div",{className:"card-list-body"},!a&&"Loading...",a&&0===a.length&&c.a.createElement(lc,{databasePath:t}),a&&a.length>0&&a.map(e=>c.a.createElement("div",{className:"card",key:e.id},c.a.createElement("div",{className:"card-body grid center"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},e.id),c.a.createElement("div",{className:"col col--auto"},c.a.createElement(L.a,{to:E.roles.edit.path.replace(":dbPath*",t).replace(":roleId",e.id),className:"btn btn-small btn-icon"},c.a.createElement(y,{name:"cog",className:"muted"})))))))))),c.a.createElement("section",null,c.a.createElement("ul",{className:"list list-group"},c.a.createElement("li",{className:"label"},Object(w.b)("role.builtInRoles")),rr.map(e=>c.a.createElement("li",{key:e.id},c.a.createElement("div",{className:"grid"},c.a.createElement("div",{className:"row row--no-wrap"},c.a.createElement("div",{className:"col"},e.id),c.a.createElement("div",{className:"col col--auto"},c.a.createElement(ut.a,{arrowFill:"transparent",placement:"bottom"},c.a.createElement(y,{className:"muted",name:"question-circle"}),c.a.createElement("div",{className:"popover-content"},c.a.createElement("p",null,Object(w.b)("tooltips.keyTypes.".concat(e.id)))))))))))))})),oc=a(662),ic=a.n(oc),mc=a(325),uc=a.n(mc);function dc({privilege:e,actions:t,onRemove:a,onChange:n,isEditable:l}){const s=Object(r.useState)(!1),o=Object(f.a)(s,2),i=o[0],m=o[1],u=Object(r.useState)(null),d=Object(f.a)(u,2),p=d[0],h=d[1],E=Object(r.useState)(null),g=Object(f.a)(E,2),O=g[0],j=g[1],_=i?"angle-down":"angle-right",N=p&&e.actions[p],C=e.resource.collection?e.resource.collection.id:"schemas";function S(t,a){n(Object(b.a)({},e,{actions:Object(b.a)({},e.actions,{[t]:a})}))}function q(e){p&&S(p,e)}function x(){p&&S(p,!1)}function k(t){if(!O)return;let a="code",n="muted";const r=e.actions[t],s=r!==O[t];return"boolean"!==typeof r&&"undefined"!==typeof r||(r?(a="check",n="success"):(a="times",n="danger")),c.a.createElement(y,{onClick:()=>function(t){const a=e.actions[t];if(bc(a))return h(t),void(!i&&m(!0));l&&S(t,!a)}(t),name:a,className:"".concat(n," clickable ").concat(s?"dirty":""),mode:"fas"})}return Object(r.useEffect)(()=>{j(e.actions)},[]),c.a.createElement("div",{className:"card card-role"},c.a.createElement("div",{className:"card-role__header"},c.a.createElement("div",{className:"card-role__name width-80 clickable",onClick:function(){m(!i)}},c.a.createElement(y,{name:_}),e.resource.value.id),l&&c.a.createElement("div",{className:"card-role__remove width-20 display-small-none"},c.a.createElement(v.a,{className:"btn-icon"},c.a.createElement(y,{name:"trash muted"})))),c.a.createElement("div",{className:"card-role__options"},Object.keys(t).map((function(e){let t="width-15";return pc.includes(e)&&(t="width-20 width-small-15"),c.a.createElement("div",{key:e,className:"card-role__option ".concat(t)},k(e))})),l&&c.a.createElement("div",{className:"card-role__remove width-small-10 display-none display-small-block"},c.a.createElement(v.a,{className:"btn-icon",onClick:()=>a(e)},c.a.createElement(y,{name:"trash muted"})))),i&&c.a.createElement("div",{className:"card-role__code"},c.a.createElement("div",{className:"card-role__code__tabs"},Object.keys(t).map((function(e){let t="width-15";pc.includes(e)&&(t="width-20 width-small-15");const a=function(e){return e===p}(e),n="\n      card-role__code__tab\n      clickable\n      ".concat(a?"is-active":"","\n      ").concat(t,"\n    ");return c.a.createElement("div",{key:e,className:n,onClick:()=>function(e){h(e)}(e)},c.a.createElement(y,{name:"code"}))})),l&&c.a.createElement("div",{className:"card-role__code__tab width-small-10 display-none display-small-block"})),!p&&c.a.createElement("div",{className:"card-role__code__editor card-role__code__editor--empty"},c.a.createElement("p",null,"Click in the code icon tab to see the related predicate.")),p&&Object.keys(t).map(e=>p!==e?c.a.createElement("div",{key:e}):c.a.createElement("div",{className:"card-role__code__editor",key:e,"data-hj-suppress":!0},c.a.createElement(ln,{value:bc(N)?N:Ec[C][p],onChange:q,height:"224px",readOnly:!l}),bc(N)&&l&&c.a.createElement(v.a,{onClick:x,color:"transparent card-role__code__btn-clear"},Object(w.b)("actions.clear"))))))}const pc=["unrestricted_read","history_read","history_write"],bc=e=>"string"===typeof e||"object"===typeof e,hc={read:'//Edit the template below to add a predicate condition\n// Only read your own data.\n/*\nLambda("ref", Equals(\n  Identity(), // logged in user\n  Select(["data", "owner"], Get(Var("ref")))\n))\n*/',write:'// Only write to your own data but\n// don\'t change the owner of the data.\n/*\nLambda(\n  ["oldData", "newData"],\n  And(\n    Equals(Identity(), Select(["data", "owner"], Var("oldData"))),\n    Equals(\n      Select(["data", "owner"], Var("oldData")),\n      Select(["data", "owner"], Var("newData"))\n    )\n  )\n)\n*/',create:'// Only write to your own data but\n// only create data to youself.\n/*\nLambda("values", Equals(Identity(), Select(["data", "owner"], Var("values"))))\n*/',delete:'//Edit the template below to add a predicate condition\n// Only delete your own data.\n/*\nLambda("ref", Equals(\n  Identity(), // logged in user\n  Select(["data", "owner"], Get(Var("ref")))\n))\n*/',history_read:'//Edit the template below to add a predicate condition\n// Only see history of your own data.\n/*\nLambda("ref", Equals(\n  Identity(), // logged in user\n  Select(["data", "owner"], Get(Var("ref")))\n))\n*/',history_write:'//Edit the template below to add a predicate condition\n// Only update history of your own data but\n// don\'t change the owner of the data.\n/*\nLambda(\n  ["ref", "ts", "action", "data"],\n  And(\n    Equals(\n      Identity(), // logged in user\n      Select(["data", "owner"], Get(Var("ref")))\n    ),\n    Equals(\n      Select(["data", "owner"], Var("data")),\n      Select(["data", "owner"], Get(Var("ref")))\n    )\n  )\n)\n*/',unrestricted_read:'//Edit the template below to add a predicate condition\n// Only allow admin users to have unrestricted access to the collection references\n/*\nLambda("_", Select(["data", "isAdmin"], Get(Identity())))\n*/'},Ec={collections:hc,indexes:{unrestricted_read:'//Edit the template below to add a predicate condition\n// Provides unrestricted read to indexe\'s covered values if quering your own data.\n/*\nLambda("terms", Equals(\n  Var("terms"),\n  [Identity()], // logged in user\n))\n*/',read:'//Edit the template below to add a predicate condition\n// Only read if querying your own data.\n/*\nLambda("terms", Equals(\n  Var("terms"),\n  [Identity()], // logged in user\n))\n*/'},functions:{call:'//Edit the template below to add a predicate condition\n// Only call the function for your own data.\n//Lambda("args", Equals(Var("args"), [Identity()]))'},schemas:hc};var fc=({onChange:e,resourceOptions:t=[],placeholderText:a,emptyOptionsText:n=Object(w.b)("role.noResourcesAvailable")})=>{const r=t.length>0,l=r?a:n;return c.a.createElement("div",{className:"select select--with-button"},c.a.createElement("select",{onChange:e,disabled:!r},c.a.createElement("option",{value:"",key:"",disable:"true"},l),t.map(e=>c.a.createElement("option",{key:e,value:e},e))))};const gc=["History Read","History Write","Unrestricted"];function yc({privileges:e,resources:t,title:a,titlePlaceholder:n,onChange:r,actions:l,filter:s}){const o=function(){if(!t)return;const a=e.map(e=>e.resource.value.id),n=t.map(e=>e.name);return uc()(n,a)}(),i=Object.values(l),m=e.filter(s),u=!!r;function d(t){r(e.filter(e=>!e.resource.equals(t.resource)))}function p(t){r&&r(e.map(e=>e.resource.equals(t.resource)?t:e))}return c.a.createElement("section",{className:"section"},c.a.createElement("div",{className:"section__header"},c.a.createElement("div",{className:"section__control"},c.a.createElement("h3",{className:"section__title"},a),c.a.createElement(fc,{onChange:function(a){!function(a){if(!t)return;const n=t.find(e=>e.name===a);if(!n)return;r(e.concat({resource:n.ref,actions:Object.keys(l).reduce((e,t)=>Object(b.a)({},e,{[t]:!1}),{})}))}(a.currentTarget.value)},resourceOptions:o,placeholderText:Object(w.b)("role.addResource",[n])})),m.length>0&&c.a.createElement("div",{className:"section__labels section__labels--right"},i.map((function(e){e=String(e);let t="width-15";return gc.includes(e)&&(t="width-20 width-small-15"),c.a.createElement("div",{key:e,className:"label ".concat(t)},e)})),u&&c.a.createElement("div",{className:"label width-small-10 display-none display-small-block"}))),m.length>0&&c.a.createElement("div",{className:"section__body"},c.a.createElement("div",{className:"card-list"},c.a.createElement("div",{className:"card-list-body"},m.map((e,t)=>c.a.createElement(dc,{key:t,privilege:e,actions:l,onRemove:d,onChange:p,isEditable:u}))))))}function vc({memberClass:e,isEditable:t,onRemove:a,onChange:n}){const l=Object(r.useState)(!1),s=Object(f.a)(l,2),o=s[0],i=s[1],m=o?"angle-down":"angle-right";return c.a.createElement("div",{className:"card card-role"},c.a.createElement("div",{className:"card-role__header card-role__header--inline"},c.a.createElement("div",{className:"card-role__name clickable",onClick:function(){i(!o)}},c.a.createElement(y,{name:m}),e.resource.value.id),t&&c.a.createElement("div",{className:"card-role__remove"},c.a.createElement(v.a,{className:"btn-icon",onClick:function(){a(e)}},c.a.createElement(y,{name:"trash muted"})))),o&&c.a.createElement("div",{className:"card-role__code"},c.a.createElement("div",{className:"card-role__code__editor","data-hj-suppress":!0},c.a.createElement(ln,{readOnly:!t,value:e.predicate||Oc,onChange:function(t){n(Object(b.a)({},e,{predicate:t}))},height:"224px"}))))}const Oc='//Edit the template below to add a predicate condition\n// Only vip users are members\n//Lambda("ref", Select(["data", "vip"], Get(Var("ref"))))\n';function jc({classes:e,membership:t,onChange:a}){const n=function(){if(!e)return[];const a=e.map(e=>e.name),n=t.map(e=>e.resource.value.id);return uc()(a,n)}(),r=!!a;function l(e){a&&a(t.map(t=>t.resource.equals(e.resource)?e:t))}function s(e){a(t.filter(t=>!t.resource.equals(e.resource)))}return c.a.createElement("section",{className:"section"},c.a.createElement("div",{className:"section__header"},c.a.createElement("div",{className:"section__control"},c.a.createElement(fc,{onChange:function(n){!function(n){if(!e||""===n)return;const r=e.find(e=>e.name===n);if(!r)return;a(t.concat({resource:r.ref,predicate:null}))}(n.currentTarget.value)},resourceOptions:n,placeholderText:Object(w.b)("role.addMemberCollection")}))),t.length>0&&c.a.createElement("div",{className:"section__body"},c.a.createElement("div",{className:"card-list"},c.a.createElement("div",{className:"card-list-body"},t.map(e=>c.a.createElement(vc,{key:e.resource.value.id,memberClass:e,onRemove:s,onChange:l,isEditable:r}))))))}const _c=/Query\((.*)\)/;function wc(e){return e.match(_c)?e:"Query(".concat(e,")")}function Nc(e){if(null!==e)return"string"===typeof e?{"@code":wc(e)}:e}function Cc({roleId:e,databasePath:t,onDelete:a}){const n=Object(m.d)();function r(){n({type:"HIDE_MODAL"})}function l(){ie.r(e).then(()=>{n({type:"HIDE_MODAL"}),a()})}return c.a.createElement(_,{color:"muted",onClick:function(){n(Pa({content:Object(w.b)("role.confirmDelete").replace(":roleId",e),onOk:l,onCancel:r,showOk:!0,showCancel:!0,okText:Object(w.b)("role.removeRole"),cancelText:Object(w.b)("actions.cancel")}))},label:Object(w.b)("actions.remove"),icon:"trash"})}const Sc=Yt.values.Native,qc=Sc.COLLECTIONS,xc=Sc.INDEXES,kc=Sc.FUNCTIONS,Ic=e=>!e.resource.value.collection;function Pc({initialValues:e,isLoading:t,databasePath:a,onSubmit:n,onCancel:l,onDelete:s,roleId:o}){const i=Object(m.d)(),u=ne(e),d=u.formValues,p=u.handleChange,h=u.setFormValues,E=Object(r.useState)("privileges"),g=Object(f.a)(E,2),y=g[0],O=g[1],j=Object(r.useState)("simple"),_=Object(f.a)(j,2),N=_[0],C=_[1],S=function(e){return Object(b.a)({},e,{membership:(a=e.membership,a.map(e=>Object(b.a)({},e,{predicate:Nc(e.predicate)}))),privileges:(t=e.privileges,t.map(e=>Object(b.a)({},e,{actions:Object.keys(e.actions).reduce((t,a)=>Object(b.a)({},t,{[a]:Nc(e.actions[a])}),{})})))});var t,a}(d),q=fr(ie.d,null,{namespace:"".concat(a,"_classes")}).data,x=fr(ie.y,null,{namespace:"".concat(a,"_indexes")}).data,k=fr(ie.v,null,{namespace:"".concat(a,"_functions")}).data,I=[{name:"collections",ref:new Yt.values.Ref("collections")},{name:"indexes",ref:new Yt.values.Ref("indexes")},{name:"databases",ref:new Yt.values.Ref("databases")},{name:"roles",ref:new Yt.values.Ref("roles")},{name:"functions",ref:new Yt.values.Ref("functions")},{name:"keys",ref:new Yt.values.Ref("keys")}];function P(e){h(Object(b.a)({},d,{privileges:ic()(e,(e,t)=>e.resource.equals(t.resource))}))}return c.a.createElement(ya,{activeTab:N,setActiveTab:C},c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(d)}},c.a.createElement(kt,{className:"role__form__content-header",divider:!1,tabs:c.a.createElement(va,{position:"right"},c.a.createElement(Oa,{id:"simple"},Object(w.b)("tabs.simple")),c.a.createElement(Oa,{id:"fql"},Object(w.b)("tabs.fql")))},c.a.createElement("input",{type:"text",name:"name",value:d.name,onChange:p,required:!0})),c.a.createElement(ja,{id:"simple"},c.a.createElement(ya,{activeTab:y,setActiveTab:O},c.a.createElement(va,null,c.a.createElement(Oa,{id:"privileges"},Object(w.b)("role.privileges")),c.a.createElement(Oa,{id:"membership"},Object(w.b)("role.membership"))),c.a.createElement("div",{className:"padding-y-3"},c.a.createElement(ja,{id:"privileges"},c.a.createElement(yc,{title:Object(w.b)("class_.plural"),titlePlaceholder:Object(w.b)("class_.name"),resources:q,privileges:d.privileges,filter:lr(qc),onChange:P,actions:{read:Object(w.b)("role.actions.read"),write:Object(w.b)("role.actions.write"),create:Object(w.b)("role.actions.create"),delete:Object(w.b)("role.actions.delete"),history_read:Object(w.b)("role.actions.historyRead"),history_write:Object(w.b)("role.actions.historyWrite"),unrestricted_read:Object(w.b)("role.actions.unrestricted")}}),c.a.createElement(yc,{title:Object(w.b)("index.plural"),titlePlaceholder:Object(w.b)("index.name"),resources:x,privileges:d.privileges,filter:lr(xc),onChange:P,actions:{unrestricted_read:Object(w.b)("role.actions.unrestricted"),read:Object(w.b)("role.actions.read")}}),c.a.createElement(yc,{title:Object(w.b)("function_.title"),titlePlaceholder:Object(w.b)("function_.name"),resources:k,privileges:d.privileges,filter:lr(kc),onChange:P,actions:{call:Object(w.b)("role.actions.call")}}),c.a.createElement(yc,{title:Object(w.b)("schema.title"),titlePlaceholder:Object(w.b)("schema.name"),resources:I,privileges:d.privileges,filter:Ic,onChange:P,actions:{read:Object(w.b)("role.actions.read"),write:Object(w.b)("role.actions.write"),create:Object(w.b)("role.actions.create"),delete:Object(w.b)("role.actions.delete"),history_read:Object(w.b)("role.actions.historyRead"),history_write:Object(w.b)("role.actions.historyWrite")}})),c.a.createElement(ja,{id:"membership"},c.a.createElement(jc,{classes:q,membership:d.membership,onChange:function(e){h(Object(b.a)({},d,{membership:e}))}}))))),c.a.createElement(ja,{id:"fql"},c.a.createElement("div",{className:"form-group padding-y-3"},c.a.createElement("label",{htmlFor:""},Object(w.b)("attributes.faunaData")),c.a.createElement(wa,{code:S}))),c.a.createElement("div",{className:"form-actions container container--xsmall"},c.a.createElement(v.a,{type:"button",color:"secondary",onClick:function(){if(!(JSON.stringify(d)!==JSON.stringify(e)))return l();i(Pa({content:Object(w.b)("role.discardChangesConfirm"),onOk:()=>{l(),i({type:"HIDE_MODAL"})},onCancel:()=>i({type:"HIDE_MODAL"}),showOk:!0,showCancel:!0,okText:Object(w.b)("actions.discardChanges"),cancelText:Object(w.b)("actions.cancel")}))}},Object(w.b)("actions.discardChanges")),c.a.createElement(v.a,{type:"submit",color:"success",loading:t},Object(w.b)("actions.save"))),o&&c.a.createElement("div",{className:"container container--xsmall"},c.a.createElement("hr",{className:"margin-top-4 margin-bottom-3"}),c.a.createElement(Cc,{databasePath:a,roleId:o,onDelete:s}))))}function Tc(e){return Object(b.a)({},e,{membership:(a=e.membership,a.map(e=>Object(b.a)({},e,{predicate:Dc(e.predicate)}))),privileges:(t=e.privileges,t.map(e=>Object(b.a)({},e,{actions:Object.keys(e.actions).reduce((t,a)=>Object(b.a)({},t,{[a]:Dc(e.actions[a])}),{})})))});var t,a}function Dc(e){if(null!==e)return"string"===typeof e?Object(on.a)(wc(e)):e}const Rc={name:"MyCustomRole",privileges:[],membership:[]};var Lc=ba(({location:e,match:t})=>[{label:Object(w.b)("security.title"),path:E.keys.index.path.replace(":dbPath*",t.params.dbPath)},{label:Object(w.b)("role.title"),path:E.roles.index.path.replace(":dbPath*",t.params.dbPath)},{label:Object(w.b)("role.newRole"),path:e.pathname}])((function({match:e,history:t}){const a=e.params.dbPath||"";ie.I(a);const n=Object(r.useState)(!1),l=Object(f.a)(n,2),s=l[0],o=l[1],i=Object(m.d)();function u(){return(u=Object(Fa.a)(Le.a.mark((function e(n){var r;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,r=Tc(n),e.next=5,ie.n(r);case 5:t.push(E.roles.index.path.replace(":dbPath*",a)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),o(!1),i(Object(nn.showAlert)(Object(Xr.a)(e.t0),"error"));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return c.a.createElement(Pc,{databasePath:a,initialValues:Rc,isLoading:s,onSubmit:function(e){return u.apply(this,arguments)},onCancel:function(){t.goBack()}})}));function Ac(e){return e?Array.isArray(e)?e.map(e=>Object(b.a)({},e,{predicate:Bc(e.predicate)})):[Object(b.a)({},e,{predicate:Bc(e.predicate)})]:[]}function Fc(e){return Array.isArray(e)?e.map(Uc):[Uc(e)]}function Uc(e){return Object(b.a)({},e,{actions:Object.keys(e.actions).reduce((t,a)=>Object(b.a)({},t,{[a]:Bc(e.actions[a])}),{})})}function Bc(e){return"object"===typeof e?function(e){const t=e.match(_c);return t?t[1]:e}(Object(sn.a)(e)):e}var Mc=e=>Object(b.a)({},e,{membership:Ac(e.membership),privileges:Fc(e.privileges)});const Vc=Yt.values.Native,Hc=Vc.COLLECTIONS,Wc=Vc.INDEXES,Gc=Vc.FUNCTIONS,Qc=e=>!e.resource.value.collection;var zc=ba(({location:e,match:t})=>[{label:Object(w.b)("security.title"),path:E.keys.index.path.replace(":dbPath*",t.params.dbPath)},{label:Object(w.b)("role.title"),path:E.roles.index.path.replace(":dbPath*",t.params.dbPath)},{label:t.params.roleId,path:e.pathname}])((function({match:e,history:t}){const a=e.params.dbPath||"";ie.I(a);const n=Object(m.d)(),l=Object(r.useState)("privileges"),s=Object(f.a)(l,2),o=s[0],i=s[1],u=Object(r.useState)("simple"),d=Object(f.a)(u,2),p=d[0],b=d[1],h=e.params.roleId,g=fr(ie.F,[h],{namespace:"".concat(a,"_roles"),single:!0,id:h}).data,O=gr(ie.r,{namespace:"".concat(a,"_roles"),remove:!0,id:h}).runFetch;function j(){n({type:"HIDE_MODAL"})}function _(){O(h).then(()=>{n({type:"HIDE_MODAL"}),t.push(E.roles.index.path.replace(":dbPath*",a))})}if(!g)return c.a.createElement("div",null,Object(w.b)("loading.simple"));const N=Mc(g);return c.a.createElement(ya,{activeTab:p,setActiveTab:b},c.a.createElement(kt,{divider:!1,tabs:c.a.createElement(va,{position:"right"},c.a.createElement(Oa,{id:"simple"},Object(w.b)("tabs.simple")),c.a.createElement(Oa,{id:"fql"},Object(w.b)("tabs.fql")))},h,c.a.createElement(L.a,{to:E.roles.edit.path.replace(":dbPath*",a).replace(":roleId",h),className:"btn btn-subtle-link"},c.a.createElement(y,{name:"cog"}),Object(w.b)("actions.edit")),c.a.createElement(v.a,{color:"subtle-link",onClick:function(){n(Pa({content:Object(w.b)("role.confirmDelete").replace(":roleId",h),onOk:_,onCancel:j,showOk:!0,showCancel:!0,okText:Object(w.b)("role.removeRole"),cancelText:Object(w.b)("actions.cancel")}))}},c.a.createElement(y,{name:"trash"}),Object(w.b)("actions.delete"))),c.a.createElement(ja,{id:"simple"},c.a.createElement(ya,{activeTab:o,setActiveTab:i},c.a.createElement(va,null,c.a.createElement(Oa,{id:"privileges"},Object(w.b)("role.privileges")),c.a.createElement(Oa,{id:"membership"},Object(w.b)("role.membership"))),c.a.createElement("div",{className:"padding-y-3"},c.a.createElement(ja,{id:"privileges"},c.a.createElement(yc,{title:Object(w.b)("class_.plural"),titlePlaceholder:Object(w.b)("class_.name"),privileges:N.privileges,filter:lr(Hc),actions:{read:Object(w.b)("role.actions.read"),write:Object(w.b)("role.actions.write"),create:Object(w.b)("role.actions.create"),delete:Object(w.b)("role.actions.delete"),history_read:Object(w.b)("role.actions.historyRead"),history_write:Object(w.b)("role.actions.historyWrite"),unrestricted_read:Object(w.b)("role.actions.unrestricted")}}),c.a.createElement(yc,{title:Object(w.b)("index.plural"),titlePlaceholder:Object(w.b)("index.name"),privileges:N.privileges,filter:lr(Wc),actions:{unrestricted_read:Object(w.b)("role.actions.unrestricted"),read:Object(w.b)("role.actions.read"),history_read:Object(w.b)("role.actions.historyRead")}}),c.a.createElement(yc,{title:Object(w.b)("function_.title"),titlePlaceholder:Object(w.b)("function_.name"),privileges:N.privileges,filter:lr(Gc),actions:{call:Object(w.b)("role.actions.call")}}),c.a.createElement(yc,{title:Object(w.b)("schema.title"),titlePlaceholder:Object(w.b)("schema.name"),privileges:N.privileges,filter:Qc,actions:{read:Object(w.b)("role.actions.read"),write:Object(w.b)("role.actions.write"),create:Object(w.b)("role.actions.create"),delete:Object(w.b)("role.actions.delete"),history_write:Object(w.b)("role.actions.historyWrite")}})),c.a.createElement(ja,{id:"membership"},c.a.createElement(jc,{membership:N.membership}))))),c.a.createElement(ja,{id:"fql"},c.a.createElement("div",{className:"form-group padding-y-3"},c.a.createElement("label",{htmlFor:""},Object(w.b)("attributes.faunaData")),c.a.createElement(wa,{code:g}))))}));var Yc=ba(({location:e,match:t})=>[{label:Object(w.b)("security.title"),path:E.keys.index.path.replace(":dbPath*",t.params.dbPath)},{label:Object(w.b)("role.title"),path:E.roles.index.path.replace(":dbPath*",t.params.dbPath)},{label:Object(w.b)("role.editTitle"),path:e.pathname}])((function({match:e,history:t}){const a=e.params.dbPath||"",n=e.params.roleId||"",l=Object(r.useState)(!1),s=Object(f.a)(l,2),o=s[0],i=s[1],u=Object(m.d)(),d=Object(ht.a)([a,"roles",n],()=>(ie.I(a),ie.F(n))).data;function p(){return(p=Object(Fa.a)(Le.a.mark((function e(r){var c;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.prev=1,c=Tc(r),e.next=5,ie.P(n,c);case 5:r.name!==n&&t.push(E.roles.edit.path.replace(":dbPath*",a).replace(":roleId",r.name)),i(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),i(!1),u(Object(nn.showAlert)(Object(Xr.a)(e.t0),"error"));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}if(!d)return c.a.createElement("div",null,"Loading...");const b=Mc(d);return c.a.createElement(Pc,{databasePath:a,initialValues:b,isLoading:o,onSubmit:function(e){return p.apply(this,arguments)},onCancel:function(){t.goBack()},roleId:n,onDelete:function(){t.push(E.roles.index.path.replace(":dbPath*",a))}})})),Kc=a(675);var Jc=function({data:e,onRender:t}){const a=function(){let t="";e.length?e.forEach(e=>{const a=e.metrics;if(t+="".concat(e.query,"\n"),e.error)t+="error: ".concat(e.error,"\n\n");else if(t+="".concat(e.result,"\n\n"),a&&Object.keys(a).length){const e=">> Time elapsed: ".concat(a.queryTime,"ms");t+="".concat(e,"\n\n")}}):t=" ";return a=t,a.replace(/\\n/g,"\r\n").replace(/\\"/g,'"');var a}(),n=e.map(e=>e.metrics);return c.a.createElement("div",{className:"ace-wrapper"},c.a.createElement(dn,{value:a,className:"ace-webshell",theme:"ace-webshell",showGutter:!0,useWorker:!1,metrics:n,onRender:t}))};const $c=e=>({editor:e,shell:[],history:[],pointer:0});const Zc=(e,t)=>{let a=0;switch(t.type){case"setEditor":return Object(b.a)({},e,{editor:t.value});case"setShell":return Object(b.a)({},e,{shell:t.value});case"addToShell":return Object(b.a)({},e,{shell:[...e.shell,t.value]});case"clearShell":return Object(b.a)({},e,{shell:[]});case"addHistoryEntry":const n=e.history[e.history.length-1],r=t.value===n?[...e.history]:[...e.history,t.value];return Object(b.a)({},e,{history:r,pointer:e.history.length});case"moveBackHistory":return a=0===e.pointer?0:e.pointer-1,Object(b.a)({},e,{editor:e.history[a],pointer:a});case"moveForwardHistory":return a=e.pointer>=e.history.length-1?e.pointer:e.pointer+1,Object(b.a)({},e,{editor:e.history[a],pointer:a});default:throw new Error('No action "'.concat(t.type,'" found for webshell reducer.'))}};function Xc(){return"MacIntel"===navigator.platform?c.a.createElement("small",null,c.a.createElement("strong",null,"Cmd + return")," to run \xa0 \xa0 ",c.a.createElement("strong",null,"Cmd + up/down")," to navigate query history"):c.a.createElement("small",null,c.a.createElement("strong",null,"Ctrl + enter")," to run \xa0 \xa0 ",c.a.createElement("strong",null,"Ctrl + up/down")," to navigate query history")}var el=Object(m.b)(e=>({alert:e.alert}))(ba(({location:e})=>[{label:Object(w.b)("query.plural"),path:e.pathname}])((function({match:e}){const t=e.params.dbPath,a=qr({accept:".txt, .fql"}).getFile,n=Object(r.useRef)(null);let l=null;const s=Object(r.useState)(!1),o=Object(f.a)(s,2),i=o[0],m=o[1],u=Object(w.b)("webshell.initQuery"),d=function(e,t,a,n=null){const c=Object(r.useReducer)(t,a,t=>{const a=JSON.parse(localStorage.getItem(e));return null!==a?a:null!==n?n(t):t});return Object(r.useEffect)(()=>{localStorage.setItem(e,JSON.stringify(c[0]))},[c,e]),c}("webshellState_".concat(t),Zc,u,$c),p=Object(f.a)(d,2),b=p[0],h=p[1];function E(){h({type:"clearShell"})}function g(){const t=l.current.editor.getValue();if(t){let a;const n=[];m(!0),h({type:"addHistoryEntry",value:t}),ie.I(e.params.dbPath,{observer:function(){var e=Object(Fa.a)(Le.a.mark((function e(t){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.responseHeaders;case 2:a=e.sent,n.push(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});const r=t.split(";").filter(e=>e.trim().length>0).map(e=>e.trim());(function(e){const t=e.map(e=>e());return Promise.all(t).then(e=>e)})(function(e){return e.map(e=>()=>Object(on.c)(e))}(r)).then(e=>{const a=function(e){const t={queryBytesIn:0,queryBytesOut:0,queryTime:0,readOps:0,writeOps:0,storageBytesRead:0,storageBytesWrite:0,transactionRetries:0};return e.forEach(e=>{for(const a in e)if(e.hasOwnProperty(a)){const n=e[a];switch(a){case"x-query-bytes-in":t.queryBytesIn+=parseInt(n);break;case"x-query-bytes-out":t.queryBytesOut+=parseInt(n);break;case"x-query-time":t.queryTime+=parseInt(n);break;case"x-read-ops":t.readOps+=parseInt(n);break;case"x-write-ops":t.writeOps+=parseInt(n);break;case"x-storage-bytes-read":t.storageBytesRead+=parseInt(n);break;case"x-storage-bytes-write":t.storageBytesWrite+=parseInt(n);break;case"x-txm-retries":t.transactionRetries+=parseInt(n)}}}),t}(n);vn.a.emit("WEBSHELL_QUERY_SUCCESS",{results:e,queries:r}),O(r,e,t,a)}).catch(e=>{!function(e,t,a){let n="";try{t.requestResult&&t.requestResult.responseContent&&t.requestResult.responseContent.errors?t.requestResult.responseContent.errors.forEach(e=>{n+="".concat(e.code,"\n").concat(e.description,"\n"),e.position.length&&(n+="position: ".concat(JSON.stringify(e.position),"\n")),e.failures&&(n+=e.failures.map(e=>"reason: ".concat(JSON.stringify(e))).join("\n"))}):n+=t.message}catch(r){n+=t.message}O(e,[{error:!0,message:n.trim()}],a,{})}(r,e,t)})}}function y(e){return e.map(e=>e.error?{error:e.message}:e)}function O(e,t,a,n){const r=function(e,t,a){if(1===e.length){const n=e[0];return n.error?{query:t+"\n",error:n.message}:{query:t+"\n",result:Object(sn.a)(n),metrics:a}}return{query:t+"\n",result:Object(sn.a)(e).includes('"error": true')?Object(sn.a)(y(e)):Object(sn.a)(e),metrics:a}}(t,a,n);h({type:"addToShell",value:r}),m(!1)}function j(){const e=t.replace(/[^a-z0-9//_-]/gi,"").replace("/","-"),a=JSON.stringify(b.shell).replace(/\\n/g,"\r\n").replace(/\\"/g,'"'),n=document.createElement("a"),r=new Blob([a],{type:"text/plain"});n.href=URL.createObjectURL(r),n.download="".concat(e,".fql"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}return Object(r.useEffect)(()=>{b.shell.list&&Array.isArray(b.shell.list)&&h({type:"setShell",value:b.shell.list})},[h,b.shell.list]),Object(r.useEffect)(()=>{document.title="".concat(Object(w.b)("query.plural")," ").concat(t," - Fauna")},[t]),Object(r.useEffect)(()=>{const e=e=>{h({type:"setEditor",value:e})};return vn.a.on("WEBSHELL_SET_QUERY",e),()=>vn.a.off("WEBSHELL_SET_QUERY",e)},[h,b.editor]),Object(r.useEffect)(()=>{l&&l.current&&l.current.editor.resize()},[l]),c.a.createElement(c.a.Fragment,null,c.a.createElement(kt,{actions:c.a.createElement(c.a.Fragment,null,c.a.createElement(_,{onClick:E,label:Object(w.b)("webshell.clear"),icon:"undo"}),c.a.createElement(_,{onClick:j,label:Object(w.b)("webshell.download"),icon:"download"})),divider:!1},Object(w.b)("webshell.pageTitle")),c.a.createElement(Kc.a,{sizes:[75,25],minSize:50,gutterSize:10,gutterAlign:"center",dragInterval:1,direction:"vertical",cursor:"ns-resize",className:"query--wrapper",onDrag:()=>function(e){e&&e.current&&e.current.editor.resize()}(l)},c.a.createElement("div",{className:"query--history","data-hj-suppress":!0},b.shell&&c.a.createElement(Jc,{data:b.shell,onRender:()=>{n.current.scrollIntoView({behavior:"smooth"})}}),c.a.createElement("div",{id:"scroll-to",ref:n})),c.a.createElement("div",{className:"query--editor","data-hj-suppress":!0},c.a.createElement(ln,{height:"100%",value:b.editor,onChange:function(e){h({type:"setEditor",value:e})},onMount:function(e){l=e},autoFocus:!0,commands:[{name:"executeQuery",bindKey:{win:"Ctrl-Enter",mac:"Cmd-Enter"},exec:()=>{g()}},{name:"navigatePreviousCommand",bindKey:{win:"Ctrl-Up",mac:"Cmd-Up"},exec:()=>{h({type:"moveBackHistory"})}},{name:"navigateNextCommand",bindKey:{win:"Ctrl-Down",mac:"Cmd-Down"},exec:()=>{h({type:"moveForwardHistory"})}}]}))),c.a.createElement("div",{className:"webshell-layout"},c.a.createElement("div",{className:"webshell-query"},c.a.createElement("div",{className:"webshell-toolbar"},c.a.createElement("div",{className:"webshell-toolbar-buttons"},c.a.createElement(v.a,{loading:i,onClick:g,color:"success",disabled:!b.editor},Object(w.b)("query.actions.run")),c.a.createElement(_,{onClick:function(e){a().then(e=>{const t=new FileReader;t.onload=function(e){const t=e.target.result;h({type:"setEditor",value:t})},t.readAsText(e)})},label:Object(w.b)("webshell.openfile"),icon:"upload"})),c.a.createElement(Xc,null)))))})));var tl=()=>{const e=Object(d.j)().dbPath;return c.a.createElement("div",{className:"card margin-top-4"},c.a.createElement(st.b,{shadow:!0,title:"Create first function",icon:c.a.createElement(y,{name:"code"}),description:c.a.createElement("div",{className:"container container--small"},c.a.createElement("p",null,"Functions are great to improve code reusability and avoid large data transfer.")),action:c.a.createElement(L.a,{to:E.functions.new.path.replace(":dbPath*",e),className:"btn btn-success"},"New function")}))};const al={name:"",body:'Query(Lambda("x", Add(Var("x"), Var("x"))))',roleId:""};var nl=({initialValues:e,onSubmit:t,isLoading:a,onCancel:n,dbPath:l})=>{const s=ne(e||al),o=s.formValues,i=s.handleChange,m=s.setFormValue,u=Object(r.useMemo)(()=>({name:o.name,role:cr(o.roleId),body:{"@code":o.body}}),[o.body,o.name,o.roleId]);return c.a.createElement("form",{action:"",onSubmit:e=>{e.preventDefault(),t(o)}},c.a.createElement(ja,{id:"simple"},c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"container container--xsmall"},c.a.createElement("label",{className:"required",htmlFor:"name"},"Function Name"),c.a.createElement("input",{onChange:i,value:o.name,id:"name",name:"name",type:"text",required:!0,autoFocus:!0}))),c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"container container--xsmall"},c.a.createElement("label",{className:"optional",htmlFor:"roleId"},"Role"),c.a.createElement(sr,{dbPath:l,onChange:e=>m("roleId",e),value:o.roleId||""},c.a.createElement("option",{value:""},"None")))),c.a.createElement("div",{className:"form-group","data-hj-suppress":!0},c.a.createElement("label",{className:"required",htmlFor:"name"},"Function Body"),c.a.createElement(ln,{value:o.body,onChange:e=>m("body",e)}))),c.a.createElement(ja,{id:"fql"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:""},Object(w.b)("attributes.faunaData")),c.a.createElement(wa,{code:u}))),c.a.createElement("div",{className:"form-actions container container--xsmall"},n&&c.a.createElement(v.a,{onClick:n,color:"secondary"},Object(w.b)("actions.cancel")),c.a.createElement(v.a,{type:"submit",color:"success",loading:a},Object(w.b)("actions.save"))))};var rl=()=>c.a.createElement(c.a.Fragment,null,c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement("a",{role:"presentation",href:"!#"},c.a.createElement("div",{className:"placeholder placeholder--block placeholder-dark placeholder--text placeholder--w-md"})))),c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement("a",{role:"presentation",href:"!#"},c.a.createElement("div",{className:"placeholder placeholder--block placeholder-dark placeholder--text placeholder--w-md"})))),c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement("a",{role:"presentation",href:"!#"},c.a.createElement("div",{className:"placeholder placeholder--block placeholder-dark placeholder--text placeholder--w-md"})))));var cl=({selectedId:e})=>{const t=Object(d.j)().dbPath,a=Object(ht.a)([t,"functions"],()=>(ie.I(t),ie.v())).data;return c.a.createElement("div",{className:"scrollList"},c.a.createElement("table",{className:"table-card no-table-labels table--no-border "},c.a.createElement("tbody",null,a?a.map(a=>c.a.createElement("tr",{key:a.name,className:"".concat(e===a.name?"selected":"")},c.a.createElement("td",null,c.a.createElement(L.a,{to:E.functions.byId.path.replace(":dbPath*",t).replace(":functionId",a.name),"data-hj-suppress":!0},a.name)))):c.a.createElement(rl,null))))};var ll=ba(({location:e,match:t,id:a})=>{const n=t.params,r=n.functionId,c=void 0===r?a:r,l=n.dbPath;return[{label:"Functions",path:E.functions.index.path.replace(":dbPath*",l)},{label:c,path:e.pathname}]})(({id:e})=>{const t=Object(r.useState)("simple"),a=Object(f.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(!1),o=Object(f.a)(s,2),i=o[0],u=o[1],p=Object(r.useState)(!1),b=Object(f.a)(p,2),h=b[0],g=b[1],y=Object(d.j)(),v=y.dbPath,O=y.functionId,j=void 0===O?e:O,N=Object(d.h)(),C=Object(m.d)(),S=Object(ht.a)([j,v,"function"],(e,t)=>(Object(ie.I)(t),Object(ie.w)(e)),{revalidateOnFocus:!1}).data,q=Object(r.useMemo)(()=>{var e;if(S)return{name:S.name,body:S.body.toString(),roleId:S.role?(e=S.role,e instanceof Yt.values.Ref?e.id:e):void 0}},[S]),x=function(){var e=Object(Fa.a)(Le.a.mark((function e(t){var a;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(Object(nn.hideAlert)()),u(!0),Object(ie.I)(v),e.prev=3,e.next=6,Object(ie.N)(j,{name:t.name,body:Object(on.a)(t.body),role:cr(t.roleId)});case 6:a=e.sent,Object(ht.c)([v,"functions"]),Object(ht.b)([j,v,"function"],a,!1),C(Object(nn.showAlert)("Function updated successfully!","success")),u(!1),a.name!==S.name&&N.push(E.functions.byId.path.replace(":dbPath*",v).replace(":functionId",t.name)),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),C(Object(nn.showAlert)(Object(Xr.a)(e.t0),"error")),u(!1);case 18:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(Fa.a)(Le.a.mark((function e(){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(ie.I)(v),e.next=3,Object(ie.q)(j);case 3:return e.next=5,Object(ht.b)([v,"functions"],void 0,!0);case 5:g(!1),N.push(E.functions.index.path.replace(":dbPath*",v));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(pa.Plug,{outletId:"leftPanel"},c.a.createElement("div",{className:"panel"},c.a.createElement("div",{className:"panel__header"},c.a.createElement("h4",null,"Functions"),c.a.createElement("div",{className:"panel__header-actions"},c.a.createElement(L.a,{to:E.functions.new.path.replace(":dbPath*",v),className:"btn"},"New function"))),c.a.createElement("div",{className:"panel__content"},c.a.createElement(cl,{selectedId:j})))),c.a.createElement("div",{className:"panel-content"},S?c.a.createElement(c.a.Fragment,null,c.a.createElement(ya,{activeTab:n,setActiveTab:l},c.a.createElement(kt,{tabs:c.a.createElement(va,{position:"right"},c.a.createElement(Oa,{id:"simple"},"Simple"),c.a.createElement(Oa,{id:"fql"},"FQL"))},S.name),c.a.createElement("div",{className:"padding-y-3"},c.a.createElement(nl,{key:j,dbPath:v,initialValues:q,onSubmit:x,isLoading:i}),c.a.createElement("div",{className:"container container--xsmall"},c.a.createElement("hr",{className:"margin-top-4 margin-bottom-3"}),c.a.createElement(_,{color:"muted",onClick:()=>g(!0),label:Object(w.b)("actions.remove"),icon:"trash"}),c.a.createElement(Cr,{modal:{show:h,content:"Are you sure you want to delete function ".concat(j,"?"),cancelText:"Cancel",okText:"Delete",onCancel:()=>g(!1),onOk:k}}))))):c.a.createElement("div",{className:"loader"},c.a.createElement(it,null))))});var sl=ba(({location:e})=>[{label:"Functions",path:e.pathname}])(e=>{const t=Object(d.j)().dbPath,a=Object(ht.a)([t,"functions"],()=>(ie.I(t),ie.v())).data;return a?a&&0===a.length?c.a.createElement(tl,e):c.a.createElement(ll,Object.assign({},e,{id:a[0].ref.id})):c.a.createElement("div",{className:"spinner--bar"},c.a.createElement("div",{className:"spinner--bar__bar"}))});var ol=ba(({location:e,match:t})=>{const a=t.params.dbPath;return[{label:"Functions",path:E.functions.index.path.replace(":dbPath*",a)},{label:"New Function",path:e.pathname}]})(()=>{const e=Object(r.useState)("simple"),t=Object(f.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(!1),s=Object(f.a)(l,2),o=s[0],i=s[1],u=Object(d.h)(),p=Object(d.j)().dbPath,b=Object(m.d)(),h=function(){var e=Object(Fa.a)(Le.a.mark((function e(t){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(Object(nn.hideAlert)()),i(!0),Object(ie.I)(p),e.prev=3,e.next=6,Object(ie.k)({name:t.name,body:Object(on.a)(t.body),role:cr(t.roleId)});case 6:u.push(E.functions.byId.path.replace(":dbPath*",p).replace(":functionId",t.name)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),b(Object(nn.showAlert)(Object(Xr.a)(e.t0),"error")),i(!1);case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(ya,{activeTab:a,setActiveTab:n},c.a.createElement(kt,{tabs:c.a.createElement(va,{position:"right"},c.a.createElement(Oa,{id:"simple"},"Simple"),c.a.createElement(Oa,{id:"fql"},"FQL"))},"New Function"),c.a.createElement("div",{className:"padding-y-3"},c.a.createElement(nl,{dbPath:p,onSubmit:h,isLoading:o,onCancel:()=>u.goBack()})))}),il=a(663),ml=a.n(il);var ul=()=>r.createElement("nav",{className:"sidebar"},r.createElement(L.b,{to:E.downloads.index.path,isActive:(e,t)=>!!Object(d.g)(t.pathname,E.downloads.index)},r.createElement(y,{name:"laptop"}),r.createElement("span",{className:"display-none display-xsmall-block"},"FaunaDB Dev")),r.createElement("a",{className:"dropdown-item",target:"_blank",rel:"noopener noreferrer",href:"https://docs.fauna.com/fauna/current/drivers/"},r.createElement(y,{name:"cog"}),r.createElement("span",{className:"display-none display-xsmall-block link-description"},"Drivers/SDKs"),r.createElement(y,{className:"display-none display-xsmall-block",name:"external-link-alt"})),r.createElement("a",{className:"dropdown-item",target:"_blank",rel:"noopener noreferrer",href:"https://docs.fauna.com/fauna/current/start/vs_code"},r.createElement("span",null,r.createElement("img",{src:ml.a,alt:"Vs Icon",className:"sidebar-icon"})),r.createElement("span",{className:"display-none display-xsmall-block link-description"},"vs code extension"),r.createElement(y,{className:"display-none display-xsmall-block",name:"external-link-alt"})));const dl=e=>{const t=e.computedMatch;if(!t)return e;const a=t.params,n=a.dbPath;return Object(b.a)({},e,{computedMatch:Object(b.a)({},t,{params:Object(b.a)({},a,{dbPath:n||""})})})};var pl=()=>{const e=pt("enterprise").isEnabled(),t=e=>{let t=e.component,a=e.sidebar,n=e.layout,c=Object(h.a)(e,["component","sidebar","layout"]);return r.createElement(d.c,Object.assign({},c,{render:e=>r.createElement(n,Object(b.a)({},e,{sidebar:a}),r.createElement(t,e))}))},a=e=>{let a=e.component,n=Object(h.a)(e,["component"]);return r.createElement(t,Object.assign({component:a,layout:rc},dl(n)))},n=e=>{let a=e.component,n=Object(h.a)(e,["component"]);return r.createElement(t,Object.assign({component:a,layout:Rr},n))},c=({redirectUrl:e})=>r.createElement(t,{component:()=>(window.location.href=e,null),layout:Ar});return r.createElement(d.e,null,r.createElement(c,E.keys.indexWithoutDbBasic),r.createElement(c,E.keys.newWithoutDbBasic),e&&r.createElement(n,Object.assign({},E.auth.signIn,{component:we})),e&&r.createElement(d.b,{exact:!0,from:"/",to:E.db.byId.path.replace(":dbPath*","")}),!e&&r.createElement(n,Object.assign({},E.auth.oauth.callback,{component:xe})),!e&&r.createElement(n,Object.assign({},E.auth.callback,{component:qe})),!e&&r.createElement(n,Object.assign({},E.auth.signUp,{component:de})),!e&&r.createElement(n,Object.assign({},E.auth.signIn,{component:fe})),!e&&r.createElement(a,Object.assign({},E.home,{component:It,sidebar:null})),r.createElement(a,Object.assign({},E.db.new,{component:Wa,sidebar:e?$r:null})),r.createElement(a,Object.assign({},E.db.index,{component:fa})),r.createElement(a,Object.assign({},E.db.edit,{component:Ra})),r.createElement(a,Object.assign({},E.db.show,{component:Aa})),r.createElement(a,Object.assign({},E.db.byId,{component:fa})),r.createElement(a,Object.assign({},E.classes.index,{component:wn})),r.createElement(a,Object.assign({},E.classes.new,{component:xn})),r.createElement(a,Object.assign({},E.classes.byId,{component:yn})),r.createElement(a,Object.assign({},E.classes.settings,{component:kn})),r.createElement(a,Object.assign({},E.instances.new,{component:jn})),r.createElement(a,Object.assign({},E.instances.edit,{component:jn})),r.createElement(a,Object.assign({},E.instances.show,{component:jn})),r.createElement(a,Object.assign({},E.classes.byIdWithoutDb,{component:yn})),r.createElement(a,Object.assign({},E.indexes.new,{component:er})),r.createElement(a,Object.assign({},E.indexes.index,{component:Xn})),r.createElement(a,Object.assign({},E.indexes.settings,{component:Qn})),r.createElement(a,Object.assign({},E.indexes.edit,{component:$n})),r.createElement(a,Object.assign({},E.indexes.byId,{component:Wn})),r.createElement(a,Object.assign({},E.indexes.byIdWithoutDb,{component:Wn})),r.createElement(a,Object.assign({},E.webshell.index,{component:el})),r.createElement(a,Object.assign({},E.webshell.legacy,{component:cc})),r.createElement(a,Object.assign({},E.keys.index,{component:nr})),r.createElement(a,Object.assign({},E.keys.indexWithoutDb,{component:nr,sidebar:null})),r.createElement(a,Object.assign({},E.keys.new,{component:vr})),r.createElement(a,Object.assign({},E.keys.newWithoutDb,{component:vr,sidebar:null})),r.createElement(a,Object.assign({},E.roles.index,{component:sc})),r.createElement(a,Object.assign({},E.roles.new,{component:Lc})),r.createElement(a,Object.assign({},E.roles.show,{component:zc})),r.createElement(a,Object.assign({},E.roles.edit,{component:Yc})),r.createElement(a,Object.assign({},E.functions.index,{component:sl})),r.createElement(a,Object.assign({},E.functions.new,{component:ol})),r.createElement(a,Object.assign({},E.functions.byId,{component:ll})),r.createElement(a,Object.assign({},E.graphql.index,{component:kr})),r.createElement(a,Object.assign({},E.downloads.index,{component:za,sidebar:ul})),r.createElement(a,{component:()=>r.createElement("h1",null,"404")}))},bl=a(326),hl=a(114),El=a(67),fl=a(181);const gl={active:!1,message:"",level:""};const yl={show:!1,content:null,onOk:null,onCancel:null,showOk:null,showCancel:null,okText:null,cancelText:null,level:""};var vl=a(186);var Ol=Object(El.combineReducers)({databases:Lt,classes:Wt,indexes:Zt,documents:en,alert:(e=gl,t)=>Object(fl.a)(e,e=>{switch(t.type){case An.e:e.active=!0,e.message=t.payload.message,e.level=t.payload.level;break;case An.b:e.active=!1}}),modal:(e=yl,t)=>Object(fl.a)(e,e=>{switch(t.type){case"SHOW_MODAL":const a=t.payload;e.show=!0,e.content=a.content,e.onOk=a.onOk,e.onCancel=a.onCancel,e.showOk=a.showOk,e.showCancel=a.showCancel,e.okText=a.okText,e.cancelText=a.cancelText,e.level=a.level;break;case"HIDE_MODAL":const n=yl;e.show=!1,e.content=n.content,e.onOk=n.onOk,e.onCancel=n.onCancel,e.showOk=n.showOk,e.showCancel=n.showCancel,e.okText=n.okText,e.cancelText=n.cancelText,e.level=n.level}}),loaders:function(e=[],t){switch(t.type){case vl.b:return[...e,t.payload.id];case vl.a:return e.filter(e=>t.payload.id!==e);default:return e}},usage:function(e=Ge,t){switch(t.type){case"USAGE_FETCH_SUCCEEDED":{const r=t.payload;return Object(b.a)({},e,{regular:Object(b.a)({},e.regular,{[r.days]:(a=r.usageByDatabase,n=e=>Qe(e),Object.keys(a).reduce((e,t)=>Object(b.a)({},e,{[t]:n(a[t])}),{}))})})}case"USAGE_TIMESERIES_FETCH_SUCCEEDED":{const a=t.payload;return Object(b.a)({},e,{timeseries:Object(b.a)({},e.timeseries,{[a.days]:a.usages.map(Qe)})})}default:return e}var a,n},keys:ar.b,flash:(e={},t)=>{switch(t.type){case"CREATE_FLASH_MESSAGE":return Object(b.a)({},e,{[t.payload.id]:t.payload.value});case"REMOVE_FLASH_MESSAGE":return delete e[t.payload.id],e;default:return e}},cache:(e={},{type:t,payload:a})=>{if("SET_CACHE_ITEMS"===t&&a){const t=a.options,n=a.data,r=t.namespace;return Object(b.a)({},e,{[r]:Object(b.a)({},e[r],{items:Object(b.a)({},pr(e[r]),{},dr(n))})})}if("REMOVE_CACHE_ITEM"===t&&a){const t=a.options,n=a.data,r=t.namespace,c=pr(e[r]);return c&&delete c[ur(n)],Object(b.a)({},e,{[r]:Object(b.a)({},e[r],{items:c})})}return e}}),jl=Le.a.mark(wl),_l=Le.a.mark(Nl);function wl({payload:e}){return Le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ae.call)(hl.delay,e);case 2:return t.next=4,Object(Ae.put)(nn.hideAlert());case 4:case"end":return t.stop()}}),jl)}function Nl(){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ae.takeLatest)(An.c,wl);case 2:case"end":return e.stop()}}),_l)}var Cl=Le.a.mark(ql),Sl=Le.a.mark(xl);function ql({payload:e}){return Le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ae.call)(hl.delay,e);case 2:return t.next=4,Object(Ae.put)({type:"HIDE_MODAL"});case 4:case"end":return t.stop()}}),Cl)}function xl(){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ae.takeLatest)("HIDE_MODAL_DELAY",ql);case 2:case"end":return e.stop()}}),Sl)}var kl=Le.a.mark(Il);function Il(){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ae.all)([At(),Gt(),Xt(),Nl(),xl(),tn(),Object(ar.c)(),Ve()]);case 2:case"end":return e.stop()}}),kl)}const Pl=El.compose;var Tl=a(83),Dl=a(437),Rl=a.n(Dl);const Ll=e=>{const t=new RegExp("^(/)(collections|indexes|keys|query-notebook|graphql|console)(-new|-show|-edit)?(/documents(?:-edit|-new)?)?(?:[^@]*)(/@db)(?:/.*)$"),a=new RegExp("^(/db)(-new|-edit|-show)?/.+$");return e.replace(t,"$1$2$3$4$5").replace(a,"$1$2")};let Al=!1;const Fl=()=>({event:"Pageview",pagePath:Ll(window.location.pathname)+window.location.search});const Ul="{\n  name: 'West',\n  address: {\n    street: '123 Main St',\n    city: 'Weehawken',\n    state: 'NJ'\n  }\n}";const Bl=e=>e.replace(/\s/g,"");var Ml=(e,t)=>Bl(e)===Bl(t);const Vl="Create(\n  Ref(\n    Collection(\"warehouses\"),\n    \"3\"\n  ),\n  {\n    data: {\n      name: 'North',\n      address: {\n        street: 'Wall St',\n        city: 'NY',\n        state: 'NY'\n      }\n    }\n  } \n)";const Hl='Paginate(\n  Documents(\n    Collection("warehouses")\n  )\n)',Wl='Map(\n  Paginate(\n    Documents(Collection("warehouses"))\n  ),\n  Lambda("i", Get(Var("i")))\n)';const Gl='Update(\n  Ref(\n    Collection("warehouses"),\n    \'3\'\n  ),\n  {\n    data: {\n      address: {\n        street: "123 Main St"\n      }\n    }\n  }\n)';const Ql='Paginate(Documents(Collection("warehouses")))';var zl=()=>{const e=xa().openTutorial;return c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{className:"tutorial__next-tutorial"},"Next Steps: GraphQL"),c.a.createElement("p",null,"Learn how to perform basic CRUD operations with FaunaDB\u2018s native GraphQL API"),c.a.createElement("button",{onClick:()=>e("graphqlCrud"),className:"btn btn-success btn-inline tutorial__footer__action"},"GraphQL"))};const Yl=[{title:"Create database",component:({completeStepIf:e,isStepCompleted:t,currentStepIndex:a})=>{const n=Object(d.i)(),l=Wr({steps:2});if(Object(r.useEffect)(()=>{const t=n.pathname.includes("/db-new");l.completeStepIf(0,t);const r=n.pathname.includes("/db/");l.completeStepIf(1,r),e(a,l.isFinished)},[e,l,a,n.pathname]),0===l.currentStepIndex){const e="/"===n.pathname;return c.a.createElement(c.a.Fragment,null,!e&&c.a.createElement("p",null,"First, return to ",c.a.createElement(L.a,{to:"/"},"Console Home")," page."),c.a.createElement("p",null,"Click the \u201cNew Database\u201d button."))}return c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Type your database name. Make sure \u201cPre-populate with demo data\u201d remains unchecked; we will add our data manually."),c.a.createElement("p",null,"Click \u201cSave\u201d"))}},{title:"Create collection",component:({completeStepIf:e,isStepCompleted:t,currentStepIndex:a})=>{const n=Object(d.i)(),l=Wr({steps:2});return Object(r.useEffect)(()=>{const t=n.pathname.includes("/collections-new");l.completeStepIf(0,t);const r=n.pathname.includes("/collections/warehouses");l.completeStepIf(1,r),e(a,l.isFinished)},[e,l,a,n.pathname]),0===l.currentStepIndex?c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"You should now see the overview page for your new database."),c.a.createElement("p",null,"Next, click \u201c",c.a.createElement("b",null,"New collection"),"\u201d to create a collection for our documents."),c.a.createElement("p",null,"\u201cCollections\u201d are FaunaDB\u2019s version of tables.")):c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Name the new collection \u201cwarehouses\u201d. Ignore \u201cHistory days\u201d and \u201cTTL\u201d for now."),c.a.createElement("p",null,c.a.createElement("b",null,"Click \u201cSave\u201d.")))}},{title:"Create document",component:({completeStepIf:e,isStepCompleted:t,currentStepIndex:a})=>{const n=Object(d.i)(),l=Wr({steps:2});return Object(r.useEffect)(()=>{const e=n.pathname.includes("/documents-new");l.completeStepIf(0,e)},[l,n.pathname]),Object(r.useEffect)(()=>{const e=()=>{l.completeStep(1)};return vn.a.on("DOCUMENT_CREATED",e),()=>vn.a.off("DOCUMENT_CREATED",e)},[l]),Object(r.useEffect)(()=>{e(a,l.isFinished)},[e,a,l.isFinished]),0===l.currentStepIndex?c.a.createElement("p",null,"Click \u201cNew document\u201d to add a document to the collection."):c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Copy/paste the following document into the editor:"),c.a.createElement(dn,{readOnly:!0,value:Ul}),c.a.createElement(v.a,{color:"success",block:!0,onClick:()=>vn.a.emit("DOCUMENT_FORM_SET_DATA",Ul)},"Paste into editor"),c.a.createElement("p",null,c.a.createElement("b",null,"Click \u201cSave\u201d.")))}},{title:"Create document with FQL",component:({completeStepIf:e,isStepCompleted:t,currentStepIndex:a})=>{const n=Object(d.i)(),l=Wr({steps:2});return Object(r.useEffect)(()=>{const e=n.pathname.includes("/webshell");l.completeStepIf(0,e)},[l,n.pathname]),Object(r.useEffect)(()=>{const e=({queries:e})=>{l.completeStepIf(1,Ml(e[0],Vl))};return vn.a.on("WEBSHELL_QUERY_SUCCESS",e),()=>vn.a.off("WEBSHELL_QUERY_SUCCESS",e)},[l]),Object(r.useEffect)(()=>{e(a,l.isFinished)},[e,a,l.isFinished]),0===l.currentStepIndex?c.a.createElement("p",null,"Adding individual documents might get tedious, so let\u2019s add more documents with FQL. Click the Shell tab (>_) in the left sidebar to open the Web Shell."):c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Next, copy/paste the following FQL queries to populate the \u201cwarehouses\u201d collection with more documents."),c.a.createElement(dn,{readOnly:!0,value:Vl}),c.a.createElement(Na,{label:"Read more about this query"},c.a.createElement("p",null,"The Create function adds a new document to a collection, taking two parameters:"),c.a.createElement("ol",{className:"list list--ordered"},c.a.createElement("li",null,"The first parameter indicates in what collection the document should be created. You can also optionally add a Ref ID here, as we have done in this tutorial to ease copy/pasting queries. If you do not include a Ref ID, the system will automatically generate an 18-digit ID. References are like primary keys in other database systems, in that they are used to provide a pointer to a unique document."),c.a.createElement("li",null,"The second parameter contains the document data and optional metadata, surrounded by curly braces."))),c.a.createElement(v.a,{color:"success",block:!0,onClick:()=>vn.a.emit("WEBSHELL_SET_QUERY",Vl)},"Paste into editor"),c.a.createElement("p",null,"Press \u201cRun query\u201d to create the new documents."))}},{title:"Read your documents",component:({completeStepIf:e,isStepCompleted:t,currentStepIndex:a})=>{const n=Wr({steps:2});return Object(r.useEffect)(()=>{const e=({queries:e})=>{n.completeStepIf(0,Ml(e[0],Hl)),n.completeStepIf(1,n.isStepCompleted(0)&&Ml(e[0],Wl))};return vn.a.on("WEBSHELL_QUERY_SUCCESS",e),()=>vn.a.off("WEBSHELL_QUERY_SUCCESS",e)},[n]),Object(r.useEffect)(()=>{e(a,n.isFinished)},[e,a,n.isFinished]),0===n.currentStepIndex?c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Next, let\u2019s display a list of all of the documents:"),c.a.createElement(dn,{readOnly:!0,value:Hl}),c.a.createElement(Na,{label:"Read more about this query"},c.a.createElement("p",null,"You'll use this query structure A LOT when querying FaunaDB. The \u201cDocuments\u201c function takes one argument:"),c.a.createElement("ol",{className:"list list--ordered"},c.a.createElement("li",null,"The collection we\u2018re searching (\u201cwarehouses\u201d).")),c.a.createElement("p",null,'The `Paginate` then returns a "page" of the results, with a default max page size of 64.'," ",c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.fauna.com/fauna/current/api/fql/functions/paginate"},"Read more in the docs"),".")),c.a.createElement(v.a,{color:"success",block:!0,onClick:()=>vn.a.emit("WEBSHELL_SET_QUERY",Hl)},"Paste into editor"),c.a.createElement("p",null,"Press \u201cRun query\u201d to list the new documents.")):c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"However, this query only returned the document Refs. To return the full documents, we can add a Lambda (just an anonymous function) that loops through each Ref and returns the full object. Copy/paste this query to try that:"),c.a.createElement(dn,{readOnly:!0,value:Wl}),c.a.createElement(Na,{label:"Read more about this query"},c.a.createElement("p",null,"Map takes two arguments:"),c.a.createElement("ol",{className:"list list--ordered"},c.a.createElement("li",null,"An array--in this case, the query we ran previously to return the array of document refs."),c.a.createElement("li",null,"A lambda, which is just an anonymous function, to apply to each item in the array.")),c.a.createElement("p",null,c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.fauna.com/fauna/current/api/fql/functions/map"},"More about Map() in the docs"),".")),c.a.createElement(v.a,{color:"success",block:!0,onClick:()=>vn.a.emit("WEBSHELL_SET_QUERY",Wl)},"Paste into editor"),c.a.createElement("p",null,"Press \u201cRun query\u201d to display the documents in their entirety"))}},{title:"Update a document",component:({completeStepIf:e,currentStepIndex:t})=>(Object(r.useEffect)(()=>{const a=({results:a})=>{e(t,Ml(a[0].data.address.street,"123 Main St"))};return vn.a.on("WEBSHELL_QUERY_SUCCESS",a),()=>vn.a.off("WEBSHELL_QUERY_SUCCESS",a)},[e,t]),c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Copy/paste the following query to update the first warehouse\u2019s street address."),c.a.createElement(dn,{readOnly:!0,value:Gl}),c.a.createElement(Na,{label:"Read more about this query"},c.a.createElement("p",null,c.a.createElement("i",null,"Note: If we had not manually assigned the Ref ID (\u201c3\u201d) when we created the document, we would need to copy/paste the system-generated ID instead of \u201c3\u201d."))),c.a.createElement(v.a,{color:"success",block:!0,onClick:()=>vn.a.emit("WEBSHELL_SET_QUERY",Gl)},"Paste into editor"),c.a.createElement("p",null,"Press \u201cRun query\u201d to update the document.")))},{title:"Delete a document",component:({completeStepIf:e,isStepCompleted:t,currentStepIndex:a})=>{const n=Wr({steps:2});return Object(r.useEffect)(()=>{const e=({queries:e,results:t})=>{n.completeStepIf(0,t[0].data&&"North"===t[0].data.name),n.completeStepIf(1,n.isStepCompleted(0)&&Ml(e[0],Ql))};return vn.a.on("WEBSHELL_QUERY_SUCCESS",e),()=>vn.a.off("WEBSHELL_QUERY_SUCCESS",e)},[n]),Object(r.useEffect)(()=>{e(a,n.isFinished)},[e,a,n.isFinished]),0===n.currentStepIndex?c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Finally, let\u2019s run the following query to delete this document:"),c.a.createElement(dn,{readOnly:!0,value:'Delete(\n  Ref(\n    Collection("warehouses"), "3"\n  )\n)'}),c.a.createElement(v.a,{color:"success",block:!0,onClick:()=>vn.a.emit("WEBSHELL_SET_QUERY",'Delete(\n  Ref(\n    Collection("warehouses"), "3"\n  )\n)')},"Paste into editor"),c.a.createElement("p",null,"Press \u201cRun query\u201d to delete the document.")):c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,c.a.createElement("b",null,"Now, let\u2019s see that it has been deleted.")),c.a.createElement("p",null,"Run the following query to list all of our warehouses and see that the one with Ref ID of \u201c3\u201d was deleted:"),c.a.createElement(dn,{readOnly:!0,value:Ql}),c.a.createElement(v.a,{color:"success",block:!0,onClick:()=>vn.a.emit("WEBSHELL_SET_QUERY",Ql)},"Paste into editor"),c.a.createElement("p",null,"Press \u201cRun query\u201d to display the document Refs and see that the document with an ID of 3 has been deleted."))}}];var Kl=e=>c.a.createElement(Qr,Object.assign({steps:Yl},e,{congratulations:c.a.createElement(zl,null)}));var Jl=({completeStepIf:e,isStepCompleted:t,currentStepIndex:a})=>{const n=Object(d.i)(),l=Wr({steps:2});if(Object(r.useEffect)(()=>{const t=n.pathname.includes("/db-new");l.completeStepIf(0,t);const r=n.pathname.includes("/db/");l.completeStepIf(1,r),e(a,l.isFinished)},[e,l,a,n.pathname]),0===l.currentStepIndex){const e="/"===n.pathname;return c.a.createElement(c.a.Fragment,null,!e&&c.a.createElement("p",null,"First, return to ",c.a.createElement(L.a,{to:"/"},"Console Home")," page."),c.a.createElement("p",null,"Click the \u201cNew Database\u201d button."))}return c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Type your database name. Make sure \u201cPre-populate with demo data\u201d remains unchecked; we will add our data manually."),c.a.createElement("p",null,"Click \u201cSave\u201d"))};var $l=({completeStepIf:e,isStepCompleted:t,currentStepIndex:a,completeStep:n})=>{const l=Object(d.i)(),s=Wr({steps:2});return Object(r.useEffect)(()=>{const e=l.pathname.includes("/graphql/@db"),t=document.querySelector('.database-sidebar a[href*="graphql/@db"]');0===s.currentStepIndex?t&&t.classList.add("tutorial__highlight"):t&&t.classList.remove("tutorial__highlight"),s.completeStepIf(0,e)},[l.pathname,s]),Object(r.useEffect)(()=>{const e=()=>{n(a)};return vn.a.on("GRAPHQL_SCHEMA_IMPORT_SUCCESS",e),()=>vn.a.off("GRAPHQL_SCHEMA_IMPORT_SUCCESS",e)},[n,a]),0===s.currentStepIndex?c.a.createElement("p",null,"You should now see the overview page for your new DB. Click the GraphQL tab (",c.a.createElement("img",{src:jr.a,alt:"GraphQL Icon"}),") in the left sidebar to upload your GraphQL schema."):c.a.createElement("p",null,"Download the following file"," ",c.a.createElement("a",{download:!0,href:"/ecommerce.gql"},"ecommerce.gql")," ","and click \u201cImport Schema\u201d to upload it.")},Zl=a(442);const Xl=()=>document.querySelector(".CodeMirror-wrap");var es=e=>{const t=Object(r.useRef)(null),a=Object(r.useState)(!1),n=Object(f.a)(a,2),c=n[0],l=n[1];Object(r.useLayoutEffect)(()=>{if(t.current=Xl(),t.current)l(!0);else if(!t.current){const e=()=>{t.current=Xl(),l(!0)};return vn.a.on(Zl.GRAPHQL_PLAYGROUND_MOUNTED,e),()=>vn.a.off(Zl.GRAPHQL_PLAYGROUND_MOUNTED,e)}},[]),Object(r.useEffect)(()=>{if(!c)return;const a=t.current.CodeMirror,n=()=>e(JSON.parse(a.getValue()));return a.on("change",n),()=>a.off("change",n)},[c,e])};const ts='mutation {\n  createWarehouse(data: {\n    name: "East"\n    address: {\n      street: "13 Pierstorff Drive"\n      city: "Washington"\n      state: "DC"\n      zipCode: "20220"\n    }\n  }){\n    _id\n  }\n}';const as="query {\n  allWarehouses {\n    data {\n      _id\n      name\n      address {\n        street\n        city\n        state\n        zipCode\n      }\n    }\n  }\n}";const ns='mutation {\n  updateWarehouse(\n    id: "PASTE_YOUR_ID_HERE",\n    data: {\n      name: "East"\n      address: {\n        street: "1 Corry Plaza"\n        city: "Stockton"\n        state: "CA"\n        zipCode: "95205"\n      }\n    }\n  ){\n    _id\n  }\n}';var rs=()=>c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{className:"tutorial__next-tutorial"},"Next Steps: Explore the GraphQL docs"),c.a.createElement("p",null,"Read more about GraphQL in the official"," ",c.a.createElement("a",{href:"https://docs.fauna.com/fauna/current/api/graphql/",target:"_blank",without:!0,rel:"noopener noreferrer"},"API documentation.")),c.a.createElement("a",{className:"btn btn-success btn-inline tutorial__footer__action",href:"https://docs.fauna.com/fauna/current/api/graphql/",target:"_blank",without:!0,rel:"noopener noreferrer"},"GraphQL Documentation"));const cs=[{title:"Create database",component:Jl},{title:"Upload GraphQL schema",component:$l},{title:"Create document",component:({completeStepIf:e,isStepCompleted:t,currentStepIndex:a,completeStep:n})=>{const l=Object(r.useCallback)(t=>e(a,t.data&&t.data.createWarehouse),[e,a]);return es(l),c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Create a new warehouse by copy/pasting the following query:"),c.a.createElement(dn,{readOnly:!0,value:ts}),c.a.createElement(v.a,{color:"success",block:!0,onClick:()=>window.editor.setValue(ts)},"Paste into editor"),c.a.createElement("p",null,c.a.createElement("b",null,'Click on "play" button.')))}},{title:"Read all documents",component:({completeStepIf:e,isStepCompleted:t,currentStepIndex:a,completeStep:n})=>{const l=Object(r.useCallback)(t=>e(a,t.data.allWarehouses),[e,a]);return es(l),c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Now, read all warehouses with the following:"),c.a.createElement(dn,{readOnly:!0,value:as}),c.a.createElement(v.a,{color:"success",block:!0,onClick:()=>window.editor.setValue(as)},"Paste into editor"),c.a.createElement("p",null,c.a.createElement("b",null,'Click on "play" button.')))}},{title:"Update document",component:({completeStepIf:e,isStepCompleted:t,currentStepIndex:a,completeStep:n})=>{const l=Object(r.useCallback)(t=>e(a,t.data&&t.data.updateWarehouse),[e,a]);return es(l),c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Update one of the warehouses with the following:"),c.a.createElement(dn,{readOnly:!0,value:ns}),c.a.createElement(Na,{label:"Read more about this query"},c.a.createElement("p",null,"If you completed the Basic CRUD tutorial before this one, you might remember that we were able to manually assign the Ref ID during document creation. This is not currently possible with our GraphQL API, but is on our roadmap. If this feature is important to you, please feel free to contact us.")),c.a.createElement(v.a,{color:"success",block:!0,onClick:()=>window.editor.setValue(ns)},"Paste into editor"),c.a.createElement("p",null,c.a.createElement("b",null,'Click on "play" button.')))}},{title:"Delete document",component:({completeStepIf:e,isStepCompleted:t,currentStepIndex:a,completeStep:n})=>{const l=Object(r.useCallback)(t=>e(a,t.data&&t.data.deleteWarehouse),[e,a]);return es(l),c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Now delete a warehouse:"),c.a.createElement(dn,{readOnly:!0,value:'mutation {\n  deleteWarehouse(\n    id: "PASTE_YOUR_ID_HERE"\n  ) {\n    _id\n  }\n}'}),c.a.createElement(Na,{label:"Read more about this query"},c.a.createElement("p",null,"If you completed the Basic CRUD tutorial before this one, you might remember that we were able to manually assign the Ref ID during document creation. This is not currently possible with our GraphQL API, but is on our roadmap. If this feature is important to you, please feel free to contact us.")),c.a.createElement(v.a,{color:"success",block:!0,onClick:()=>window.editor.setValue('mutation {\n  deleteWarehouse(\n    id: "PASTE_YOUR_ID_HERE"\n  ) {\n    _id\n  }\n}')},"Paste into editor"),c.a.createElement("p",null,c.a.createElement("b",null,'Click on "play" button.')))}}];var ls=[{id:"basicCrud",title:"Basic CRUD",component:Kl},{id:"graphqlCrud",title:"GraphQL",component:e=>c.a.createElement(Qr,Object.assign({steps:cs},e,{congratulations:c.a.createElement(rs,null)}))}];const ss=(e=>{const t=Object(hl.default)(),a=Object(El.createStore)(Ol,e,Pl(Object(El.applyMiddleware)(t)));return t.run(Il),a})(),os=(e=>{const t=Object(Tl.a)();return t.listen((t,a)=>{const n=e.getState().alert,r=document.querySelector(".content__main");if(Al&&Rl.a.dataLayer({dataLayer:Fl()}),n.active){setTimeout(()=>{e.dispatch(Object(nn.hideAlert)())},2500)}r&&(r.scrollTop=0)}),t})(ss);function is(){return c.a.createElement(u.a,{backend:p.a},c.a.createElement(m.a,{store:ss},c.a.createElement(bl.a,null,c.a.createElement(d.d,{history:os},c.a.createElement(ka,{tutorials:ls},c.a.createElement(pl,null))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ms,us,ds,ps=a(1154),bs=a(669);if(window.ab_branch="onboarding-split-test-01",yt.a.tz.setDefault("Etc/UTC"),w.a({attributes:{name:"Name",terms:"Terms",values:"Values",unique:"Unique",serialized:"Serialized",refId:"Ref Id",preview:"Preview",parentDatabase:"Parent Database",role:"Role",email:"E-mail",businessEmail:"Work E-mail",password:"Password",confirmPassword:"Confirm Password",faunaDbUrl:"Fauna DB URL",secret:"Secret",key:"Key",historyDays:"History Days",ttl:"TTL",faunaData:"Fauna Data"},actions:{cancel:"Cancel",create:"Create",save:"Save",update:"Update",remove:"Delete",revoke:"Revoke",close:"Close",edit:"Edit",clear:"Clear",discardChanges:"Discard Changes",delete:"Delete",settings:"Settings"},auth:{actions:{start:"Sign up with e-mail",logout:"Sign Out",logIn:"Log in",signUp:"Sign up",enterNow:"Sign in with e-mail",enterWithSecret:"Sign in with key",forgotPassword:"Forgot your password?"},errors:{default:"Something is wrong. Please, try again.",invalidUserOrPassword:"User or password are invalid.",emailRegistered:"This e-mail is already registered.",invalidConfirm:"Confirm password doesn't match.",invalidSecret:"The secret is invalid.",noConnection:"We are not able to connect to the provided Fauna DB URL.",expiredSession:"Your session has expired",unauthorized:"Your access key may not have sufficient permissions to view or modify all the resources on this page."},messages:{startNow:"Start Now on Fauna",signIn:"Welcome to FaunaDB",signInEnterprise:"Log into Fauna Enterprise",getStarted:"Get started for free",pricingDetails:"Pricing Details",alreadyHaveAccount:"Already have an account?",noAccount:"New to FaunaDB?",orSignInWith:"or log in with",orSignUpWith:"or sign up with",needHelp:"Needing help?",contactUs:"Contact us",checking:"Checking credentials",actionRequired:"Action required.",addEndpointManually:"Run the command below to manually add cloud endpoint.",shellLoginComplete:"Shell Login Complete",closeWindow:"You can now close this browser window.",waitingRedirect:"You will be redirected in a few moments",slackInvitation:"Sign up for Fauna Community Slack"},terms:{first:"By signing up for FaunaDB, you are accepting the",second:"and the"}},footer:{copyright:"Copyright {0} Fauna Inc.",terms:"Terms of Use",privacy:"Privacy Policy"},loading:{noData:"No resources yet.",loading:"Loading resources...",simple:"Loading..."},database:{home:"Home",settings:"Database Settings",overview:"DB Overview",children:{name:"Child Databases"},child:{name:"Child Database"},name:"Database",plural:"Databases",empty:{create:"Create your first database.",childCreate:"Create your first child database."},actions:{new:"New Database",edit:"Database Settings",select:"Select a database"},messages:{deleteConfirm:"Are you sure you want to delete database {0}?"},fields:{name:"Database Name"},demo:{label:"Pre-populate with demo data",info:"The demo data is used to create a simple warehouse data structure for you, including GraphQL schema. This lets you learn more about how FaunaDB works with practical examples."}},index:{name:"Index",plural:"Indexes",actions:{new:"New Index",edit:"Edit Index",confirmDelete:"Are you sure you want to delete index {0}?"},empty:{title:"Create your first index.",class_:"Collections before indexes",secondaryClassTitle:"Collections before indexes",terms:"No terms",values:"No values"},messages:{derivedView:"This view was derived from ",source:"Source",terms:"Terms",values:"Values",status:"Status",active:"Active",buildingIndex:"Building Index...",classEmpty:"Indexes help you browse the data in your collections, but you need a collection before you create an index.",empty:"In FaunaDB, indexes are used to easily browse the data in your collections. To get started, create your first index.",noDocuments:'This index contains no documents. FaunaDB stores data in "documents". If you\u2019re coming from another database, the documents in a collection are like the rows in a table.'}},class_:{name:"Collection",plural:"Collections",actions:{new:"New Collection",edit:"Collection Settings",select:"Select a Collection"},empty:{title:"Create first collection"},messages:{deleteConfirm:"Are you sure you want to delete collection {0}?",empty:"\n      Collections are FaunaDB's version of tables. To get started, create your first collection.\n      "}},document_:{name:"Document",plural:"Documents",actions:{new:"New Document",delete:"Delete Document",confirmDelete:"Do you want to delete this document?",search:"Search Documents",edit:"Edit {0}"},messages:{capped:"To improve performance, only 100 results are shown.",noResults:"No results found for",search:"Search the documents",searchSubTitle:"using the form.",noDocuments:'This collection contains no documents. FaunaDB stores data in "documents". If you\u2019re coming from another database, the documents in a collection are like the rows in a table.',noDocumentsYet:"no documents yet",saveReturnToCollections:"Save and go back"}},usage:{readWriteOperations:"Read/Write Operations",freeLimits:"Free limits",empty:"No usage data for this period",ops:{read:"Read Ops",write:"Write Ops",storage:"Storage",transfer:"Data Transfer"},free:"Free",used:"Used",observations:{storage:"Storage usage is a weighted average over the last 30 days, and can be delayed by up to 48 hours."}},billing:{read_ops:"Read Ops",write_ops:"Write Ops",storage:"Storage",data_transferred:"Data Transfer"},period:{last7Days:"Last 7 days",last30Days:"Last 30 days"},helpful:{helpfulResources:"Helpful Resources",faunaShellQuickstart:{title:"Fauna Shell Quickstart",subtitle:"Get up and running right away with the Fauna Shell"},driversAndSdks:{title:"Drivers & SDKs",subtitle:"Build and deploy an app in minutes on FaunaDB"},fqlApiReference:{title:"FQL API Reference",subtitle:"The primary interface for interacting with FaunaDB"}},javascript:{name:"Javascript"},json:{name:"JSON"},keys:{name:"Key",plural:"Keys",actions:{new:"New key",revoke:"Revoke key",confirmRevoke:"Are you sure you want to revoke this key?"},messages:{new:{first:"Your key's secret is:",second:"This secret won't be displayed again, so please copy and save it somewhere safe."}}},status:{name:"STATUS",active:"Active",unstable:"Unstable",errors:{unavailable:"Looks like the server is taking too long to respond. This can be caused by internet connection issues or by an error with our servers."}},info:{resources:"Resources",settings:"Settings",doc:"Documentation",community:"Community Slack",download:"Download"},tooltips:{databaseName:"Cannot be events, sets, self, documents, or _. This required field can be changed later.",editorJson:"Data entered into editor must be full JSON. This can be edited later.",trackDays:"Document history is retained for at least this many days. Clearing the field will retain history forever, but please note that this will increase storage utilization. This field defaults to 30 days, and can be changed later.",ttl:"Documents are deleted this many days after their last write. Documents of the collection will be removed if they have not been updated within the configured TTL. This optional field can be changed later.",className:"Cannot be events, sets, self, documents, or _. Please wait a few moments before using a recently deleted collection name. This required field can be changed later.",indexName:"Cannot be events, sets, self, documents, or _. Renaming an index changes its ref, but preserves inbound references to the index. Index data is not rebuilt. This required field can be changed later.",indexTerms:'AKA "Lookup term". For example, if you want to look up user details by lastName, data.lastName would be entered as the lookup term in this field. Leaving it blank defaults to "All". This optional field may not be changed later, but you can delete and recreate the index.',indexValues:'The value is the field to be covered. Leaving it blank defaults to "All". This optional field may not be changed later, but you can delete and recreate the index.',indexUnique:"If checked, maintains a uniqueness constraint on combined terms and values. Indexes with the unique constraint must also be serialized. Note: If you update the unique field, it will not remove existing duplicated items from the index.",indexSerialized:"If checked, writes to this index are serialized with concurrent reads and writes.",indexSourceClasses:"The ability to add multiple source collections and field bindings is coming to the Console soon. Meanwhile, you can do this via the Fauna Shell.",indexSearch:'Search data type must match term data type (that is, surround string values with "").',usageInterruption:"You are at or near usage limits. To avoid service interruption, ",usageInterruptionLink:"enable billing",usageFreeQuota:"Free quotas for read ops, write ops, and data transfer reset daily at 00:00 GMT.",usageNextReset:"Next reset: ",keyTypes:{admin:"Used to create, destroy, or manage any database or key. Protect admin keys very carefully.",server:"Can be used to create, destroy, or manage the database to which they are assigned. Protect server keys carefully.","server-readonly":"Provides full read access to the database that they are assigned to, or any child database.",client:"Provides restricted access to resources that are marked with the `public` permission. Due to their restrictions, they are suitable for use in untrusted environments, such as within mobile clients."}},deprecations:{root:"Deprecation Warning: Creation of any objects, collections or indexes, is not recommended in root."},query:{plural:"Shell",actions:{run:"run query"},messages:{success:"Query executed successfully."},labels:{results:"Query Results"}},tabs:{simple:"Simple",fql:"FQL"},webshell:{pageTitle:"Shell",download:"Download",openfile:"Open file",clear:"Clear",bulkResults:"/* Bulk results mode: */\n",initQuery:"Paginate(Collections());\nPaginate(Indexes());\nPaginate(Databases());"},graphql:{pageTitle:"GraphQL Playground",updateSchema:"Update schema",overrideSchema:"Override schema",overrideWarning:"Be careful! Overriding a schema will delete all collections, indexes, and documents.",overrideDurationWarning:"This operation could take some time to complete.",override:"Override",overrideLeaveWarning:"You are overriding your schema and leave this page now can cause inconsistences!",crumb:"GraphQL",importTitle:"Import your GraphQL schema",importSchema:"Import schema",importDescription:"To get started, import your GraphQL schema using a .gql or .graphql file.",importError:"Error on import GraphQL schema",updateSuccess:"Schema update successful!",updateError:"Error updating GraphQL schema.",overrideSuccess:"Schema override successful!",overrideError:"Error overriding GraphQL schema.",errorBoundaryTitle:"Issues processing last GraphQL query",errorBoundary:"If you got this error, it's probably because your last query contained an invalid character type. To fix it, just clear your local storage.",clearLocalStorage:"Clear local storage"},security:{title:"Security"},role:{title:"Roles",editTitle:"Edit Role",firstRole:"Create your first custom role",newCustomRole:"New custom role",newRole:"New role",customRoleTitle:"Custom roles",builtInRoles:"Built-in roles",addMemberCollection:"Add member collection",discardChangesConfirm:'"Discard changes" will discard any changes you have made to this role. "Cancel" will take you back to editing the role. Are you sure you want to discard changes?',privileges:"Privileges",membership:"Membership",confirmDelete:"Do you really want to remove role :roleId?",removeRole:"Remove role",actions:{read:"Read",write:"Write",create:"Create",delete:"Delete",call:"Call",historyRead:"History Read",historyWrite:"History Write",unrestricted:"Unrestricted"},addResource:"Add {0}",noResourcesAvailable:"No resources available"},function_:{title:"Functions",name:"Function"},schema:{title:"Schemas",name:"Schema"},addons:{netlify:{notFoundError:"It seems you've already imported your site db into your FaunaDB account. Good job!",genericError:"It seems something wrong happened. Please try again.",importDatabaseMessage1:"It looks like you want to import the database for",importDatabaseMessage2:"to your FaunaDB account.",importingDatabase:"Importing database...",importDatabase:"Import Database",importNetlifyDatabase:"Import Netlify Database"}}}),i.a.defaults.headers["Content-Type"]="application/json",ms={scale:["#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#F44336","#E91E63","#9C27B0","#673AB7","#3F51B5"],error:"#DF5D84",warning:"#EC9F45",default:"#5280B1",gray:"#f4f5f9"},Pe=Object(b.a)({},Pe,{},ms),(e=>{B=e})({secure:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_SHELL_URL:"http://localhost:8086",REACT_APP_AUTH_COOKIE_DOMAIN:".fauna.com",REACT_APP_WEBSITE_APP_URL:"https://app.fauna.com",REACT_APP_AUTH_URL:"https://auth.console.fauna.com",REACT_APP_WEBSITE_TERMS_OF_USE_URL:"https://www2.fauna.com/terms",REACT_APP_PARDOT_SIGN_UP_FORM_URL:"https://www2.fauna.com/l/517431/2018-05-25/6bfg3m",REACT_APP_DRIFT_ID:"y6s3em52hv9t",REACT_APP_SENTRY_DSN:"https://d47f8b7d77404cfe929d370b99979808@sentry.io/1391762",REACT_APP_AUTH_GITHUB_CLIENT_ID:"615935a34846151ad806",REACT_APP_GTM_ID:"GTM-TGTQJ7M",REACT_APP_DB_URL:"https://db.fauna.com:443",REACT_APP_ACCOUNT_URL:"https://auth.console.fauna.com",REACT_APP_WEBSITE_PRICING_URL:"https://fauna.com/pricing",REACT_APP_WEBSITE_PRIVACY_POLICY:"https://www2.fauna.com/privacy",REACT_APP_WEBSITE_URL:"https://fauna.com",REACT_APP_STATUS_URL:"http://status.fauna.com"}).REACT_APP_AUTH_COOKIE_SECURE,domain:".fauna.com",expires:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_SHELL_URL:"http://localhost:8086",REACT_APP_AUTH_COOKIE_DOMAIN:".fauna.com",REACT_APP_WEBSITE_APP_URL:"https://app.fauna.com",REACT_APP_AUTH_URL:"https://auth.console.fauna.com",REACT_APP_WEBSITE_TERMS_OF_USE_URL:"https://www2.fauna.com/terms",REACT_APP_PARDOT_SIGN_UP_FORM_URL:"https://www2.fauna.com/l/517431/2018-05-25/6bfg3m",REACT_APP_DRIFT_ID:"y6s3em52hv9t",REACT_APP_SENTRY_DSN:"https://d47f8b7d77404cfe929d370b99979808@sentry.io/1391762",REACT_APP_AUTH_GITHUB_CLIENT_ID:"615935a34846151ad806",REACT_APP_GTM_ID:"GTM-TGTQJ7M",REACT_APP_DB_URL:"https://db.fauna.com:443",REACT_APP_ACCOUNT_URL:"https://auth.console.fauna.com",REACT_APP_WEBSITE_PRICING_URL:"https://fauna.com/pricing",REACT_APP_WEBSITE_PRIVACY_POLICY:"https://www2.fauna.com/privacy",REACT_APP_WEBSITE_URL:"https://fauna.com",REACT_APP_STATUS_URL:"http://status.fauna.com"}).REACT_APP_AUTH_COOKIE_EXPIRES,url:"https://auth.console.fauna.com"}),z()){const e="https://db.fauna.com:443",t=W();ie.f({urlString:e,secret:t.secret||t.data.secret})}window.drift.load("y6s3em52hv9t"),us="GTM-TGTQJ7M",Rl.a.initialize({gtmId:us,dataLayer:Fl()}),Al=!0,ps.a({release:"console@".concat(bs.version),dsn:"https://d47f8b7d77404cfe929d370b99979808@sentry.io/1391762",whitelistUrls:["https://dashboard.fauna.com"],ignoreErrors:["top.GLOBALS","Cannot redefine property: googletag","ReferenceError: ga is not defined","Error: Loading chunk","Error: Loading CSS chunk","SecurityError: The operation is insecure.","SecurityError: Failed to read the 'locastorage'","Object.assign is not a function"]}),ds={usage:ve("REACT_APP_FEAT_USAGE",!0),graphql:ve("REACT_APP_FEAT_GRAPHQL",!0),enterprise:ve("REACT_APP_FEAT_ENTERPRISE",!1)},dt=ds,s.a.render(c.a.createElement(is,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})},120:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return m}));var n=a(6),r=a(42);const c={name:"key",plural:"keys",namespace:"databasePath"},l=Object(r.d)(c),s=Object(r.a)(l),o=Object(r.b)(l,c),i=Object(r.c)(l,s,{fetchList:()=>n.z(),create:e=>n.m(e),remove:e=>n.E(e.ref)},c);function m(e){const t=e.name||e.data&&e.data.name;return t||e.ref.value.id}},131:function(e,t,a){e.exports=a.p+"static/media/spinner.2cad3681.svg"},134:function(e,t,a){e.exports=a.p+"static/media/graphql-icon.23cfcdca.svg"},186:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));const n="START_LOAD",r="FINISH_LOAD"},2:function(e,t,a){"use strict";let n;a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return s}));const r=e=>{const t=e.split("."),a=t.reduce((t,a)=>t[a]||e,n);return a.toString()},c=(e,t)=>t?t.reduce((e,t,a)=>e.replace("{".concat(a,"}"),t),e):e,l=(e,t)=>{if(!e)throw new Error("You should pass text as string");return c(r(e),t)},s=e=>{n=e}},25:function(e,t,a){"use strict";var n=a(661);t.a=Object(n.a)()},26:function(e,t,a){"use strict";a.r(t),a.d(t,"showAlert",(function(){return r})),a.d(t,"hideAlert",(function(){return c})),a.d(t,"hideAlertDelay",(function(){return l}));var n=a(76);function r(e,t=n.f){return{type:n.e,payload:{level:t,message:e}}}function c(){return{type:n.b}}function l(e=n.d){return{type:n.c,payload:e}}},315:function(e,t,a){e.exports=a.p+"static/media/logo-icon-white.f7756dcd.svg"},324:function(e,t,a){e.exports=a.p+"static/media/sf.51092534.svg"},326:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),r=a.n(n),c=a(74);class l extends r.a.Component{constructor(...e){super(...e),this.state={error:null}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){console.error(e),c.b(a=>{Object.keys(t).forEach(e=>{a.setExtra(e,t[e])}),c.a(e)})}render(){return this.state.error?r.a.createElement("div",{style:{padding:"20px"}},r.a.createElement("h1",null,"Oops..."),r.a.createElement("p",null,"Something went wrong."),r.a.createElement("p",null,r.a.createElement("b",null,"We have been notified of this error")," and are working hard to get things running smoothly."),r.a.createElement("a",{href:"/"},"Back to Home")):this.props.children}}},42:function(e,t,a){"use strict";function n(e){return{fetch:(t={})=>r(t,e.collection.fetch.request),fetchSuccess:(t={})=>r(t,e.collection.fetch.success),fetchError:(t={})=>r(t,e.collection.fetch.error),fetchList:(t={})=>r(t,e.collection.fetchList.request),fetchListSuccess:(t={})=>r(t,e.collection.fetchList.success),fetchListError:(t={})=>r(t,e.collection.fetchList.error),create:(t={})=>r(t,e.resource.create.request),createSuccess:(t={})=>r(t,e.resource.create.success),createError:(t={})=>r(t,e.resource.create.error),update:(t={})=>r(t,e.resource.update.request),updateSuccess:(t={})=>r(t,e.resource.update.success),updateError:(t={})=>r(t,e.resource.update.error),remove:(t={})=>r(t,e.resource.remove.request),removeSuccess:(t={})=>r(t,e.resource.remove.success),removeError:(t={})=>r(t,e.resource.remove.error)}}function r(e={},t){return{type:t,payload:e}}function c({name:e,plural:t}){const a=e.toUpperCase(),n=t.toUpperCase();return{collection:{fetch:{request:"".concat(n,"_FETCH_REQUEST"),success:"".concat(n,"_FETCH_SUCCESS"),error:"".concat(n,"_FETCH_ERROR")},fetchList:{request:"".concat(n,"_FETCHLIST_REQUEST"),success:"".concat(n,"_FETCHLIST_SUCCESS"),error:"".concat(n,"_FETCHLIST_ERROR")},fetchDocumentsByTerms:{request:"".concat(n,"_FETCHDOCUMENTSBYTERMS_REQUEST"),success:"".concat(n,"_FETCHDOCUMENTSBYTERMS_SUCCESS"),error:"".concat(n,"_FETCHDOCUMENTSBYTERMS_ERROR")},fetchDocumentByRef:{request:"".concat(n,"_FETCHDOCUMENTBYREF_REQUEST"),success:"".concat(n,"_FETCHDOCUMENTBYREF_SUCCESS"),error:"".concat(n,"_FETCHDOCUMENTBYREF_ERROR")}},resource:{create:{request:"CREATE_".concat(a,"_REQUEST"),success:"CREATE_".concat(a,"_SUCCESS"),error:"CREATE_".concat(a,"_ERROR"),load:"CREATE_".concat(a,"_LOAD")},update:{request:"UPDATE_".concat(a,"_REQUEST"),success:"UPDATE_".concat(a,"_SUCCESS"),error:"UPDATE_".concat(a,"_ERROR"),load:"UPDATE_".concat(a,"_LOAD")},remove:{request:"REMOVE_".concat(a,"_REQUEST"),success:"REMOVE_".concat(a,"_SUCCESS"),error:"REMOVE_".concat(a,"_ERROR"),load:"REMOVE_".concat(a,"_LOAD")}}}}a.d(t,"c",(function(){return O})),a.d(t,"b",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return n}));var l=a(181);function s(e,{namespace:t,name:a,plural:n},r={}){return(c={},s)=>Object(l.b)(c,c=>{switch(s.type){case e.collection.fetch.success:c[s.payload[t]]||(c[s.payload[t]]={}),r.fetch&&r.fetch(c,s);break;case e.collection.fetchList.success:r.fetchList?r.fetchList(c,s):c[s.payload[t]]=s.payload[n];break;case e.collection.fetchDocumentsByTerms.success:r.fetchDocumentsByTerms?r.fetchDocumentsByTerms(c,s):c[s.payload[t]]=s.payload[n];break;case e.collection.fetchDocumentByRef.success:r.fetchDocumentByRef?r.fetchDocumentByRef(c,s):c[s.payload.referenceId]=s.payload;break;case e.resource.create.success:if(r.create)r.create(c,s);else{const e=s.payload[t];c[e]||(c[e]=[]),c[e].unshift(s.payload[a])}break;case e.resource.remove.success:if(r.remove)r.remove(c,s);else{const e=s.payload[t],n=s.payload[a];c[e]=c[e].filter(e=>e.ref.value.id!==n.ref.value.id)}break;case e.resource.update.success:if(r.update)r.update(c,s);else{const e=s.payload[t];if(!e)return;const n=s.payload[a];c[e]=c[e].map(e=>{const t=e.ref.value.id===n.ref.value.id,a=s.payload.values&&s.payload.values.originalName===e.ref.value.id;return t||a?n:e})}}})}var o=a(16),i=a.n(o),m=a(7),u=a(41),d=a.n(u),p=a(17),b=a(186);function h(e){return{type:b.b,payload:{id:e}}}function E(e){return{type:b.a,payload:{id:e}}}var f=a(26),g=a(76),y=a(6),v=a(80);function O(e,t,a,{namespace:n,name:r,plural:c,label:l}){var s=i.a.mark(q),o=i.a.mark(x),u=i.a.mark(k),b=i.a.mark(I),O=i.a.mark(P),w=i.a.mark(T),N=i.a.mark(D),C=i.a.mark(R),S=i.a.mark(L);function q({payload:e}){var n;return i.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,y.I(_(e.databasePath)),c.next=4,Object(p.call)(a.fetch,j(e.databasePath));case 4:return n=c.sent,c.next=7,Object(p.put)(t.fetchSuccess(Object(m.a)({},e,{[r]:n})));case 7:c.next=13;break;case 9:return c.prev=9,c.t0=c.catch(0),c.next=13,Object(p.call)(L,c.t0,e,"fetching");case 13:case"end":return c.stop()}}),s,null,[[0,9]])}function x({payload:e}){var n;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,y.I(e.databasePath),r.next=4,Object(p.call)(a.fetchList,e);case 4:return n=r.sent,r.next=7,Object(p.put)(t.fetchListSuccess(Object(m.a)({},e,{[c]:n})));case 7:e.onComplete&&e.onComplete(n),r.next=15;break;case 10:return r.prev=10,r.t0=r.catch(0),e.onComplete&&e.onComplete(null,r.t0),r.next=15,Object(p.call)(L,r.t0,e,"fetching a list from");case 15:case"end":return r.stop()}}),o,null,[[0,10]])}function k({payload:e}){var n;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,y.I(e.databasePath),r.next=4,Object(p.call)(a.fetchDocumentsByTerms,e);case 4:return n=r.sent,r.next=7,Object(p.put)(t.fetchDocumentsByTermsSuccess(Object(m.a)({},e,{[c]:n})));case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(0),r.next=13,Object(p.call)(L,r.t0,e,"fetching a list from");case 13:e.onComplete&&e.onComplete();case 14:case"end":return r.stop()}}),u,null,[[0,9]])}function I({payload:e}){var n;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,y.I(e.databasePath),r.next=4,Object(p.call)(a.fetchDocumentByRef,e);case 4:return n=r.sent,r.next=7,Object(p.put)(t.fetchDocumentByRefSuccess(Object(m.a)({},e,{[c]:n})));case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(0),r.next=13,Object(p.call)(L,r.t0,e,"fetching a list from");case 13:e.onComplete&&e.onComplete();case 14:case"end":return r.stop()}}),b,null,[[0,9]])}function P({payload:n}){var c,s,o,u,b;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Object(p.put)(h(e.resource.create.load));case 3:return c=n.parentPath||n.databasePath,y.I(c),i.next=7,Object(p.call)(a.create,n.values);case 7:return s=i.sent,o=s.name||s.ref.value.id,u=Object(m.a)({},n,{[r]:s}),i.next=12,Object(p.put)(t.createSuccess(u));case 12:if(n.hideAlert){i.next=18;break}return b="".concat(d.a.capitalize(l||r),' "').concat(o,'" created.'),i.next=16,Object(p.put)(f.showAlert(b));case 16:return i.next=18,Object(p.put)(f.hideAlertDelay());case 18:n._resourceName=o,n.onComplete&&n.onComplete(Object(m.a)({},n,{result:s})),i.next=29;break;case 22:return i.prev=22,i.t0=i.catch(0),i.next=26,Object(p.call)(L,i.t0,n,"creating");case 26:if(!n.onComplete){i.next=29;break}return i.next=29,Object(p.fork)(n.onComplete,n,i.t0);case 29:return i.next=31,Object(p.put)(E(e.resource.create.load));case 31:case"end":return i.stop()}}),O,null,[[0,22]])}function T({payload:n}){var c,l,s,o,u;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Object(p.put)(h(e.resource.update.load));case 3:return c=n.parentPath||n.databasePath,y.I(c),i.next=7,Object(p.call)(a.update,n.values);case 7:return l=i.sent,s=l.name||l.ref.value.id,o=Object(m.a)({},n,{[r]:l}),i.next=12,Object(p.put)(t.updateSuccess(o));case 12:return u="".concat(d.a.capitalize(r),' "').concat(s,'" updated.'),i.next=15,Object(p.put)(f.showAlert(u));case 15:return i.next=17,Object(p.put)(f.hideAlertDelay());case 17:n.onComplete&&n.onComplete(n),i.next=25;break;case 20:return i.prev=20,i.t0=i.catch(0),n.onComplete&&n.onComplete(n,i.t0),i.next=25,Object(p.call)(L,i.t0,n,"updating");case 25:return i.next=27,Object(p.put)(E(e.resource.update.load));case 27:case"end":return i.stop()}}),w,null,[[0,20]])}function D({payload:n}){var c,l,s,o;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Object(p.put)(h(e.resource.remove.load));case 3:return y.I(n.parentPath),i.next=6,Object(p.call)(a.remove,n);case 6:return c=i.sent,l=c.name||c.ref.value.id,s=Object(m.a)({},n,{[r]:c}),i.next=11,Object(p.put)(t.removeSuccess(s));case 11:return o="".concat(d.a.capitalize(r),' "').concat(l,'" deleted.'),i.next=14,Object(p.put)(f.showAlert(o));case 14:return i.next=16,Object(p.put)(f.hideAlertDelay());case 16:n.onRemoveComplete&&n.onRemoveComplete(n),i.next=25;break;case 19:return i.prev=19,i.t0=i.catch(0),console.error(i.t0),n.onRemoveComplete&&n.onRemoveComplete(n,i.t0),i.next=25,Object(p.call)(L,i.t0,n,"deleting");case 25:return i.next=27,Object(p.put)(E(e.resource.remove.load));case 27:case"end":return i.stop()}}),N,null,[[0,19]])}function R(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.takeLatest)(e.collection.fetch.request,q);case 2:return t.next=4,Object(p.takeLatest)(e.collection.fetchList.request,x);case 4:return t.next=6,Object(p.takeLatest)(e.collection.fetchDocumentsByTerms.request,k);case 6:return t.next=8,Object(p.takeLatest)(e.collection.fetchDocumentByRef.request,I);case 8:return t.next=10,Object(p.takeLatest)(e.resource.create.request,P);case 10:return t.next=12,Object(p.takeLatest)(e.resource.update.request,T);case 12:return t.next=14,Object(p.takeLatest)(e.resource.remove.request,D);case 14:case"end":return t.stop()}}),C)}function L(e,a){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.error(e),n.next=3,Object(p.put)(t.createError({error:e}));case 3:if(a.noErrorAlert){n.next=6;break}return n.next=6,Object(p.put)(f.showAlert(Object(v.a)(e),g.a));case 6:case"end":return n.stop()}}),S)}return R}const j=e=>{if(e){const t=e.split("/");return t[t.length-1]}},_=e=>{if(e){const t=e.split("/");e=1===t.length?void 0:d.a.dropRight(t).join("/")}return e}},442:function(e,t,a){"use strict";a.r(t),a.d(t,"GRAPHQL_PLAYGROUND_MOUNTED",(function(){return h})),a.d(t,"default",(function(){return E}));var n=a(0),r=a.n(n),c=a(671),l=a(438),s=a(326),o=a(11),i=a(49),m=a(134),u=a.n(m),d=a(2);class p extends s.a{constructor(e){super(e),this.state={loading:!1},this.clearPlaygroundLocalStorage=this.clearPlaygroundLocalStorage.bind(this)}clearPlaygroundLocalStorage(){this.setState({loading:!0}),window.localStorage.setItem("graphql-playground",""),setTimeout(()=>{window.location.reload()})}render(){return this.state.error?r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(i.b,{shadow:!0,title:Object(d.b)("graphql.errorBoundaryTitle"),icon:r.a.createElement("img",{src:u.a,alt:"GraphQL Icon"}),action:r.a.createElement(o.a,{onClick:this.clearPlaygroundLocalStorage,loading:this.state.loading,color:"success"},Object(d.b)("graphql.clearLocalStorage")),description:r.a.createElement("div",{className:"container container--small"},r.a.createElement("p",{className:"text-center"},Object(d.b)("graphql.errorBoundary")))}))):this.props.children}}var b=a(25);const h="GRAPHQL_PLAYGROUND_MOUNTED";function E({databaseSecret:e,isLoading:t}){const a=btoa(e),s={authorization:"Basic ".concat(a)};return Object(n.useLayoutEffect)(()=>{t||b.a.emit(h)},[t]),r.a.createElement(p,null,r.a.createElement("div",{"data-hj-suppress":!0,className:"graphql-playground ".concat(t?"graphql-playground--loading":"")},r.a.createElement(c.a,{store:l.store},r.a.createElement(l.Playground,{onSuccess:(e,t)=>console.log(e,t),headers:s,endpoint:"https://graphql.fauna.com/graphql",height:"100%",workspaceName:a,settings:{"schema.polling.enable":!1}}))))}},49:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0);const r=({title:e,icon:t,action:a,shadow:r,muted:c,centered:l,description:s,growDescription:o=!1})=>{const i="\n    well\n    ".concat(c?"well--muted":"","\n    ").concat(l?"well--centered":"","\n  "),m=o?{flexGrow:1}:{};return n.createElement("div",{className:i},n.createElement("div",{className:"well__icon"},t,r&&n.createElement("div",{className:"shadow"})),n.createElement("div",{className:"well__text",style:m},n.createElement("h4",{className:"well__title"},e),n.createElement("div",{className:"well__description"},s),a))};r.defaultProps={shadow:!1,action:n.createElement(n.Fragment,null),muted:!1,centered:!1};const c=({children:e})=>n.createElement("span",{className:"well__texticon"},e);t.b=r},53:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(3);const r={classes:"Class",collections:"Collection",indexes:"Index",databases:"Database",keys:"Key",roles:"Role"},c=e=>{if(void 0===e)return e;if(e instanceof n.values.Ref)return e;{const t="@ref"in e?e["@ref"]:e;return new n.values.Ref(t.id,c(t.collection),c(t.database))}},l=e=>{let t=['"'.concat(e.id,'"')];if(void 0!==e.collection){const a=r[e.collection.id];if(void 0!==a)return void 0!==e.database&&t.push(l(e.database)),t=t.join(", "),"".concat(a,"(").concat(t,")")}return void 0!==e.collection&&(t=[l(e.collection)].concat(t)),t=t.join(", "),"Ref(".concat(t,")")},s=e=>{if(!e)return null;if(e instanceof n.values.Value)return e instanceof n.values.Ref?l(e):e instanceof n.values.FaunaTime?'Time("'.concat(e.value,'")'):e instanceof n.values.FaunaDate?'Date("'.concat(e.value,'")'):e instanceof n.values.Query?"Query(".concat(n.Expr.toString(e.value),")"):null;if("object"===typeof e&&!Array.isArray(e)){switch(Object.keys(e)[0]){case"@ref":return l(c(e));case"@ts":return s(new n.values.FaunaTime(e["@ts"]));case"@date":return s(new n.values.FaunaDate(e["@date"]));case"@code":return e["@code"];case"@query":return s(new n.values.Query(e["@query"]));default:return null}}return null},o=e=>{const t=[];let a=JSON.stringify(e,(e,a)=>{const n=s(a);if(n){const e="$$dash_replacement_$"+t.length+"$$";return t.push(n),e}return a},2);return t.forEach((e,t)=>{a=a.replace('"$$dash_replacement_$'+t+'$$"',e)}),a&&(a=a.replace(/\(null\)/g,"()")),a}},6:function(e,t,a){"use strict";a.d(t,"e",(function(){return h})),a.d(t,"f",(function(){return f})),a.d(t,"g",(function(){return g})),a.d(t,"c",(function(){return v})),a.d(t,"J",(function(){return O})),a.d(t,"o",(function(){return j})),a.d(t,"p",(function(){return _})),a.d(t,"d",(function(){return w})),a.d(t,"y",(function(){return N})),a.d(t,"v",(function(){return C})),a.d(t,"k",(function(){return S})),a.d(t,"N",(function(){return q})),a.d(t,"q",(function(){return x})),a.d(t,"w",(function(){return k})),a.d(t,"a",(function(){return P})),a.d(t,"t",(function(){return T})),a.d(t,"u",(function(){return D})),a.d(t,"s",(function(){return R})),a.d(t,"I",(function(){return L})),a.d(t,"i",(function(){return A})),a.d(t,"L",(function(){return F})),a.d(t,"B",(function(){return U})),a.d(t,"h",(function(){return B})),a.d(t,"K",(function(){return M})),a.d(t,"A",(function(){return V})),a.d(t,"l",(function(){return H})),a.d(t,"O",(function(){return W})),a.d(t,"D",(function(){return G})),a.d(t,"j",(function(){return Q})),a.d(t,"C",(function(){return z})),a.d(t,"M",(function(){return Y})),a.d(t,"z",(function(){return K})),a.d(t,"E",(function(){return J})),a.d(t,"m",(function(){return $})),a.d(t,"Q",(function(){return ee})),a.d(t,"R",(function(){return te})),a.d(t,"b",(function(){return ae})),a.d(t,"G",(function(){return ne})),a.d(t,"n",(function(){return re})),a.d(t,"F",(function(){return ce})),a.d(t,"P",(function(){return le})),a.d(t,"r",(function(){return se})),a.d(t,"H",(function(){return oe})),a.d(t,"x",(function(){return ie}));var n=a(16),r=a.n(n),c=a(47),l=a(7),s=a(3),o=a(51),i=a.n(o),m=a(41),u=a.n(m),d=a(120);const p=String("https://auth.console.fauna.com"),b={size:Number(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_SHELL_URL:"http://localhost:8086",REACT_APP_AUTH_COOKIE_DOMAIN:".fauna.com",REACT_APP_WEBSITE_APP_URL:"https://app.fauna.com",REACT_APP_AUTH_URL:"https://auth.console.fauna.com",REACT_APP_WEBSITE_TERMS_OF_USE_URL:"https://www2.fauna.com/terms",REACT_APP_PARDOT_SIGN_UP_FORM_URL:"https://www2.fauna.com/l/517431/2018-05-25/6bfg3m",REACT_APP_DRIFT_ID:"y6s3em52hv9t",REACT_APP_SENTRY_DSN:"https://d47f8b7d77404cfe929d370b99979808@sentry.io/1391762",REACT_APP_AUTH_GITHUB_CLIENT_ID:"615935a34846151ad806",REACT_APP_GTM_ID:"GTM-TGTQJ7M",REACT_APP_DB_URL:"https://db.fauna.com:443",REACT_APP_ACCOUNT_URL:"https://auth.console.fauna.com",REACT_APP_WEBSITE_PRICING_URL:"https://fauna.com/pricing",REACT_APP_WEBSITE_PRIVACY_POLICY:"https://www2.fauna.com/privacy",REACT_APP_WEBSITE_URL:"https://fauna.com",REACT_APP_STATUS_URL:"http://status.fauna.com"}).REACT_APP_PAGE_SIZE)||1e3};let h,E;const f=e=>{E=e,h=y(E)},g=e=>y(Object(l.a)({},E,{secret:X(e),headers:{"X-Fauna-Source":"Console"}})),y=e=>{const t=e.opts,a=e.urlString,n=e.secret,r=new URL(a),c=t&&t.observer?t.observer:null;return new s.Client({scheme:r.protocol.replace(":",""),domain:r.hostname,port:Number(r.port),secret:n,observer:c})},v=()=>new Promise((e,t)=>{h.query(s.query.Equals(Math.random(),Math.random())).then(()=>e()).catch(t)}),O=()=>i.a.get("".concat(String("https://db.fauna.com:443"),"/ping")),j=e=>h.query(s.query.Get(s.query.Database(e))),_=()=>h.query(s.query.Paginate(s.query.Databases(),b)).then(e=>e.data.sort((e,t)=>e.value.id.localeCompare(t.value.id))),w=()=>h.query(s.query.Map(s.query.Paginate(s.query.Classes(),b),s.query.Lambda(e=>s.query.Get(e)))).then(e=>e.data),N=()=>h.query(s.query.Map(s.query.Paginate(s.query.Indexes(),b),s.query.Lambda(e=>s.query.Get(e)))).then(e=>e.data),C=()=>h.query(s.query.Map(s.query.Paginate(s.query.Functions(),b),s.query.Lambda(e=>s.query.Get(e)))).then(e=>e.data.sort((e,t)=>e.name.localeCompare(t.name))),S=e=>h.query(s.query.CreateFunction(e)),q=(e,t)=>h.query(s.query.Update(s.query.Function(e),t)),x=e=>h.query(s.query.Delete(s.query.Function(e))),k=e=>h.query(s.query.Get(s.query.Function(e)));function I(e){return e.data.map(e=>{const t=Array.isArray(e),a="object"===typeof e&&!e.data;return!t&&a&&(e.data={}),e})}const P=e=>h.query(s.query.Map(s.query.Paginate(s.query.Match(s.query.Index(e)),{size:100}),s.query.Lambda(e=>s.query.Get(e)))).then(I),T=e=>h.query(s.query.Map(s.query.Paginate(s.query.Documents(s.query.Collection(e)),{size:100}),s.query.Lambda(e=>s.query.Get(e)))).then(I),D=(e,t)=>h.query(s.query.Map(s.query.Paginate(s.query.Match(s.query.Index(e),t),{size:100}),e=>s.query.If(s.query.IsRef(e),s.query.Get(e),e))).then(I),R=(e,t)=>h.query(s.query.Map(s.query.Paginate(s.query.Ref(s.query.Class(e),t),b),s.query.Lambda(e=>s.query.Get(e)))).then(I),L=(e,t)=>{const a=e?X(e):Z();f(Object(l.a)({},E,{secret:a,opts:t}))},A=e=>h.query(s.query.CreateDatabase(e)),F=({originalName:e,name:t,data:a})=>h.query(s.query.Update(s.query.Database(e),{name:t,data:a})),U=({name:e})=>h.query(s.query.Delete(s.query.Database(e))),B=e=>h.query(s.query.CreateClass(e)),M=({originalName:e,name:t,history_days:a,ttl_days:n,data:r})=>h.query(s.query.Update(s.query.Class(e),{name:t,history_days:a,ttl_days:n})),V=({name:e})=>h.query(s.query.Delete(s.query.Class(e))),H=e=>h.query(s.query.CreateIndex(Object(l.a)({},e,{source:s.query.Class(e.source),terms:e.terms.map(e=>({field:e.trim().split(".")})),values:u.a.isEmpty(e.values)?null:e.values.map(e=>({field:e.trim().split(".")}))}))),W=(e,t)=>h.query(s.query.Update(e,{name:t.name,unique:t.unique,serialized:t.serialized})),G=e=>h.query(s.query.Delete(e)),Q=(e,t)=>h.query(s.query.Create(s.query.Class(e),{data:t})),z=(e,t)=>h.query(s.query.Delete(s.query.Ref(s.query.Class(e),t))),Y=(e,t,a)=>h.query(s.query.Replace(s.query.Ref(s.query.Class(e),t),{data:a})),K=()=>h.query(s.query.Map(s.query.Paginate(s.query.Keys(),b),s.query.Lambda(e=>s.query.Get(e)))).then(e=>e.data.sort((e,t)=>{const a=Object(d.a)(e),n=Object(d.a)(t);return a.localeCompare(n)})),J=e=>h.query(s.query.Delete(e)),$=e=>h.query(s.query.CreateKey(e)),Z=()=>E.secret.split(":")[0],X=e=>"".concat(Z(),":").concat(e,":").concat("admin"),ee=e=>i.a.get("".concat(p,"/usage"),{params:e,headers:{secret:Z()}}).then(e=>e.data).catch(console.error),te=e=>i.a.get("".concat(p,"/usage/timeseries"),{params:e,headers:{secret:Z()}}).then(e=>e.data).catch(console.error),ae=e=>i.a.get("".concat(p,"/billing"),{params:e,headers:{secret:Z()}}).then(e=>e.data),ne=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.query(s.query.Paginate(s.query.Roles(),b)).then(e=>e.data.sort((e,t)=>e.value.id.localeCompare(t.value.id))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=e=>h.query(s.query.CreateRole(e)),ce=e=>h.query(s.query.Get(s.query.Role(e))),le=(e,t)=>h.query(s.query.Update(s.query.Role(e),t)),se=e=>h.query(s.query.Delete(s.query.Role(e))),oe=(e,t)=>i.a.post("".concat(p,"/tutorials/").concat(t,"/state"),e,{headers:{secret:Z()}}),ie=e=>i.a.get("".concat(p,"/tutorials/").concat(e,"/state"),{headers:{secret:Z()}})},617:function(e,t,a){var n={".":170,"./":170,"./GraphQLLanguageService":401,"./GraphQLLanguageService.js":401,"./GraphQLLanguageService.js.flow":1020,"./autocompleteUtils":295,"./autocompleteUtils.js":295,"./autocompleteUtils.js.flow":1021,"./getAutocompleteSuggestions":210,"./getAutocompleteSuggestions.js":210,"./getAutocompleteSuggestions.js.flow":1022,"./getDefinition":296,"./getDefinition.js":296,"./getDefinition.js.flow":1023,"./getDiagnostics":298,"./getDiagnostics.js":298,"./getDiagnostics.js.flow":1024,"./getHoverInformation":299,"./getHoverInformation.js":299,"./getHoverInformation.js.flow":1025,"./getOutline":400,"./getOutline.js":400,"./getOutline.js.flow":1026,"./index":170,"./index.js":170,"./index.js.flow":1027};function r(e){var t=c(e);return a(t)}function c(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=c,e.exports=r,r.id=617},63:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return evalFQLCode})),__webpack_require__.d(__webpack_exports__,"b",(function(){return runFQLQuery})),__webpack_require__.d(__webpack_exports__,"c",(function(){return runFQLQueryNoReject}));var faunadb__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),faunadb__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(faunadb__WEBPACK_IMPORTED_MODULE_0__),_api__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6);function evalFQLCode(e){return baseEvalFQL(e,faunadb__WEBPACK_IMPORTED_MODULE_0__.query)}function baseEvalFQL(fql,q){const Ref=q.Ref,Bytes=q.Bytes,Abort=q.Abort,At=q.At,Let=q.Let,Var=q.Var,If=q.If,Do=q.Do,Object=q.Object,Lambda=q.Lambda,Call=q.Call,Query=q.Query,Map=q.Map,Foreach=q.Foreach,Filter=q.Filter,Take=q.Take,Drop=q.Drop,Prepend=q.Prepend,Append=q.Append,IsEmpty=q.IsEmpty,IsNonEmpty=q.IsNonEmpty,Get=q.Get,KeyFromSecret=q.KeyFromSecret,Paginate=q.Paginate,Exists=q.Exists,Create=q.Create,Update=q.Update,Replace=q.Replace,Delete=q.Delete,Insert=q.Insert,Remove=q.Remove,CreateClass=q.CreateClass,CreateCollection=q.CreateCollection,CreateDatabase=q.CreateDatabase,CreateIndex=q.CreateIndex,CreateKey=q.CreateKey,CreateFunction=q.CreateFunction,CreateRole=q.CreateRole,Singleton=q.Singleton,Events=q.Events,Match=q.Match,Union=q.Union,Intersection=q.Intersection,Difference=q.Difference,Distinct=q.Distinct,Join=q.Join,Login=q.Login,Logout=q.Logout,Identify=q.Identify,Identity=q.Identity,HasIdentity=q.HasIdentity,Concat=q.Concat,Casefold=q.Casefold,FindStr=q.FindStr,FindStrRegex=q.FindStrRegex,Length=q.Length,LowerCase=q.LowerCase,LTrim=q.LTrim,NGram=q.NGram,Repeat=q.Repeat,ReplaceStr=q.ReplaceStr,ReplaceStrRegex=q.ReplaceStrRegex,RTrim=q.RTrim,Space=q.Space,SubString=q.SubString,TitleCase=q.TitleCase,Trim=q.Trim,UpperCase=q.UpperCase,Time=q.Time,Epoch=q.Epoch,Date=q.Date,NextId=q.NextId,NewId=q.NewId,Database=q.Database,Index=q.Index,Class=q.Class,Collection=q.Collection,Function=q.Function,Role=q.Role,Classes=q.Classes,Collections=q.Collections,Databases=q.Databases,Indexes=q.Indexes,Functions=q.Functions,Roles=q.Roles,Keys=q.Keys,Tokens=q.Tokens,Credentials=q.Credentials,Equals=q.Equals,Contains=q.Contains,Select=q.Select,SelectAll=q.SelectAll,Abs=q.Abs,Add=q.Add,BitAnd=q.BitAnd,BitNot=q.BitNot,BitOr=q.BitOr,BitXor=q.BitXor,Ceil=q.Ceil,Divide=q.Divide,Floor=q.Floor,Max=q.Max,Min=q.Min,Modulo=q.Modulo,Multiply=q.Multiply,Round=q.Round,Subtract=q.Subtract,Sign=q.Sign,Sqrt=q.Sqrt,Trunc=q.Trunc,Acos=q.Acos,Asin=q.Asin,Atan=q.Atan,Cos=q.Cos,Cosh=q.Cosh,Degrees=q.Degrees,Exp=q.Exp,Hypot=q.Hypot,Ln=q.Ln,Log=q.Log,Pow=q.Pow,Radians=q.Radians,Sin=q.Sin,Sinh=q.Sinh,Tan=q.Tan,Tanh=q.Tanh,LT=q.LT,LTE=q.LTE,GT=q.GT,GTE=q.GTE,And=q.And,Or=q.Or,Not=q.Not,ToString=q.ToString,ToNumber=q.ToNumber,ToTime=q.ToTime,ToSeconds=q.ToSeconds,ToMicros=q.ToMicros,ToMillis=q.ToMillis,DayOfMonth=q.DayOfMonth,DayOfWeek=q.DayOfWeek,DayOfYear=q.DayOfYear,Second=q.Second,Minute=q.Minute,Hour=q.Hour,Month=q.Month,Year=q.Year,ToDate=q.ToDate,Format=q.Format,Merge=q.Merge,Range=q.Range,Reduce=q.Reduce,MoveDatabase=q.MoveDatabase,wrap=q.wrap,Count=q.Count,Mean=q.Mean,Sum=q.Sum,StartsWith=q.StartsWith,EndsWith=q.EndsWith,ContainsStr=q.ContainsStr,ContainsStrRegex=q.ContainsStrRegex,RegexEscape=q.RegexEscape,Now=q.Now,ToDouble=q.ToDouble,ToInteger=q.ToInteger,ToObject=q.ToObject,ToArray=q.ToArray,Any=q.Any,All=q.All,TimeAdd=q.TimeAdd,TimeSubtract=q.TimeSubtract,TimeDiff=q.TimeDiff,IsNumber=q.IsNumber,IsDouble=q.IsDouble,IsInteger=q.IsInteger,IsBoolean=q.IsBoolean,IsNull=q.IsNull,IsBytes=q.IsBytes,IsTimestamp=q.IsTimestamp,IsDate=q.IsDate,IsString=q.IsString,IsArray=q.IsArray,IsObject=q.IsObject,IsRef=q.IsRef,IsSet=q.IsSet,IsDoc=q.IsDoc,IsLambda=q.IsLambda,IsCollection=q.IsCollection,IsDatabase=q.IsDatabase,IsIndex=q.IsIndex,IsFunction=q.IsFunction,IsKey=q.IsKey,IsToken=q.IsToken,IsCredentials=q.IsCredentials,IsRole=q.IsRole,Documents=q.Documents;return fql.match(/^\s*{(.*\n*)*}\s*$/)?eval("(".concat(fql,")")):eval(fql)}function runFQLQuery(e){if(!e.trim())return Promise.reject("Can not eval empty query.");try{return _api__WEBPACK_IMPORTED_MODULE_1__.e.query(evalFQLCode(e))}catch(t){return Promise.reject(t)}}function runFQLQueryNoReject(e){try{return Promise.resolve(_api__WEBPACK_IMPORTED_MODULE_1__.e.query(evalFQLCode(e)))}catch(t){const e=t.message,a=t.stack;return Promise.resolve({error:!0,message:e,stack:a})}}},650:function(e,t,a){e.exports=a.p+"static/media/netlify-logo.4bbcb83c.svg"},651:function(e,t,a){e.exports=a.p+"static/media/console-home.fd4e4033.png"},660:function(e,t,a){e.exports=a.p+"static/media/ecommerce.c42fcd7c.gql"},663:function(e,t,a){e.exports=a.p+"static/media/vs-icon.98776559.svg"},669:function(e){e.exports=JSON.parse('{"name":"console2","version":"2.12.0","private":true,"dependencies":{"@nivo/bar":"^0.61.1","@nivo/pie":"^0.52.0","@sentry/browser":"^5.9.1","@testing-library/user-event":"^8.0.3","apollo-link-ws":"^1.0.17","axios":"^0.18.0","chroma-js":"^1.4.0","csstype":"^2.6.9","eslint-config-react-app":"^5.2.0","faunadb":"^2.13.1","graphql":"^14.3.1","graphql-playground-react":"^1.7.20","history":"^4.7.2","immer":"^1.7.2","js-cookie":"^2.2.0","lodash":"^4.17.11","mitt":"^1.2.0","moment":"^2.23.0","moment-timezone":"^0.5.23","query-string":"^6.2.0","react":"^v16.9.0","react-ace":"^6.2.0","react-awesome-popover":"^3.1.0","react-clipboard.js":"^2.0.2","react-dnd":"^9.4.0","react-dnd-html5-backend":"^9.4.0","react-dom":"^v16.9.0","react-gtm-module":"^2.0.2","react-helmet":"^5.2.0","react-onclickoutside":"^6.7.1","react-outlet":"^1.0.9","react-redux":"^7.0.2","react-redux-old":"npm:react-redux@^5.0.6","react-router-dom":"^5.1.2","react-split":"^2.0.7","react-spring":"^8.0.27","react-tooltip":"^3.9.2","redux":"^3.7.2","redux-saga":"^0.16.2","subscriptions-transport-ws":"^0.9.16","swr":"^0.2.0"},"scripts":{"analyze":"source-map-explorer \'build/static/js/*.js\'","start":"PORT=3005 react-scripts start","build":"react-scripts build && npm run build:tracks","build:tracks":"parcel build ./src/assets/scripts/tracks.js -d ./build","test":"react-scripts test","eject":"react-scripts eject","release":"HUSKY_SKIP_HOOKS=1 standard-version","cypress":"cypress open","cypress:run":"cypress run","cypress:ci":"start-server-and-test serve http://localhost:3005 cypress:run","serve":"serve -s build -l 3005","commitlint":"commitlint --from b4b89e6 --to HEAD --verbose","commit":"git-cz","prettier":"prettier --config ./.prettierrc --write \\"src/**/*.{js,jsx,ts,tsx,json,css,scss,md}\\" --loglevel \\"log\\"","lint":"eslint --ext js,ts,tsx src","lint-fix":"eslint --ext js,ts,tsx src --fix"},"browserslist":[">0.2%","not dead","not ie <= 11","not op_mini all"],"devDependencies":{"@commitlint/cli":"^8.3.5","@commitlint/config-conventional":"^8.3.4","@testing-library/jest-dom":"^5.1.1","@testing-library/react":"^9.4.0","@testing-library/react-hooks":"^3.1.1","@types/react-redux":"^7.1.7","@types/react-router-dom":"^5.1.3","@typescript-eslint/eslint-plugin":"^2.23.0","@typescript-eslint/parser":"^2.23.0","commitizen":"^4.0.3","cypress":"^4.1.0","eslint":"^6.8.0","eslint-config-airbnb":"^18.1.0","eslint-config-prettier":"^6.10.0","eslint-plugin-prettier":"^3.1.2","eslint-plugin-react":"^7.19.0","eslint-plugin-react-hooks":"^1.5.0","husky":"^4.2.1","jest-junit":"^10.0.0","lint-staged":"^10.1.1","nock":"^11.7.2","node-sass":"^4.13.1","parcel":"^1.12.4","prettier":"^1.18.2","prettier-eslint-cli":"^5.0.0","prop-types":"^15.6.2","react-scripts":"3.4.1","react-test-renderer":"^16.11.0","redux-devtools-extension":"^2.13.5","serve":"^11.3.0","source-map-explorer":"^2.2.2","standard-version":"^7.1.0","start-server-and-test":"^1.10.11","url-search-params-polyfill":"^8.0.0"},"husky":{"hooks":{"pre-commit":"lint-staged"}},"lint-staged":{"src/**/*.{js,jsx,ts,tsx,json}":["eslint --fix"],"src/**/*.{css,scss}":["prettier --loglevel \\"warn\\" --write"]},"config":{"commitizen":{"path":"./node_modules/cz-conventional-changelog"}}}')},681:function(e,t,a){e.exports=a(1135)},730:function(e,t){},732:function(e,t){},76:function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return l})),a.d(t,"f",(function(){return s})),a.d(t,"a",(function(){return o}));const n="SHOW_ALERT",r="HIDE_ALERT",c="HIDE_ALERT_DELAY",l=2500,s="success",o="error"},80:function(e,t,a){"use strict";a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return u}));var n=a(3),r=a.n(n),c=a(2);const l=r.a.errors,s=l.UnavailableError,o=l.Unauthorized,i=l.BadRequest;function m(e={}){return e instanceof s||(e.message||"").includes("Request has been terminated")}const u=e=>{if(e instanceof o)return Object(c.b)("auth.errors.unauthorized");if(e instanceof i){const t=e.errors()[0],a=t.failures;return a?a[0].description:t.description}return e.message}},899:function(e,t,a){},900:function(e,t,a){}},[[681,3,4]]]);
//# sourceMappingURL=main.08ec5352.chunk.js.map